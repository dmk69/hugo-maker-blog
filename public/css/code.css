/* 
 * 代码高亮和复制功能样式
 * 优化代码块的显示效果和用户体验
 */

/* 代码块容器 */
.code-container {
  position: relative;
  margin: 1.5rem 0;
  border-radius: 0.5rem;
  overflow: hidden;
  box-shadow: var(--shadow-sm);
}

/* 代码块头部 */
.code-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.75rem 1rem;
  background-color: var(--background-color-secondary);
  border-bottom: 1px solid var(--border-color);
  font-size: 0.875rem;
  color: var(--text-color-light);
}

.code-language {
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.code-actions {
  display: flex;
  gap: 0.5rem;
}

/* 代码块主体 */
.code-block {
  position: relative;
  background-color: var(--code-bg);
  border: 1px solid var(--code-border);
  border-radius: 0.5rem;
  overflow: hidden;
  margin: 0;
}

.code-block pre {
  margin: 0;
  padding: 1rem;
  overflow-x: auto;
  background-color: transparent;
  border: none;
  border-radius: 0;
}

.code-block code {
  display: block;
  padding: 0;
  background-color: transparent;
  font-size: 0.875rem;
  line-height: 1.5;
  color: var(--code-text);
  font-family: var(--font-family-mono);
}

/* 复制按钮 */
.copy-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 2rem;
  height: 2rem;
  background-color: transparent;
  color: var(--text-color-light);
  border: none;
  border-radius: 0.25rem;
  cursor: pointer;
  transition: all var(--transition-fast);
  font-size: 0.875rem;
}

.copy-button:hover {
  background-color: var(--background-color);
  color: var(--primary-color);
}

.copy-button.copied {
  color: #10b981;
}

.copy-button svg {
  width: 1rem;
  height: 1rem;
}

/* 行号 */
.line-numbers {
  display: flex;
}

.line-numbers .line-numbers-rows {
  padding-right: 1rem;
  text-align: right;
  -webkit-user-select: none;
  user-select: none;
  color: var(--text-color-light);
  border-right: 1px solid var(--border-color);
  margin-right: 1rem;
}

.line-numbers-rows > span:before {
  content: attr(data-line);
  padding-right: 0.5rem;
  display: block;
}

/* 高亮行 */
.highlight-line {
  background-color: rgba(37, 99, 235, 0.1);
  display: block;
  margin: 0 -1rem;
  padding: 0 1rem;
  border-left: 3px solid var(--primary-color);
}

/* 代码高亮主题 - 基于VS Code暗色主题 */
.highlight .chroma {
  background-color: var(--code-bg);
  color: var(--code-text);
}

.highlight .chroma .ln {
  margin-right: 0.5rem;
  padding: 0 0.5rem;
  color: var(--text-color-light);
  -webkit-user-select: none;
  user-select: none;
}

/* 语法高亮颜色 */
.highlight .chroma .bp { color: #d19a66; } /* Built-in pseudo */
.highlight .chroma .c { color: #6a737d; font-style: italic; } /* Comment */
.highlight .chroma .c1 { color: #6a737d; font-style: italic; } /* Comment.Single */
.highlight .chroma .ch { color: #6a737d; font-style: italic; } /* Comment.Hashbang */
.highlight .chroma .cm { color: #6a737d; font-style: italic; } /* Comment.Multiline */
.highlight .chroma .cp { color: #d19a66; } /* Comment.Preproc */
.highlight .chroma .cpf { color: #d19a66; } /* Comment.PreprocFile */
.highlight .chroma .cs { color: #6a737d; font-style: italic; } /* Comment.Special */
.highlight .chroma .dl { color: #98c379; } /* String.Delimiter */
.highlight .chroma .gd { color: #f92672; } /* Generic.Deleted */
.highlight .chroma .ge { font-style: italic; } /* Generic.Emph */
.highlight .chroma .gh { color: #e06c75; font-weight: bold; } /* Generic.Heading */
.highlight .chroma .gi { color: #a6e22e; } /* Generic.Inserted */
.highlight .chroma .go { color: #66d9ef; } /* Generic.Output */
.highlight .chroma .gp { color: #f92672; } /* Generic.Prompt */
.highlight .chroma .gs { font-weight: bold; } /* Generic.Strong */
.highlight .chroma .gu { color: #75715e; } /* Generic.Subheading */
.highlight .chroma .gt { color: #f92672; } /* Generic.Traceback */
.highlight .chroma .il { color: #d19a66; } /* Literal.Number.Integer.Long */
.highlight .chroma .k { color: #c678dd; } /* Keyword */
.highlight .chroma .kc { color: #c678dd; } /* Keyword.Constant */
.highlight .chroma .kd { color: #c678dd; } /* Keyword.Declaration */
.highlight .chroma .kn { color: #c678dd; } /* Keyword.Namespace */
.highlight .chroma .kp { color: #c678dd; } /* Keyword.Pseudo */
.highlight .chroma .kr { color: #c678dd; } /* Keyword.Reserved */
.highlight .chroma .kt { color: #e06c75; } /* Keyword.Type */
.highlight .chroma .m { color: #d19a66; } /* Literal.Number */
.highlight .chroma .mb { color: #d19a66; } /* Literal.Number.Bin */
.highlight .chroma .mf { color: #d19a66; } /* Literal.Number.Float */
.highlight .chroma .mh { color: #d19a66; } /* Literal.Number.Hex */
.highlight .chroma .mi { color: #d19a66; } /* Literal.Number.Integer */
.highlight .chroma .mo { color: #d19a66; } /* Literal.Number.Oct */
.highlight .chroma .na { color: #e06c75; } /* Name.Attribute */
.highlight .chroma .nb { color: #e06c75; } /* Name.Builtin */
.highlight .chroma .nc { color: #e06c75; } /* Name.Class */
.highlight .chroma .no { color: #e06c75; } /* Name.Constant */
.highlight .chroma .nd { color: #e06c75; } /* Name.Decorator */
.highlight .chroma .ni { color: #e06c75; } /* Name.Entity */
.highlight .chroma .ne { color: #e06c75; } /* Name.Exception */
.highlight .chroma .nf { color: #61afef; } /* Name.Function */
.highlight .chroma .nl { color: #e06c75; } /* Name.Label */
.highlight .chroma .nn { color: #e06c75; } /* Name.Namespace */
.highlight .chroma .nx { color: #e06c75; } /* Name.Other */
.highlight .chroma .py { color: #e06c75; } /* Name.Property */
.highlight .chroma .nt { color: #c678dd; } /* Name.Tag */
.highlight .chroma .nv { color: #e06c75; } /* Name.Variable */
.highlight .chroma .ow { color: #c678dd; } /* Operator.Word */
.highlight .chroma .p { color: #abb2bf; } /* Punctuation */
.highlight .chroma .s { color: #98c379; } /* Literal.String */
.highlight .chroma .s1 { color: #98c379; } /* Literal.String.Single */
.highlight .chroma .s2 { color: #98c379; } /* Literal.String.Double */
.highlight .chroma .sa { color: #98c379; } /* Literal.String.Affix */
.highlight .chroma .sb { color: #98c379; } /* Literal.String.Backtick */
.highlight .chroma .sc { color: #98c379; } /* Literal.String.Char */
.highlight .chroma .sd { color: #6a737d; font-style: italic; } /* Literal.String.Doc */
.highlight .chroma .se { color: #d19a66; } /* Literal.String.Escape */
.highlight .chroma .sh { color: #98c379; } /* Literal.String.Heredoc */
.highlight .chroma .si { color: #98c379; } /* Literal.String.Interpol */
.highlight .chroma .sr { color: #56b6c2; } /* Literal.String.Regex */
.highlight .chroma .ss { color: #98c379; } /* Literal.String.Symbol */
.highlight .chroma .sx { color: #98c379; } /* Literal.String.Other */
.highlight .chroma .vm { color: #e06c75; } /* Name.Variable.Magic */
.highlight .chroma .w { color: #abb2bf; } /* Text.Whitespace */

/* 内联代码 */
:not(pre) > code {
  display: inline-block;
  padding: 0.125rem 0.375rem;
  margin: 0 0.125rem;
  font-size: 0.875em;
  background-color: var(--code-bg);
  color: var(--code-text);
  border-radius: 0.25rem;
  border: 1px solid var(--code-border);
  font-family: var(--font-family-mono);
  word-wrap: break-word;
}

/* 代码组 */
.code-group {
  margin: 1.5rem 0;
  border: 1px solid var(--border-color);
  border-radius: 0.5rem;
  overflow: hidden;
}

.code-group-tabs {
  display: flex;
  background-color: var(--background-color-secondary);
  border-bottom: 1px solid var(--border-color);
}

.code-group-tab {
  padding: 0.75rem 1rem;
  background-color: transparent;
  color: var(--text-color-light);
  border: none;
  border-bottom: 2px solid transparent;
  cursor: pointer;
  font-size: 0.875rem;
  font-weight: 500;
  transition: all var(--transition-fast);
}

.code-group-tab:hover {
  color: var(--text-color);
  background-color: var(--background-color);
}

.code-group-tab.active {
  color: var(--primary-color);
  border-bottom-color: var(--primary-color);
  background-color: var(--background-color);
}

.code-group-content {
  display: none;
}

.code-group-content.active {
  display: block;
}

/* 终端样式 */
.terminal {
  background-color: #1e1e1e;
  color: #d4d4d4;
  border-radius: 0.5rem;
  overflow: hidden;
  margin: 1.5rem 0;
  box-shadow: var(--shadow-lg);
}

.terminal-header {
  display: flex;
  align-items: center;
  padding: 0.5rem 1rem;
  background-color: #2d2d30;
  border-bottom: 1px solid #3e3e42;
}

.terminal-buttons {
  display: flex;
  gap: 0.5rem;
}

.terminal-button {
  width: 0.75rem;
  height: 0.75rem;
  border-radius: 50%;
}

.terminal-button.close {
  background-color: #ff5f56;
}

.terminal-button.minimize {
  background-color: #ffbd2e;
}

.terminal-button.maximize {
  background-color: #27c93f;
}

.terminal-title {
  flex-grow: 1;
  text-align: center;
  font-size: 0.875rem;
  color: #cccccc;
}

.terminal-body {
  padding: 1rem;
  font-family: var(--font-family-mono);
  font-size: 0.875rem;
  line-height: 1.5;
}

.terminal-prompt {
  color: #4ec9b0;
}

.terminal-command {
  color: #d4d4d4;
}

.terminal-output {
  color: #9cdcfe;
}

/* 代码差异 */
.diff {
  margin: 1.5rem 0;
  border: 1px solid var(--border-color);
  border-radius: 0.5rem;
  overflow: hidden;
}

.diff-line {
  padding: 0.5rem 1rem;
  font-family: var(--font-family-mono);
  font-size: 0.875rem;
  line-height: 1.5;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.diff-line.context {
  background-color: var(--background-color);
  color: var(--text-color);
}

.diff-line.added {
  background-color: rgba(34, 197, 94, 0.1);
  color: var(--text-color);
  border-left: 3px solid #22c55e;
}

.diff-line.removed {
  background-color: rgba(239, 68, 68, 0.1);
  color: var(--text-color);
  border-left: 3px solid #ef4444;
}

.diff-line-header {
  background-color: var(--background-color-secondary);
  color: var(--text-color-light);
  font-weight: 500;
}

/* 响应式设计 */
@media (max-width: 768px) {
  .code-header {
    padding: 0.5rem 0.75rem;
  }
  
  .code-block pre {
    padding: 0.75rem;
    font-size: 0.8rem;
  }
  
  .code-group-tabs {
    overflow-x: auto;
  }
  
  .terminal-header {
    padding: 0.5rem 0.75rem;
  }
  
  .terminal-body {
    padding: 0.75rem;
    font-size: 0.8rem;
  }
  
  .diff-line {
    padding: 0.375rem 0.75rem;
    font-size: 0.8rem;
  }
}

/* 打印样式 */
@media print {
  .code-header,
  .copy-button,
  .terminal-header,
  .diff-line-header {
    display: none;
  }
  
  .code-block,
  .terminal,
  .diff {
    border: 1px solid #000;
    break-inside: avoid;
  }
  
  .code-block pre,
  .terminal-body,
  .diff-line {
    font-size: 0.7rem;
    line-height: 1.2;
  }
}