<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>FreeRTOS on åˆ›å®¢æ•™è‚²åšå®¢</title><link>https://hugo-maker-blog.vercel.app/tags/freertos/</link><description>Recent content in FreeRTOS on åˆ›å®¢æ•™è‚²åšå®¢</description><image><title>åˆ›å®¢æ•™è‚²åšå®¢</title><url>https://hugo-maker-blog.vercel.app/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</url><link>https://hugo-maker-blog.vercel.app/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</link></image><generator>Hugo -- 0.152.2</generator><language>zh-cn</language><lastBuildDate>Sat, 08 Nov 2025 10:30:00 +0800</lastBuildDate><atom:link href="https://hugo-maker-blog.vercel.app/tags/freertos/index.xml" rel="self" type="application/rss+xml"/><item><title>STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š</title><link>https://hugo-maker-blog.vercel.app/posts/stm32-learning-guide/</link><pubDate>Sat, 08 Nov 2025 10:30:00 +0800</pubDate><guid>https://hugo-maker-blog.vercel.app/posts/stm32-learning-guide/</guid><description>&lt;h1 id="-stm32å®Œæ•´å­¦ä¹ æŒ‡å—ä»å…¥é—¨åˆ°ç²¾é€š"&gt;ğŸ”§ STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š&lt;/h1&gt;
&lt;p&gt;STM32æ˜¯STå…¬å¸æ¨å‡ºçš„åŸºäºARM Cortex-Må†…æ ¸çš„32ä½å¾®æ§åˆ¶å™¨ç³»åˆ—ï¼Œåœ¨å·¥ä¸šæ§åˆ¶ã€æ¶ˆè´¹ç”µå­ã€ç‰©è”ç½‘ç­‰é¢†åŸŸæœ‰ç€å¹¿æ³›åº”ç”¨ã€‚æœ¬æŒ‡å—å°†å¸¦ä½ ä»é›¶åŸºç¡€é€æ­¥æŒæ¡STM32å¼€å‘ã€‚&lt;/p&gt;
&lt;h2 id="-å­¦ä¹ è·¯å¾„è§„åˆ’"&gt;ğŸ“š å­¦ä¹ è·¯å¾„è§„åˆ’&lt;/h2&gt;
&lt;h3 id="é˜¶æ®µä¸€åŸºç¡€å…¥é—¨-ç¬¬1-4å‘¨"&gt;é˜¶æ®µä¸€ï¼šåŸºç¡€å…¥é—¨ (ç¬¬1-4å‘¨)&lt;/h3&gt;
&lt;h4 id="11-å¼€å‘ç¯å¢ƒæ­å»º"&gt;1.1 å¼€å‘ç¯å¢ƒæ­å»º&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# å¿…éœ€è½¯ä»¶&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;- STM32CubeIDE &lt;span style="color:#f92672"&gt;(&lt;/span&gt;æ¨è&lt;span style="color:#f92672"&gt;)&lt;/span&gt; æˆ– Keil MDK
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;- STM32CubeMX &lt;span style="color:#f92672"&gt;(&lt;/span&gt;å›¾å½¢åŒ–é…ç½®å·¥å…·&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;- ST-Linké©±åŠ¨å’Œè°ƒè¯•å·¥å…·
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;- ä¸²å£è°ƒè¯•åŠ©æ‰‹ &lt;span style="color:#f92672"&gt;(&lt;/span&gt;XShellã€MobaXtermç­‰&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="12-ç¡¬ä»¶å‡†å¤‡"&gt;1.2 ç¡¬ä»¶å‡†å¤‡&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¼€å‘æ¿å‹å·&lt;/th&gt;
&lt;th&gt;ä»·æ ¼&lt;/th&gt;
&lt;th&gt;æ¨èåº¦&lt;/th&gt;
&lt;th&gt;ç‰¹ç‚¹&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;STM32F103C8T6&lt;/td&gt;
&lt;td&gt;ï¿¥15-25&lt;/td&gt;
&lt;td&gt;â­â­â­â­â­&lt;/td&gt;
&lt;td&gt;ç»å…¸å‹å·ï¼Œèµ„æ–™ä¸°å¯Œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;STM32F407VGT6&lt;/td&gt;
&lt;td&gt;ï¿¥60-80&lt;/td&gt;
&lt;td&gt;â­â­â­â­&lt;/td&gt;
&lt;td&gt;æ€§èƒ½å¼ºå¤§ï¼Œé€‚åˆé«˜çº§åº”ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;STM32L051C8&lt;/td&gt;
&lt;td&gt;ï¿¥20-30&lt;/td&gt;
&lt;td&gt;â­â­â­&lt;/td&gt;
&lt;td&gt;ä½åŠŸè€—ï¼Œé€‚åˆç”µæ± åº”ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id="13-ç¬¬ä¸€ä¸ªç¨‹åºledé—ªçƒ"&gt;1.3 ç¬¬ä¸€ä¸ªç¨‹åºï¼šLEDé—ªçƒ&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;/* main.c */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;#include&lt;/span&gt; &lt;span style="color:#75715e"&gt;&amp;#34;main.h&amp;#34;&lt;/span&gt;&lt;span style="color:#75715e"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;int&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;main&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_Init&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;SystemClock_Config&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// åˆå§‹åŒ–GPIO
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;__HAL_RCC_GPIOC_CLK_ENABLE&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; GPIO_InitTypeDef GPIO_InitStruct &lt;span style="color:#f92672"&gt;=&lt;/span&gt; {&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; GPIO_InitStruct.Pin &lt;span style="color:#f92672"&gt;=&lt;/span&gt; GPIO_PIN_13;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; GPIO_InitStruct.Mode &lt;span style="color:#f92672"&gt;=&lt;/span&gt; GPIO_MODE_OUTPUT_PP;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; GPIO_InitStruct.Pull &lt;span style="color:#f92672"&gt;=&lt;/span&gt; GPIO_NOPULL;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; GPIO_InitStruct.Speed &lt;span style="color:#f92672"&gt;=&lt;/span&gt; GPIO_SPEED_FREQ_LOW;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_GPIO_Init&lt;/span&gt;(GPIOC, &lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt;GPIO_InitStruct);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;while&lt;/span&gt; (&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_GPIO_WritePin&lt;/span&gt;(GPIOC, GPIO_PIN_13, GPIO_PIN_SET);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_Delay&lt;/span&gt;(&lt;span style="color:#ae81ff"&gt;500&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_GPIO_WritePin&lt;/span&gt;(GPIOC, GPIO_PIN_13, GPIO_PIN_RESET);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_Delay&lt;/span&gt;(&lt;span style="color:#ae81ff"&gt;500&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="é˜¶æ®µäºŒå¤–è®¾åº”ç”¨-ç¬¬5-8å‘¨"&gt;é˜¶æ®µäºŒï¼šå¤–è®¾åº”ç”¨ (ç¬¬5-8å‘¨)&lt;/h3&gt;
&lt;h4 id="21-gpioæ·±å…¥ç†è§£"&gt;2.1 GPIOæ·±å…¥ç†è§£&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;è¾“å…¥è¾“å‡ºæ¨¡å¼é…ç½®&lt;/li&gt;
&lt;li&gt;ä¸­æ–­å’Œäº‹ä»¶å¤„ç†&lt;/li&gt;
&lt;li&gt;å¤ç”¨åŠŸèƒ½é…ç½®&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="22-å®šæ—¶å™¨åº”ç”¨"&gt;2.2 å®šæ—¶å™¨åº”ç”¨&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// PWMè¾“å‡ºé…ç½®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Timer_PWM_Init&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; TIM_HandleTypeDef htim3;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; TIM_OC_InitTypeDef sConfigOC &lt;span style="color:#f92672"&gt;=&lt;/span&gt; {&lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; htim3.Instance &lt;span style="color:#f92672"&gt;=&lt;/span&gt; TIM3;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; htim3.Init.Prescaler &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;71&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// 72MHz/72 = 1MHz
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; htim3.Init.CounterMode &lt;span style="color:#f92672"&gt;=&lt;/span&gt; TIM_COUNTERMODE_UP;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; htim3.Init.Period &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;999&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// 1kHz
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; htim3.Init.ClockDivision &lt;span style="color:#f92672"&gt;=&lt;/span&gt; TIM_CLOCKDIVISION_DIV1;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_TIM_PWM_Init&lt;/span&gt;(&lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt;htim3);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sConfigOC.OCMode &lt;span style="color:#f92672"&gt;=&lt;/span&gt; TIM_OCMODE_PWM1;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sConfigOC.Pulse &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;499&lt;/span&gt;; &lt;span style="color:#75715e"&gt;// 50%å ç©ºæ¯”
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; sConfigOC.OCPolarity &lt;span style="color:#f92672"&gt;=&lt;/span&gt; TIM_OCPOLARITY_HIGH;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sConfigOC.OCFastMode &lt;span style="color:#f92672"&gt;=&lt;/span&gt; TIM_OCFAST_DISABLE;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_TIM_PWM_ConfigChannel&lt;/span&gt;(&lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt;htim3, &lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt;sConfigOC, TIM_CHANNEL_1);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="23-ä¸²å£é€šä¿¡"&gt;2.3 ä¸²å£é€šä¿¡&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// UARTé…ç½®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;UART_Init&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; UART_HandleTypeDef huart1;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; huart1.Instance &lt;span style="color:#f92672"&gt;=&lt;/span&gt; USART1;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; huart1.Init.BaudRate &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;115200&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; huart1.Init.WordLength &lt;span style="color:#f92672"&gt;=&lt;/span&gt; UART_WORDLENGTH_8B;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; huart1.Init.StopBits &lt;span style="color:#f92672"&gt;=&lt;/span&gt; UART_STOPBITS_1;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; huart1.Init.Parity &lt;span style="color:#f92672"&gt;=&lt;/span&gt; UART_PARITY_NONE;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; huart1.Init.Mode &lt;span style="color:#f92672"&gt;=&lt;/span&gt; UART_MODE_TX_RX;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; huart1.Init.HwFlowCtl &lt;span style="color:#f92672"&gt;=&lt;/span&gt; UART_HWCONTROL_NONE;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_UART_Init&lt;/span&gt;(&lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt;huart1);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// å‘é€æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;uint8_t&lt;/span&gt; data[] &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;Hello STM32!&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;\r\n&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;HAL_UART_Transmit&lt;/span&gt;(&lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt;huart1, data, &lt;span style="color:#66d9ef"&gt;sizeof&lt;/span&gt;(data), &lt;span style="color:#ae81ff"&gt;1000&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="é˜¶æ®µä¸‰é«˜çº§åº”ç”¨-ç¬¬9-12å‘¨"&gt;é˜¶æ®µä¸‰ï¼šé«˜çº§åº”ç”¨ (ç¬¬9-12å‘¨)&lt;/h3&gt;
&lt;h4 id="31-adcé‡‡æ ·"&gt;3.1 ADCé‡‡æ ·&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// ADCé…ç½®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;ADC_Init&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ADC_HandleTypeDef hadc1;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; hadc1.Instance &lt;span style="color:#f92672"&gt;=&lt;/span&gt; ADC1;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; hadc1.Init.ClockPrescaler &lt;span style="color:#f92672"&gt;=&lt;/span&gt; ADC_CLOCK_SYNC_PCLK_DIV4;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; hadc1.Init.Resolution &lt;span style="color:#f92672"&gt;=&lt;/span&gt; ADC_RESOLUTION_12B;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; hadc1.Init.ScanConvMode &lt;span style="color:#f92672"&gt;=&lt;/span&gt; DISABLE;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; hadc1.Init.ContinuousConvMode &lt;span style="color:#f92672"&gt;=&lt;/span&gt; ENABLE;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; hadc1.Init.DiscontinuousConvMode &lt;span style="color:#f92672"&gt;=&lt;/span&gt; DISABLE;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; hadc1.Init.ExternalTrigConv &lt;span style="color:#f92672"&gt;=&lt;/span&gt; ADC_SOFTWARE_START;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; hadc1.Init.DataAlign &lt;span style="color:#f92672"&gt;=&lt;/span&gt; ADC_DATAALIGN_RIGHT;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; hadc1.Init.NbrOfConversion &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_ADC_Init&lt;/span&gt;(&lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt;hadc1);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// è¯»å–ADCå€¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;uint32_t&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;ADC_Read&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_ADC_Start&lt;/span&gt;(&lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt;hadc1);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_ADC_PollForConversion&lt;/span&gt;(&lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt;hadc1, &lt;span style="color:#ae81ff"&gt;1000&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;HAL_ADC_GetValue&lt;/span&gt;(&lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt;hadc1);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="32-i2cå’Œspié€šä¿¡"&gt;3.2 I2Cå’ŒSPIé€šä¿¡&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// I2Cè¯»å–ä¼ æ„Ÿå™¨æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;HAL_StatusTypeDef &lt;span style="color:#a6e22e"&gt;I2C_Read_Sensor&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;uint8_t&lt;/span&gt; dev_addr, &lt;span style="color:#66d9ef"&gt;uint8_t&lt;/span&gt; reg_addr,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;uint8_t&lt;/span&gt; &lt;span style="color:#f92672"&gt;*&lt;/span&gt;data, &lt;span style="color:#66d9ef"&gt;uint16_t&lt;/span&gt; len) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_I2C_Mem_Read&lt;/span&gt;(&lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt;hi2c1, dev_addr, reg_addr, &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;, data, len, &lt;span style="color:#ae81ff"&gt;1000&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; HAL_OK;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="-å­¦ä¹ èµ„æºæ¨è"&gt;ğŸ“– å­¦ä¹ èµ„æºæ¨è&lt;/h2&gt;
&lt;h3 id="å®˜æ–¹æ–‡æ¡£"&gt;å®˜æ–¹æ–‡æ¡£&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.st.com/resource/en/reference_manual/cd00171190-stm32f101xx-stm32f102xx-stm32f103xx-stm32f105xx-and-stm32f107xx-advanced-arm-based-32-bit-mcus-stmicroelectronics.pdf"&gt;STM32å‚è€ƒæ‰‹å†Œ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.st.com/resource/en/user_manual/dm00105879-description-of-stm32f4-hal-and-lowlayer-drivers-stmicroelectronics.pdf"&gt;HALåº“ç”¨æˆ·æ‰‹å†Œ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="è§†é¢‘æ•™ç¨‹"&gt;è§†é¢‘æ•™ç¨‹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Bç«™&lt;/strong&gt;: æ­£ç‚¹åŸå­ã€é‡ç«ã€å®‰ç¦è±&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;YouTube&lt;/strong&gt;: STM32å®˜æ–¹é¢‘é“ã€åµŒå…¥å¼ç³»ç»Ÿå¼€å‘è€…&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="å¼€å‘æ¿æ¨è"&gt;å¼€å‘æ¿æ¨è&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ­£ç‚¹åŸå­F103&lt;/strong&gt;: èµ„æ–™ä¸°å¯Œï¼Œé€‚åˆåˆå­¦è€…&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é‡ç«F407&lt;/strong&gt;: æ•™ç¨‹ç³»ç»Ÿï¼Œé¡¹ç›®ä¸°å¯Œ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰ç¦è±Lç³»åˆ—&lt;/strong&gt;: ä¸“æ³¨ä½åŠŸè€—åº”ç”¨&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="-å®è·µé¡¹ç›®"&gt;ğŸ› ï¸ å®è·µé¡¹ç›®&lt;/h2&gt;
&lt;h3 id="é¡¹ç›®1æ™ºèƒ½ç¯å¢ƒç›‘æµ‹å™¨"&gt;é¡¹ç›®1ï¼šæ™ºèƒ½ç¯å¢ƒç›‘æµ‹å™¨&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// å¤šä¼ æ„Ÿå™¨æ•°æ®é‡‡é›†
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;typedef&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;float&lt;/span&gt; temperature; &lt;span style="color:#75715e"&gt;// æ¸©åº¦
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;float&lt;/span&gt; humidity; &lt;span style="color:#75715e"&gt;// æ¹¿åº¦
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;uint16_t&lt;/span&gt; light; &lt;span style="color:#75715e"&gt;// å…‰ç…§
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;uint16_t&lt;/span&gt; air_quality; &lt;span style="color:#75715e"&gt;// ç©ºæ°”è´¨é‡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;} SensorData;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Read_All_Sensors&lt;/span&gt;(SensorData &lt;span style="color:#f92672"&gt;*&lt;/span&gt;data) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; data&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;temperature &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;DHT11_Read_Temperature&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; data&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;humidity &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;DHT11_Read_Humidity&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; data&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;light &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;ADC_Read_Light&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; data&lt;span style="color:#f92672"&gt;-&amp;gt;&lt;/span&gt;air_quality &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;ADC_Read_Air&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="é¡¹ç›®2æ™ºèƒ½å°è½¦æ§åˆ¶ç³»ç»Ÿ"&gt;é¡¹ç›®2ï¼šæ™ºèƒ½å°è½¦æ§åˆ¶ç³»ç»Ÿ&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// ç”µæœºæ§åˆ¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;typedef&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;enum&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; CAR_FORWARD,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; CAR_BACKWARD,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; CAR_LEFT,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; CAR_RIGHT,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; CAR_STOP
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;} CarDirection;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Car_Control&lt;/span&gt;(CarDirection dir, &lt;span style="color:#66d9ef"&gt;uint8_t&lt;/span&gt; speed) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;switch&lt;/span&gt;(dir) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;case&lt;/span&gt; CAR_FORWARD:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;Motor_Control&lt;/span&gt;(MOTOR_LEFT, FORWARD, speed);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;Motor_Control&lt;/span&gt;(MOTOR_RIGHT, FORWARD, speed);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;case&lt;/span&gt; CAR_BACKWARD:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;Motor_Control&lt;/span&gt;(MOTOR_LEFT, BACKWARD, speed);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;Motor_Control&lt;/span&gt;(MOTOR_RIGHT, BACKWARD, speed);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// ... å…¶ä»–æ–¹å‘æ§åˆ¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="-è°ƒè¯•æŠ€å·§"&gt;ğŸ”§ è°ƒè¯•æŠ€å·§&lt;/h2&gt;
&lt;h3 id="1-ä¸²å£è°ƒè¯•"&gt;1. ä¸²å£è°ƒè¯•&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// è°ƒè¯•å®å®šä¹‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#75715e"&gt;#define DEBUG_PRINTF(fmt, args...) \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; do { \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; char debug_buf[128]; \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; sprintf(debug_buf, fmt, ##args); \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; HAL_UART_Transmit(&amp;amp;huart1, (uint8_t*)debug_buf, strlen(debug_buf), 1000); \
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; } while(0)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// ä½¿ç”¨ç¤ºä¾‹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;DEBUG_PRINTF&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Temperature: %.2fÂ°C&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;\r\n&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;, temperature);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="2-ledçŠ¶æ€æŒ‡ç¤º"&gt;2. LEDçŠ¶æ€æŒ‡ç¤º&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// é”™è¯¯ç æŒ‡ç¤º
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;void&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;Error_Handler&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;uint32_t&lt;/span&gt; error_code) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;while&lt;/span&gt;(&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt;(&lt;span style="color:#66d9ef"&gt;int&lt;/span&gt; i &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;; i &lt;span style="color:#f92672"&gt;&amp;lt;&lt;/span&gt; error_code; i&lt;span style="color:#f92672"&gt;++&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_GPIO_WritePin&lt;/span&gt;(GPIOC, GPIO_PIN_13, GPIO_PIN_SET);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_Delay&lt;/span&gt;(&lt;span style="color:#ae81ff"&gt;200&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_GPIO_WritePin&lt;/span&gt;(GPIOC, GPIO_PIN_13, GPIO_PIN_RESET);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_Delay&lt;/span&gt;(&lt;span style="color:#ae81ff"&gt;200&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;HAL_Delay&lt;/span&gt;(&lt;span style="color:#ae81ff"&gt;1000&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="-å­¦ä¹ æ—¶é—´è§„åˆ’"&gt;ğŸ“ˆ å­¦ä¹ æ—¶é—´è§„åˆ’&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‘¨æ•°&lt;/th&gt;
&lt;th&gt;å­¦ä¹ å†…å®¹&lt;/th&gt;
&lt;th&gt;å®è·µé¡¹ç›®&lt;/th&gt;
&lt;th&gt;é¢„æœŸæˆæœ&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1-2&lt;/td&gt;
&lt;td&gt;å¼€å‘ç¯å¢ƒæ­å»ºï¼ŒGPIOæ§åˆ¶&lt;/td&gt;
&lt;td&gt;LEDé—ªçƒå®éªŒ&lt;/td&gt;
&lt;td&gt;æŒæ¡åŸºæœ¬GPIOæ“ä½œ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3-4&lt;/td&gt;
&lt;td&gt;å®šæ—¶å™¨ï¼ŒPWMï¼Œä¸­æ–­&lt;/td&gt;
&lt;td&gt;å‘¼å¸ç¯ï¼ŒæŒ‰é”®æ§åˆ¶&lt;/td&gt;
&lt;td&gt;ç†è§£å®šæ—¶å™¨å’Œä¸­æ–­&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;5-6&lt;/td&gt;
&lt;td&gt;ä¸²å£é€šä¿¡ï¼ŒADC&lt;/td&gt;
&lt;td&gt;ä¸²å£è°ƒè¯•åŠ©æ‰‹ï¼Œç”µå‹è¡¨&lt;/td&gt;
&lt;td&gt;æŒæ¡é€šä¿¡å’Œé‡‡æ ·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;7-8&lt;/td&gt;
&lt;td&gt;I2Cï¼ŒSPIé€šä¿¡&lt;/td&gt;
&lt;td&gt;ä¼ æ„Ÿå™¨æ•°æ®è¯»å–&lt;/td&gt;
&lt;td&gt;ç†Ÿæ‚‰æ€»çº¿é€šä¿¡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;9-10&lt;/td&gt;
&lt;td&gt;DMAï¼Œé«˜çº§å®šæ—¶å™¨&lt;/td&gt;
&lt;td&gt;éŸ³é¢‘æ’­æ”¾ï¼Œé«˜é€Ÿé‡‡é›†&lt;/td&gt;
&lt;td&gt;äº†è§£é«˜çº§ç‰¹æ€§&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;11-12&lt;/td&gt;
&lt;td&gt;FreeRTOSåŸºç¡€&lt;/td&gt;
&lt;td&gt;å¤šä»»åŠ¡ç³»ç»Ÿ&lt;/td&gt;
&lt;td&gt;æŒæ¡å®æ—¶ç³»ç»Ÿ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="-è¿›é˜¶æ–¹å‘"&gt;ğŸš€ è¿›é˜¶æ–¹å‘&lt;/h2&gt;
&lt;h3 id="1-freertoså®æ—¶ç³»ç»Ÿ"&gt;1. FreeRTOSå®æ—¶ç³»ç»Ÿ&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-c" data-lang="c"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// ä»»åŠ¡åˆ›å»º
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;osThreadId_t&lt;/span&gt; defaultTaskHandle;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;const&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;osThreadAttr_t&lt;/span&gt; defaultTask_attributes &lt;span style="color:#f92672"&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; .name &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;defaultTask&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; .stack_size &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;128&lt;/span&gt; &lt;span style="color:#f92672"&gt;*&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;4&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; .priority &lt;span style="color:#f92672"&gt;=&lt;/span&gt; (&lt;span style="color:#66d9ef"&gt;osPriority_t&lt;/span&gt;) osPriorityNormal,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;defaultTaskHandle &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;osThreadNew&lt;/span&gt;(StartDefaultTask, NULL, &lt;span style="color:#f92672"&gt;&amp;amp;&lt;/span&gt;defaultTask_attributes);
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="2-bootloaderå¼€å‘"&gt;2. Bootloaderå¼€å‘&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;IAP (In-Application Programming)&lt;/li&gt;
&lt;li&gt;å›ºä»¶å‡çº§æœºåˆ¶&lt;/li&gt;
&lt;li&gt;åŒå¤‡ä»½ç³»ç»Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3-ä½åŠŸè€—ä¼˜åŒ–"&gt;3. ä½åŠŸè€—ä¼˜åŒ–&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;STOPå’ŒSTANDBYæ¨¡å¼&lt;/li&gt;
&lt;li&gt;å¤–è®¾æ—¶é’Ÿç®¡ç†&lt;/li&gt;
&lt;li&gt;åŠ¨æ€ç”µå‹è°ƒèŠ‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="-å¸¸è§é—®é¢˜è§£å†³"&gt;ğŸ’¡ å¸¸è§é—®é¢˜è§£å†³&lt;/h2&gt;
&lt;h3 id="q1-ç¨‹åºä¸‹è½½å¤±è´¥"&gt;Q1: ç¨‹åºä¸‹è½½å¤±è´¥&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;è§£å†³æ–¹æ¡ˆ&lt;/strong&gt;:&lt;/p&gt;</description></item></channel></rss>