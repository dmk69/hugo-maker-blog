<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š | åˆ›å®¢æ•™è‚²åšå®¢</title>
<meta name="keywords" content="STM32, åµŒå…¥å¼, ARM Cortex-M, HALåº“, FreeRTOS">
<meta name="description" content="ğŸ”§ STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š
STM32æ˜¯STå…¬å¸æ¨å‡ºçš„åŸºäºARM Cortex-Må†…æ ¸çš„32ä½å¾®æ§åˆ¶å™¨ç³»åˆ—ï¼Œåœ¨å·¥ä¸šæ§åˆ¶ã€æ¶ˆè´¹ç”µå­ã€ç‰©è”ç½‘ç­‰é¢†åŸŸæœ‰ç€å¹¿æ³›åº”ç”¨ã€‚æœ¬æŒ‡å—å°†å¸¦ä½ ä»é›¶åŸºç¡€é€æ­¥æŒæ¡STM32å¼€å‘ã€‚
ğŸ“š å­¦ä¹ è·¯å¾„è§„åˆ’
é˜¶æ®µä¸€ï¼šåŸºç¡€å…¥é—¨ (ç¬¬1-4å‘¨)
1.1 å¼€å‘ç¯å¢ƒæ­å»º
# å¿…éœ€è½¯ä»¶
- STM32CubeIDE (æ¨è) æˆ– Keil MDK
- STM32CubeMX (å›¾å½¢åŒ–é…ç½®å·¥å…·)
- ST-Linké©±åŠ¨å’Œè°ƒè¯•å·¥å…·
- ä¸²å£è°ƒè¯•åŠ©æ‰‹ (XShellã€MobaXtermç­‰)
1.2 ç¡¬ä»¶å‡†å¤‡

  
      
          å¼€å‘æ¿å‹å·
          ä»·æ ¼
          æ¨èåº¦
          ç‰¹ç‚¹
      
  
  
      
          STM32F103C8T6
          ï¿¥15-25
          â­â­â­â­â­
          ç»å…¸å‹å·ï¼Œèµ„æ–™ä¸°å¯Œ
      
      
          STM32F407VGT6
          ï¿¥60-80
          â­â­â­â­
          æ€§èƒ½å¼ºå¤§ï¼Œé€‚åˆé«˜çº§åº”ç”¨
      
      
          STM32L051C8
          ï¿¥20-30
          â­â­â­
          ä½åŠŸè€—ï¼Œé€‚åˆç”µæ± åº”ç”¨
      
  

1.3 ç¬¬ä¸€ä¸ªç¨‹åºï¼šLEDé—ªçƒ
/* main.c */
#include &#34;main.h&#34;

int main(void) {
    HAL_Init();
    SystemClock_Config();

    // åˆå§‹åŒ–GPIO
    __HAL_RCC_GPIOC_CLK_ENABLE();

    GPIO_InitTypeDef GPIO_InitStruct = {0};
    GPIO_InitStruct.Pin = GPIO_PIN_13;
    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
    GPIO_InitStruct.Pull = GPIO_NOPULL;
    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
    HAL_GPIO_Init(GPIOC, &amp;GPIO_InitStruct);

    while (1) {
        HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_SET);
        HAL_Delay(500);
        HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_RESET);
        HAL_Delay(500);
    }
}
é˜¶æ®µäºŒï¼šå¤–è®¾åº”ç”¨ (ç¬¬5-8å‘¨)
2.1 GPIOæ·±å…¥ç†è§£

è¾“å…¥è¾“å‡ºæ¨¡å¼é…ç½®
ä¸­æ–­å’Œäº‹ä»¶å¤„ç†
å¤ç”¨åŠŸèƒ½é…ç½®

2.2 å®šæ—¶å™¨åº”ç”¨
// PWMè¾“å‡ºé…ç½®
void Timer_PWM_Init(void) {
    TIM_HandleTypeDef htim3;
    TIM_OC_InitTypeDef sConfigOC = {0};

    htim3.Instance = TIM3;
    htim3.Init.Prescaler = 71;  // 72MHz/72 = 1MHz
    htim3.Init.CounterMode = TIM_COUNTERMODE_UP;
    htim3.Init.Period = 999;    // 1kHz
    htim3.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1;
    HAL_TIM_PWM_Init(&amp;htim3);

    sConfigOC.OCMode = TIM_OCMODE_PWM1;
    sConfigOC.Pulse = 499;      // 50%å ç©ºæ¯”
    sConfigOC.OCPolarity = TIM_OCPOLARITY_HIGH;
    sConfigOC.OCFastMode = TIM_OCFAST_DISABLE;
    HAL_TIM_PWM_ConfigChannel(&amp;htim3, &amp;sConfigOC, TIM_CHANNEL_1);
}
2.3 ä¸²å£é€šä¿¡
// UARTé…ç½®
void UART_Init(void) {
    UART_HandleTypeDef huart1;

    huart1.Instance = USART1;
    huart1.Init.BaudRate = 115200;
    huart1.Init.WordLength = UART_WORDLENGTH_8B;
    huart1.Init.StopBits = UART_STOPBITS_1;
    huart1.Init.Parity = UART_PARITY_NONE;
    huart1.Init.Mode = UART_MODE_TX_RX;
    huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE;
    HAL_UART_Init(&amp;huart1);
}

// å‘é€æ•°æ®
uint8_t data[] = &#34;Hello STM32!\r\n&#34;;
HAL_UART_Transmit(&amp;huart1, data, sizeof(data), 1000);
é˜¶æ®µä¸‰ï¼šé«˜çº§åº”ç”¨ (ç¬¬9-12å‘¨)
3.1 ADCé‡‡æ ·
// ADCé…ç½®
void ADC_Init(void) {
    ADC_HandleTypeDef hadc1;

    hadc1.Instance = ADC1;
    hadc1.Init.ClockPrescaler = ADC_CLOCK_SYNC_PCLK_DIV4;
    hadc1.Init.Resolution = ADC_RESOLUTION_12B;
    hadc1.Init.ScanConvMode = DISABLE;
    hadc1.Init.ContinuousConvMode = ENABLE;
    hadc1.Init.DiscontinuousConvMode = DISABLE;
    hadc1.Init.ExternalTrigConv = ADC_SOFTWARE_START;
    hadc1.Init.DataAlign = ADC_DATAALIGN_RIGHT;
    hadc1.Init.NbrOfConversion = 1;
    HAL_ADC_Init(&amp;hadc1);
}

// è¯»å–ADCå€¼
uint32_t ADC_Read(void) {
    HAL_ADC_Start(&amp;hadc1);
    HAL_ADC_PollForConversion(&amp;hadc1, 1000);
    return HAL_ADC_GetValue(&amp;hadc1);
}
3.2 I2Cå’ŒSPIé€šä¿¡
// I2Cè¯»å–ä¼ æ„Ÿå™¨æ•°æ®
HAL_StatusTypeDef I2C_Read_Sensor(uint8_t dev_addr, uint8_t reg_addr,
                                 uint8_t *data, uint16_t len) {
    HAL_I2C_Mem_Read(&amp;hi2c1, dev_addr, reg_addr, 1, data, len, 1000);
    return HAL_OK;
}
ğŸ“– å­¦ä¹ èµ„æºæ¨è
å®˜æ–¹æ–‡æ¡£

STM32å‚è€ƒæ‰‹å†Œ
HALåº“ç”¨æˆ·æ‰‹å†Œ

è§†é¢‘æ•™ç¨‹

Bç«™: æ­£ç‚¹åŸå­ã€é‡ç«ã€å®‰ç¦è±
YouTube: STM32å®˜æ–¹é¢‘é“ã€åµŒå…¥å¼ç³»ç»Ÿå¼€å‘è€…

å¼€å‘æ¿æ¨è

æ­£ç‚¹åŸå­F103: èµ„æ–™ä¸°å¯Œï¼Œé€‚åˆåˆå­¦è€…
é‡ç«F407: æ•™ç¨‹ç³»ç»Ÿï¼Œé¡¹ç›®ä¸°å¯Œ
å®‰ç¦è±Lç³»åˆ—: ä¸“æ³¨ä½åŠŸè€—åº”ç”¨

ğŸ› ï¸ å®è·µé¡¹ç›®
é¡¹ç›®1ï¼šæ™ºèƒ½ç¯å¢ƒç›‘æµ‹å™¨
// å¤šä¼ æ„Ÿå™¨æ•°æ®é‡‡é›†
typedef struct {
    float temperature;    // æ¸©åº¦
    float humidity;       // æ¹¿åº¦
    uint16_t light;       // å…‰ç…§
    uint16_t air_quality; // ç©ºæ°”è´¨é‡
} SensorData;

void Read_All_Sensors(SensorData *data) {
    data-&gt;temperature = DHT11_Read_Temperature();
    data-&gt;humidity = DHT11_Read_Humidity();
    data-&gt;light = ADC_Read_Light();
    data-&gt;air_quality = ADC_Read_Air();
}
é¡¹ç›®2ï¼šæ™ºèƒ½å°è½¦æ§åˆ¶ç³»ç»Ÿ
// ç”µæœºæ§åˆ¶
typedef enum {
    CAR_FORWARD,
    CAR_BACKWARD,
    CAR_LEFT,
    CAR_RIGHT,
    CAR_STOP
} CarDirection;

void Car_Control(CarDirection dir, uint8_t speed) {
    switch(dir) {
        case CAR_FORWARD:
            Motor_Control(MOTOR_LEFT, FORWARD, speed);
            Motor_Control(MOTOR_RIGHT, FORWARD, speed);
            break;
        case CAR_BACKWARD:
            Motor_Control(MOTOR_LEFT, BACKWARD, speed);
            Motor_Control(MOTOR_RIGHT, BACKWARD, speed);
            break;
        // ... å…¶ä»–æ–¹å‘æ§åˆ¶
    }
}
ğŸ”§ è°ƒè¯•æŠ€å·§
1. ä¸²å£è°ƒè¯•
// è°ƒè¯•å®å®šä¹‰
#define DEBUG_PRINTF(fmt, args...) \
    do { \
        char debug_buf[128]; \
        sprintf(debug_buf, fmt, ##args); \
        HAL_UART_Transmit(&amp;huart1, (uint8_t*)debug_buf, strlen(debug_buf), 1000); \
    } while(0)

// ä½¿ç”¨ç¤ºä¾‹
DEBUG_PRINTF(&#34;Temperature: %.2fÂ°C\r\n&#34;, temperature);
2. LEDçŠ¶æ€æŒ‡ç¤º
// é”™è¯¯ç æŒ‡ç¤º
void Error_Handler(uint32_t error_code) {
    while(1) {
        for(int i = 0; i &lt; error_code; i&#43;&#43;) {
            HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_SET);
            HAL_Delay(200);
            HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_RESET);
            HAL_Delay(200);
        }
        HAL_Delay(1000);
    }
}
ğŸ“ˆ å­¦ä¹ æ—¶é—´è§„åˆ’

  
      
          å‘¨æ•°
          å­¦ä¹ å†…å®¹
          å®è·µé¡¹ç›®
          é¢„æœŸæˆæœ
      
  
  
      
          1-2
          å¼€å‘ç¯å¢ƒæ­å»ºï¼ŒGPIOæ§åˆ¶
          LEDé—ªçƒå®éªŒ
          æŒæ¡åŸºæœ¬GPIOæ“ä½œ
      
      
          3-4
          å®šæ—¶å™¨ï¼ŒPWMï¼Œä¸­æ–­
          å‘¼å¸ç¯ï¼ŒæŒ‰é”®æ§åˆ¶
          ç†è§£å®šæ—¶å™¨å’Œä¸­æ–­
      
      
          5-6
          ä¸²å£é€šä¿¡ï¼ŒADC
          ä¸²å£è°ƒè¯•åŠ©æ‰‹ï¼Œç”µå‹è¡¨
          æŒæ¡é€šä¿¡å’Œé‡‡æ ·
      
      
          7-8
          I2Cï¼ŒSPIé€šä¿¡
          ä¼ æ„Ÿå™¨æ•°æ®è¯»å–
          ç†Ÿæ‚‰æ€»çº¿é€šä¿¡
      
      
          9-10
          DMAï¼Œé«˜çº§å®šæ—¶å™¨
          éŸ³é¢‘æ’­æ”¾ï¼Œé«˜é€Ÿé‡‡é›†
          äº†è§£é«˜çº§ç‰¹æ€§
      
      
          11-12
          FreeRTOSåŸºç¡€
          å¤šä»»åŠ¡ç³»ç»Ÿ
          æŒæ¡å®æ—¶ç³»ç»Ÿ
      
  

ğŸš€ è¿›é˜¶æ–¹å‘
1. FreeRTOSå®æ—¶ç³»ç»Ÿ
// ä»»åŠ¡åˆ›å»º
osThreadId_t defaultTaskHandle;
const osThreadAttr_t defaultTask_attributes = {
  .name = &#34;defaultTask&#34;,
  .stack_size = 128 * 4,
  .priority = (osPriority_t) osPriorityNormal,
};

defaultTaskHandle = osThreadNew(StartDefaultTask, NULL, &amp;defaultTask_attributes);
2. Bootloaderå¼€å‘

IAP (In-Application Programming)
å›ºä»¶å‡çº§æœºåˆ¶
åŒå¤‡ä»½ç³»ç»Ÿ

3. ä½åŠŸè€—ä¼˜åŒ–

STOPå’ŒSTANDBYæ¨¡å¼
å¤–è®¾æ—¶é’Ÿç®¡ç†
åŠ¨æ€ç”µå‹è°ƒèŠ‚

ğŸ’¡ å¸¸è§é—®é¢˜è§£å†³
Q1: ç¨‹åºä¸‹è½½å¤±è´¥
è§£å†³æ–¹æ¡ˆ:">
<meta name="author" content="dmk69">
<link rel="canonical" href="http://localhost:1313/posts/stm32-learning-guide/">
<meta name="google-site-verification" content="XYZabc">
<meta name="yandex-verification" content="XYZabc">
<meta name="msvalidate.01" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css" integrity="sha256-NDzEgLn/yPBMy&#43;XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="apple-touch-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<link rel="mask-icon" href="http://localhost:1313/%3Clink%20/%20abs%20url%3E">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/stm32-learning-guide/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><meta property="og:url" content="http://localhost:1313/posts/stm32-learning-guide/">
  <meta property="og:site_name" content="åˆ›å®¢æ•™è‚²åšå®¢">
  <meta property="og:title" content="STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š">
  <meta property="og:description" content="ğŸ”§ STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š STM32æ˜¯STå…¬å¸æ¨å‡ºçš„åŸºäºARM Cortex-Må†…æ ¸çš„32ä½å¾®æ§åˆ¶å™¨ç³»åˆ—ï¼Œåœ¨å·¥ä¸šæ§åˆ¶ã€æ¶ˆè´¹ç”µå­ã€ç‰©è”ç½‘ç­‰é¢†åŸŸæœ‰ç€å¹¿æ³›åº”ç”¨ã€‚æœ¬æŒ‡å—å°†å¸¦ä½ ä»é›¶åŸºç¡€é€æ­¥æŒæ¡STM32å¼€å‘ã€‚
ğŸ“š å­¦ä¹ è·¯å¾„è§„åˆ’ é˜¶æ®µä¸€ï¼šåŸºç¡€å…¥é—¨ (ç¬¬1-4å‘¨) 1.1 å¼€å‘ç¯å¢ƒæ­å»º # å¿…éœ€è½¯ä»¶ - STM32CubeIDE (æ¨è) æˆ– Keil MDK - STM32CubeMX (å›¾å½¢åŒ–é…ç½®å·¥å…·) - ST-Linké©±åŠ¨å’Œè°ƒè¯•å·¥å…· - ä¸²å£è°ƒè¯•åŠ©æ‰‹ (XShellã€MobaXtermç­‰) 1.2 ç¡¬ä»¶å‡†å¤‡ å¼€å‘æ¿å‹å· ä»·æ ¼ æ¨èåº¦ ç‰¹ç‚¹ STM32F103C8T6 ï¿¥15-25 â­â­â­â­â­ ç»å…¸å‹å·ï¼Œèµ„æ–™ä¸°å¯Œ STM32F407VGT6 ï¿¥60-80 â­â­â­â­ æ€§èƒ½å¼ºå¤§ï¼Œé€‚åˆé«˜çº§åº”ç”¨ STM32L051C8 ï¿¥20-30 â­â­â­ ä½åŠŸè€—ï¼Œé€‚åˆç”µæ± åº”ç”¨ 1.3 ç¬¬ä¸€ä¸ªç¨‹åºï¼šLEDé—ªçƒ /* main.c */ #include &#34;main.h&#34; int main(void) { HAL_Init(); SystemClock_Config(); // åˆå§‹åŒ–GPIO __HAL_RCC_GPIOC_CLK_ENABLE(); GPIO_InitTypeDef GPIO_InitStruct = {0}; GPIO_InitStruct.Pin = GPIO_PIN_13; GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP; GPIO_InitStruct.Pull = GPIO_NOPULL; GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW; HAL_GPIO_Init(GPIOC, &amp;GPIO_InitStruct); while (1) { HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_SET); HAL_Delay(500); HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_RESET); HAL_Delay(500); } } é˜¶æ®µäºŒï¼šå¤–è®¾åº”ç”¨ (ç¬¬5-8å‘¨) 2.1 GPIOæ·±å…¥ç†è§£ è¾“å…¥è¾“å‡ºæ¨¡å¼é…ç½® ä¸­æ–­å’Œäº‹ä»¶å¤„ç† å¤ç”¨åŠŸèƒ½é…ç½® 2.2 å®šæ—¶å™¨åº”ç”¨ // PWMè¾“å‡ºé…ç½® void Timer_PWM_Init(void) { TIM_HandleTypeDef htim3; TIM_OC_InitTypeDef sConfigOC = {0}; htim3.Instance = TIM3; htim3.Init.Prescaler = 71; // 72MHz/72 = 1MHz htim3.Init.CounterMode = TIM_COUNTERMODE_UP; htim3.Init.Period = 999; // 1kHz htim3.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1; HAL_TIM_PWM_Init(&amp;htim3); sConfigOC.OCMode = TIM_OCMODE_PWM1; sConfigOC.Pulse = 499; // 50%å ç©ºæ¯” sConfigOC.OCPolarity = TIM_OCPOLARITY_HIGH; sConfigOC.OCFastMode = TIM_OCFAST_DISABLE; HAL_TIM_PWM_ConfigChannel(&amp;htim3, &amp;sConfigOC, TIM_CHANNEL_1); } 2.3 ä¸²å£é€šä¿¡ // UARTé…ç½® void UART_Init(void) { UART_HandleTypeDef huart1; huart1.Instance = USART1; huart1.Init.BaudRate = 115200; huart1.Init.WordLength = UART_WORDLENGTH_8B; huart1.Init.StopBits = UART_STOPBITS_1; huart1.Init.Parity = UART_PARITY_NONE; huart1.Init.Mode = UART_MODE_TX_RX; huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE; HAL_UART_Init(&amp;huart1); } // å‘é€æ•°æ® uint8_t data[] = &#34;Hello STM32!\r\n&#34;; HAL_UART_Transmit(&amp;huart1, data, sizeof(data), 1000); é˜¶æ®µä¸‰ï¼šé«˜çº§åº”ç”¨ (ç¬¬9-12å‘¨) 3.1 ADCé‡‡æ · // ADCé…ç½® void ADC_Init(void) { ADC_HandleTypeDef hadc1; hadc1.Instance = ADC1; hadc1.Init.ClockPrescaler = ADC_CLOCK_SYNC_PCLK_DIV4; hadc1.Init.Resolution = ADC_RESOLUTION_12B; hadc1.Init.ScanConvMode = DISABLE; hadc1.Init.ContinuousConvMode = ENABLE; hadc1.Init.DiscontinuousConvMode = DISABLE; hadc1.Init.ExternalTrigConv = ADC_SOFTWARE_START; hadc1.Init.DataAlign = ADC_DATAALIGN_RIGHT; hadc1.Init.NbrOfConversion = 1; HAL_ADC_Init(&amp;hadc1); } // è¯»å–ADCå€¼ uint32_t ADC_Read(void) { HAL_ADC_Start(&amp;hadc1); HAL_ADC_PollForConversion(&amp;hadc1, 1000); return HAL_ADC_GetValue(&amp;hadc1); } 3.2 I2Cå’ŒSPIé€šä¿¡ // I2Cè¯»å–ä¼ æ„Ÿå™¨æ•°æ® HAL_StatusTypeDef I2C_Read_Sensor(uint8_t dev_addr, uint8_t reg_addr, uint8_t *data, uint16_t len) { HAL_I2C_Mem_Read(&amp;hi2c1, dev_addr, reg_addr, 1, data, len, 1000); return HAL_OK; } ğŸ“– å­¦ä¹ èµ„æºæ¨è å®˜æ–¹æ–‡æ¡£ STM32å‚è€ƒæ‰‹å†Œ HALåº“ç”¨æˆ·æ‰‹å†Œ è§†é¢‘æ•™ç¨‹ Bç«™: æ­£ç‚¹åŸå­ã€é‡ç«ã€å®‰ç¦è± YouTube: STM32å®˜æ–¹é¢‘é“ã€åµŒå…¥å¼ç³»ç»Ÿå¼€å‘è€… å¼€å‘æ¿æ¨è æ­£ç‚¹åŸå­F103: èµ„æ–™ä¸°å¯Œï¼Œé€‚åˆåˆå­¦è€… é‡ç«F407: æ•™ç¨‹ç³»ç»Ÿï¼Œé¡¹ç›®ä¸°å¯Œ å®‰ç¦è±Lç³»åˆ—: ä¸“æ³¨ä½åŠŸè€—åº”ç”¨ ğŸ› ï¸ å®è·µé¡¹ç›® é¡¹ç›®1ï¼šæ™ºèƒ½ç¯å¢ƒç›‘æµ‹å™¨ // å¤šä¼ æ„Ÿå™¨æ•°æ®é‡‡é›† typedef struct { float temperature; // æ¸©åº¦ float humidity; // æ¹¿åº¦ uint16_t light; // å…‰ç…§ uint16_t air_quality; // ç©ºæ°”è´¨é‡ } SensorData; void Read_All_Sensors(SensorData *data) { data-&gt;temperature = DHT11_Read_Temperature(); data-&gt;humidity = DHT11_Read_Humidity(); data-&gt;light = ADC_Read_Light(); data-&gt;air_quality = ADC_Read_Air(); } é¡¹ç›®2ï¼šæ™ºèƒ½å°è½¦æ§åˆ¶ç³»ç»Ÿ // ç”µæœºæ§åˆ¶ typedef enum { CAR_FORWARD, CAR_BACKWARD, CAR_LEFT, CAR_RIGHT, CAR_STOP } CarDirection; void Car_Control(CarDirection dir, uint8_t speed) { switch(dir) { case CAR_FORWARD: Motor_Control(MOTOR_LEFT, FORWARD, speed); Motor_Control(MOTOR_RIGHT, FORWARD, speed); break; case CAR_BACKWARD: Motor_Control(MOTOR_LEFT, BACKWARD, speed); Motor_Control(MOTOR_RIGHT, BACKWARD, speed); break; // ... å…¶ä»–æ–¹å‘æ§åˆ¶ } } ğŸ”§ è°ƒè¯•æŠ€å·§ 1. ä¸²å£è°ƒè¯• // è°ƒè¯•å®å®šä¹‰ #define DEBUG_PRINTF(fmt, args...) \ do { \ char debug_buf[128]; \ sprintf(debug_buf, fmt, ##args); \ HAL_UART_Transmit(&amp;huart1, (uint8_t*)debug_buf, strlen(debug_buf), 1000); \ } while(0) // ä½¿ç”¨ç¤ºä¾‹ DEBUG_PRINTF(&#34;Temperature: %.2fÂ°C\r\n&#34;, temperature); 2. LEDçŠ¶æ€æŒ‡ç¤º // é”™è¯¯ç æŒ‡ç¤º void Error_Handler(uint32_t error_code) { while(1) { for(int i = 0; i &lt; error_code; i&#43;&#43;) { HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_SET); HAL_Delay(200); HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_RESET); HAL_Delay(200); } HAL_Delay(1000); } } ğŸ“ˆ å­¦ä¹ æ—¶é—´è§„åˆ’ å‘¨æ•° å­¦ä¹ å†…å®¹ å®è·µé¡¹ç›® é¢„æœŸæˆæœ 1-2 å¼€å‘ç¯å¢ƒæ­å»ºï¼ŒGPIOæ§åˆ¶ LEDé—ªçƒå®éªŒ æŒæ¡åŸºæœ¬GPIOæ“ä½œ 3-4 å®šæ—¶å™¨ï¼ŒPWMï¼Œä¸­æ–­ å‘¼å¸ç¯ï¼ŒæŒ‰é”®æ§åˆ¶ ç†è§£å®šæ—¶å™¨å’Œä¸­æ–­ 5-6 ä¸²å£é€šä¿¡ï¼ŒADC ä¸²å£è°ƒè¯•åŠ©æ‰‹ï¼Œç”µå‹è¡¨ æŒæ¡é€šä¿¡å’Œé‡‡æ · 7-8 I2Cï¼ŒSPIé€šä¿¡ ä¼ æ„Ÿå™¨æ•°æ®è¯»å– ç†Ÿæ‚‰æ€»çº¿é€šä¿¡ 9-10 DMAï¼Œé«˜çº§å®šæ—¶å™¨ éŸ³é¢‘æ’­æ”¾ï¼Œé«˜é€Ÿé‡‡é›† äº†è§£é«˜çº§ç‰¹æ€§ 11-12 FreeRTOSåŸºç¡€ å¤šä»»åŠ¡ç³»ç»Ÿ æŒæ¡å®æ—¶ç³»ç»Ÿ ğŸš€ è¿›é˜¶æ–¹å‘ 1. FreeRTOSå®æ—¶ç³»ç»Ÿ // ä»»åŠ¡åˆ›å»º osThreadId_t defaultTaskHandle; const osThreadAttr_t defaultTask_attributes = { .name = &#34;defaultTask&#34;, .stack_size = 128 * 4, .priority = (osPriority_t) osPriorityNormal, }; defaultTaskHandle = osThreadNew(StartDefaultTask, NULL, &amp;defaultTask_attributes); 2. Bootloaderå¼€å‘ IAP (In-Application Programming) å›ºä»¶å‡çº§æœºåˆ¶ åŒå¤‡ä»½ç³»ç»Ÿ 3. ä½åŠŸè€—ä¼˜åŒ– STOPå’ŒSTANDBYæ¨¡å¼ å¤–è®¾æ—¶é’Ÿç®¡ç† åŠ¨æ€ç”µå‹è°ƒèŠ‚ ğŸ’¡ å¸¸è§é—®é¢˜è§£å†³ Q1: ç¨‹åºä¸‹è½½å¤±è´¥ è§£å†³æ–¹æ¡ˆ:">
  <meta property="og:locale" content="zh-cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-11-08T10:30:00+08:00">
    <meta property="article:modified_time" content="2025-11-08T10:30:00+08:00">
    <meta property="article:tag" content="STM32">
    <meta property="article:tag" content="åµŒå…¥å¼">
    <meta property="article:tag" content="ARM Cortex-M">
    <meta property="article:tag" content="HALåº“">
    <meta property="article:tag" content="FreeRTOS">
    <meta property="og:image" content="https://images.unsplash.com/photo-1537497711-4ba6054142f0?w=800&amp;h=400&amp;fit=crop">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://images.unsplash.com/photo-1537497711-4ba6054142f0?w=800&amp;h=400&amp;fit=crop">
<meta name="twitter:title" content="STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š">
<meta name="twitter:description" content="ğŸ”§ STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š
STM32æ˜¯STå…¬å¸æ¨å‡ºçš„åŸºäºARM Cortex-Må†…æ ¸çš„32ä½å¾®æ§åˆ¶å™¨ç³»åˆ—ï¼Œåœ¨å·¥ä¸šæ§åˆ¶ã€æ¶ˆè´¹ç”µå­ã€ç‰©è”ç½‘ç­‰é¢†åŸŸæœ‰ç€å¹¿æ³›åº”ç”¨ã€‚æœ¬æŒ‡å—å°†å¸¦ä½ ä»é›¶åŸºç¡€é€æ­¥æŒæ¡STM32å¼€å‘ã€‚
ğŸ“š å­¦ä¹ è·¯å¾„è§„åˆ’
é˜¶æ®µä¸€ï¼šåŸºç¡€å…¥é—¨ (ç¬¬1-4å‘¨)
1.1 å¼€å‘ç¯å¢ƒæ­å»º
# å¿…éœ€è½¯ä»¶
- STM32CubeIDE (æ¨è) æˆ– Keil MDK
- STM32CubeMX (å›¾å½¢åŒ–é…ç½®å·¥å…·)
- ST-Linké©±åŠ¨å’Œè°ƒè¯•å·¥å…·
- ä¸²å£è°ƒè¯•åŠ©æ‰‹ (XShellã€MobaXtermç­‰)
1.2 ç¡¬ä»¶å‡†å¤‡

  
      
          å¼€å‘æ¿å‹å·
          ä»·æ ¼
          æ¨èåº¦
          ç‰¹ç‚¹
      
  
  
      
          STM32F103C8T6
          ï¿¥15-25
          â­â­â­â­â­
          ç»å…¸å‹å·ï¼Œèµ„æ–™ä¸°å¯Œ
      
      
          STM32F407VGT6
          ï¿¥60-80
          â­â­â­â­
          æ€§èƒ½å¼ºå¤§ï¼Œé€‚åˆé«˜çº§åº”ç”¨
      
      
          STM32L051C8
          ï¿¥20-30
          â­â­â­
          ä½åŠŸè€—ï¼Œé€‚åˆç”µæ± åº”ç”¨
      
  

1.3 ç¬¬ä¸€ä¸ªç¨‹åºï¼šLEDé—ªçƒ
/* main.c */
#include &#34;main.h&#34;

int main(void) {
    HAL_Init();
    SystemClock_Config();

    // åˆå§‹åŒ–GPIO
    __HAL_RCC_GPIOC_CLK_ENABLE();

    GPIO_InitTypeDef GPIO_InitStruct = {0};
    GPIO_InitStruct.Pin = GPIO_PIN_13;
    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
    GPIO_InitStruct.Pull = GPIO_NOPULL;
    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
    HAL_GPIO_Init(GPIOC, &amp;GPIO_InitStruct);

    while (1) {
        HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_SET);
        HAL_Delay(500);
        HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_RESET);
        HAL_Delay(500);
    }
}
é˜¶æ®µäºŒï¼šå¤–è®¾åº”ç”¨ (ç¬¬5-8å‘¨)
2.1 GPIOæ·±å…¥ç†è§£

è¾“å…¥è¾“å‡ºæ¨¡å¼é…ç½®
ä¸­æ–­å’Œäº‹ä»¶å¤„ç†
å¤ç”¨åŠŸèƒ½é…ç½®

2.2 å®šæ—¶å™¨åº”ç”¨
// PWMè¾“å‡ºé…ç½®
void Timer_PWM_Init(void) {
    TIM_HandleTypeDef htim3;
    TIM_OC_InitTypeDef sConfigOC = {0};

    htim3.Instance = TIM3;
    htim3.Init.Prescaler = 71;  // 72MHz/72 = 1MHz
    htim3.Init.CounterMode = TIM_COUNTERMODE_UP;
    htim3.Init.Period = 999;    // 1kHz
    htim3.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1;
    HAL_TIM_PWM_Init(&amp;htim3);

    sConfigOC.OCMode = TIM_OCMODE_PWM1;
    sConfigOC.Pulse = 499;      // 50%å ç©ºæ¯”
    sConfigOC.OCPolarity = TIM_OCPOLARITY_HIGH;
    sConfigOC.OCFastMode = TIM_OCFAST_DISABLE;
    HAL_TIM_PWM_ConfigChannel(&amp;htim3, &amp;sConfigOC, TIM_CHANNEL_1);
}
2.3 ä¸²å£é€šä¿¡
// UARTé…ç½®
void UART_Init(void) {
    UART_HandleTypeDef huart1;

    huart1.Instance = USART1;
    huart1.Init.BaudRate = 115200;
    huart1.Init.WordLength = UART_WORDLENGTH_8B;
    huart1.Init.StopBits = UART_STOPBITS_1;
    huart1.Init.Parity = UART_PARITY_NONE;
    huart1.Init.Mode = UART_MODE_TX_RX;
    huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE;
    HAL_UART_Init(&amp;huart1);
}

// å‘é€æ•°æ®
uint8_t data[] = &#34;Hello STM32!\r\n&#34;;
HAL_UART_Transmit(&amp;huart1, data, sizeof(data), 1000);
é˜¶æ®µä¸‰ï¼šé«˜çº§åº”ç”¨ (ç¬¬9-12å‘¨)
3.1 ADCé‡‡æ ·
// ADCé…ç½®
void ADC_Init(void) {
    ADC_HandleTypeDef hadc1;

    hadc1.Instance = ADC1;
    hadc1.Init.ClockPrescaler = ADC_CLOCK_SYNC_PCLK_DIV4;
    hadc1.Init.Resolution = ADC_RESOLUTION_12B;
    hadc1.Init.ScanConvMode = DISABLE;
    hadc1.Init.ContinuousConvMode = ENABLE;
    hadc1.Init.DiscontinuousConvMode = DISABLE;
    hadc1.Init.ExternalTrigConv = ADC_SOFTWARE_START;
    hadc1.Init.DataAlign = ADC_DATAALIGN_RIGHT;
    hadc1.Init.NbrOfConversion = 1;
    HAL_ADC_Init(&amp;hadc1);
}

// è¯»å–ADCå€¼
uint32_t ADC_Read(void) {
    HAL_ADC_Start(&amp;hadc1);
    HAL_ADC_PollForConversion(&amp;hadc1, 1000);
    return HAL_ADC_GetValue(&amp;hadc1);
}
3.2 I2Cå’ŒSPIé€šä¿¡
// I2Cè¯»å–ä¼ æ„Ÿå™¨æ•°æ®
HAL_StatusTypeDef I2C_Read_Sensor(uint8_t dev_addr, uint8_t reg_addr,
                                 uint8_t *data, uint16_t len) {
    HAL_I2C_Mem_Read(&amp;hi2c1, dev_addr, reg_addr, 1, data, len, 1000);
    return HAL_OK;
}
ğŸ“– å­¦ä¹ èµ„æºæ¨è
å®˜æ–¹æ–‡æ¡£

STM32å‚è€ƒæ‰‹å†Œ
HALåº“ç”¨æˆ·æ‰‹å†Œ

è§†é¢‘æ•™ç¨‹

Bç«™: æ­£ç‚¹åŸå­ã€é‡ç«ã€å®‰ç¦è±
YouTube: STM32å®˜æ–¹é¢‘é“ã€åµŒå…¥å¼ç³»ç»Ÿå¼€å‘è€…

å¼€å‘æ¿æ¨è

æ­£ç‚¹åŸå­F103: èµ„æ–™ä¸°å¯Œï¼Œé€‚åˆåˆå­¦è€…
é‡ç«F407: æ•™ç¨‹ç³»ç»Ÿï¼Œé¡¹ç›®ä¸°å¯Œ
å®‰ç¦è±Lç³»åˆ—: ä¸“æ³¨ä½åŠŸè€—åº”ç”¨

ğŸ› ï¸ å®è·µé¡¹ç›®
é¡¹ç›®1ï¼šæ™ºèƒ½ç¯å¢ƒç›‘æµ‹å™¨
// å¤šä¼ æ„Ÿå™¨æ•°æ®é‡‡é›†
typedef struct {
    float temperature;    // æ¸©åº¦
    float humidity;       // æ¹¿åº¦
    uint16_t light;       // å…‰ç…§
    uint16_t air_quality; // ç©ºæ°”è´¨é‡
} SensorData;

void Read_All_Sensors(SensorData *data) {
    data-&gt;temperature = DHT11_Read_Temperature();
    data-&gt;humidity = DHT11_Read_Humidity();
    data-&gt;light = ADC_Read_Light();
    data-&gt;air_quality = ADC_Read_Air();
}
é¡¹ç›®2ï¼šæ™ºèƒ½å°è½¦æ§åˆ¶ç³»ç»Ÿ
// ç”µæœºæ§åˆ¶
typedef enum {
    CAR_FORWARD,
    CAR_BACKWARD,
    CAR_LEFT,
    CAR_RIGHT,
    CAR_STOP
} CarDirection;

void Car_Control(CarDirection dir, uint8_t speed) {
    switch(dir) {
        case CAR_FORWARD:
            Motor_Control(MOTOR_LEFT, FORWARD, speed);
            Motor_Control(MOTOR_RIGHT, FORWARD, speed);
            break;
        case CAR_BACKWARD:
            Motor_Control(MOTOR_LEFT, BACKWARD, speed);
            Motor_Control(MOTOR_RIGHT, BACKWARD, speed);
            break;
        // ... å…¶ä»–æ–¹å‘æ§åˆ¶
    }
}
ğŸ”§ è°ƒè¯•æŠ€å·§
1. ä¸²å£è°ƒè¯•
// è°ƒè¯•å®å®šä¹‰
#define DEBUG_PRINTF(fmt, args...) \
    do { \
        char debug_buf[128]; \
        sprintf(debug_buf, fmt, ##args); \
        HAL_UART_Transmit(&amp;huart1, (uint8_t*)debug_buf, strlen(debug_buf), 1000); \
    } while(0)

// ä½¿ç”¨ç¤ºä¾‹
DEBUG_PRINTF(&#34;Temperature: %.2fÂ°C\r\n&#34;, temperature);
2. LEDçŠ¶æ€æŒ‡ç¤º
// é”™è¯¯ç æŒ‡ç¤º
void Error_Handler(uint32_t error_code) {
    while(1) {
        for(int i = 0; i &lt; error_code; i&#43;&#43;) {
            HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_SET);
            HAL_Delay(200);
            HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_RESET);
            HAL_Delay(200);
        }
        HAL_Delay(1000);
    }
}
ğŸ“ˆ å­¦ä¹ æ—¶é—´è§„åˆ’

  
      
          å‘¨æ•°
          å­¦ä¹ å†…å®¹
          å®è·µé¡¹ç›®
          é¢„æœŸæˆæœ
      
  
  
      
          1-2
          å¼€å‘ç¯å¢ƒæ­å»ºï¼ŒGPIOæ§åˆ¶
          LEDé—ªçƒå®éªŒ
          æŒæ¡åŸºæœ¬GPIOæ“ä½œ
      
      
          3-4
          å®šæ—¶å™¨ï¼ŒPWMï¼Œä¸­æ–­
          å‘¼å¸ç¯ï¼ŒæŒ‰é”®æ§åˆ¶
          ç†è§£å®šæ—¶å™¨å’Œä¸­æ–­
      
      
          5-6
          ä¸²å£é€šä¿¡ï¼ŒADC
          ä¸²å£è°ƒè¯•åŠ©æ‰‹ï¼Œç”µå‹è¡¨
          æŒæ¡é€šä¿¡å’Œé‡‡æ ·
      
      
          7-8
          I2Cï¼ŒSPIé€šä¿¡
          ä¼ æ„Ÿå™¨æ•°æ®è¯»å–
          ç†Ÿæ‚‰æ€»çº¿é€šä¿¡
      
      
          9-10
          DMAï¼Œé«˜çº§å®šæ—¶å™¨
          éŸ³é¢‘æ’­æ”¾ï¼Œé«˜é€Ÿé‡‡é›†
          äº†è§£é«˜çº§ç‰¹æ€§
      
      
          11-12
          FreeRTOSåŸºç¡€
          å¤šä»»åŠ¡ç³»ç»Ÿ
          æŒæ¡å®æ—¶ç³»ç»Ÿ
      
  

ğŸš€ è¿›é˜¶æ–¹å‘
1. FreeRTOSå®æ—¶ç³»ç»Ÿ
// ä»»åŠ¡åˆ›å»º
osThreadId_t defaultTaskHandle;
const osThreadAttr_t defaultTask_attributes = {
  .name = &#34;defaultTask&#34;,
  .stack_size = 128 * 4,
  .priority = (osPriority_t) osPriorityNormal,
};

defaultTaskHandle = osThreadNew(StartDefaultTask, NULL, &amp;defaultTask_attributes);
2. Bootloaderå¼€å‘

IAP (In-Application Programming)
å›ºä»¶å‡çº§æœºåˆ¶
åŒå¤‡ä»½ç³»ç»Ÿ

3. ä½åŠŸè€—ä¼˜åŒ–

STOPå’ŒSTANDBYæ¨¡å¼
å¤–è®¾æ—¶é’Ÿç®¡ç†
åŠ¨æ€ç”µå‹è°ƒèŠ‚

ğŸ’¡ å¸¸è§é—®é¢˜è§£å†³
Q1: ç¨‹åºä¸‹è½½å¤±è´¥
è§£å†³æ–¹æ¡ˆ:">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š",
      "item": "http://localhost:1313/posts/stm32-learning-guide/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š",
  "name": "STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š",
  "description": "ğŸ”§ STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š STM32æ˜¯STå…¬å¸æ¨å‡ºçš„åŸºäºARM Cortex-Må†…æ ¸çš„32ä½å¾®æ§åˆ¶å™¨ç³»åˆ—ï¼Œåœ¨å·¥ä¸šæ§åˆ¶ã€æ¶ˆè´¹ç”µå­ã€ç‰©è”ç½‘ç­‰é¢†åŸŸæœ‰ç€å¹¿æ³›åº”ç”¨ã€‚æœ¬æŒ‡å—å°†å¸¦ä½ ä»é›¶åŸºç¡€é€æ­¥æŒæ¡STM32å¼€å‘ã€‚\nğŸ“š å­¦ä¹ è·¯å¾„è§„åˆ’ é˜¶æ®µä¸€ï¼šåŸºç¡€å…¥é—¨ (ç¬¬1-4å‘¨) 1.1 å¼€å‘ç¯å¢ƒæ­å»º # å¿…éœ€è½¯ä»¶ - STM32CubeIDE (æ¨è) æˆ– Keil MDK - STM32CubeMX (å›¾å½¢åŒ–é…ç½®å·¥å…·) - ST-Linké©±åŠ¨å’Œè°ƒè¯•å·¥å…· - ä¸²å£è°ƒè¯•åŠ©æ‰‹ (XShellã€MobaXtermç­‰) 1.2 ç¡¬ä»¶å‡†å¤‡ å¼€å‘æ¿å‹å· ä»·æ ¼ æ¨èåº¦ ç‰¹ç‚¹ STM32F103C8T6 ï¿¥15-25 â­â­â­â­â­ ç»å…¸å‹å·ï¼Œèµ„æ–™ä¸°å¯Œ STM32F407VGT6 ï¿¥60-80 â­â­â­â­ æ€§èƒ½å¼ºå¤§ï¼Œé€‚åˆé«˜çº§åº”ç”¨ STM32L051C8 ï¿¥20-30 â­â­â­ ä½åŠŸè€—ï¼Œé€‚åˆç”µæ± åº”ç”¨ 1.3 ç¬¬ä¸€ä¸ªç¨‹åºï¼šLEDé—ªçƒ /* main.c */ #include \u0026#34;main.h\u0026#34; int main(void) { HAL_Init(); SystemClock_Config(); // åˆå§‹åŒ–GPIO __HAL_RCC_GPIOC_CLK_ENABLE(); GPIO_InitTypeDef GPIO_InitStruct = {0}; GPIO_InitStruct.Pin = GPIO_PIN_13; GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP; GPIO_InitStruct.Pull = GPIO_NOPULL; GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW; HAL_GPIO_Init(GPIOC, \u0026amp;GPIO_InitStruct); while (1) { HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_SET); HAL_Delay(500); HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_RESET); HAL_Delay(500); } } é˜¶æ®µäºŒï¼šå¤–è®¾åº”ç”¨ (ç¬¬5-8å‘¨) 2.1 GPIOæ·±å…¥ç†è§£ è¾“å…¥è¾“å‡ºæ¨¡å¼é…ç½® ä¸­æ–­å’Œäº‹ä»¶å¤„ç† å¤ç”¨åŠŸèƒ½é…ç½® 2.2 å®šæ—¶å™¨åº”ç”¨ // PWMè¾“å‡ºé…ç½® void Timer_PWM_Init(void) { TIM_HandleTypeDef htim3; TIM_OC_InitTypeDef sConfigOC = {0}; htim3.Instance = TIM3; htim3.Init.Prescaler = 71; // 72MHz/72 = 1MHz htim3.Init.CounterMode = TIM_COUNTERMODE_UP; htim3.Init.Period = 999; // 1kHz htim3.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1; HAL_TIM_PWM_Init(\u0026amp;htim3); sConfigOC.OCMode = TIM_OCMODE_PWM1; sConfigOC.Pulse = 499; // 50%å ç©ºæ¯” sConfigOC.OCPolarity = TIM_OCPOLARITY_HIGH; sConfigOC.OCFastMode = TIM_OCFAST_DISABLE; HAL_TIM_PWM_ConfigChannel(\u0026amp;htim3, \u0026amp;sConfigOC, TIM_CHANNEL_1); } 2.3 ä¸²å£é€šä¿¡ // UARTé…ç½® void UART_Init(void) { UART_HandleTypeDef huart1; huart1.Instance = USART1; huart1.Init.BaudRate = 115200; huart1.Init.WordLength = UART_WORDLENGTH_8B; huart1.Init.StopBits = UART_STOPBITS_1; huart1.Init.Parity = UART_PARITY_NONE; huart1.Init.Mode = UART_MODE_TX_RX; huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE; HAL_UART_Init(\u0026amp;huart1); } // å‘é€æ•°æ® uint8_t data[] = \u0026#34;Hello STM32!\\r\\n\u0026#34;; HAL_UART_Transmit(\u0026amp;huart1, data, sizeof(data), 1000); é˜¶æ®µä¸‰ï¼šé«˜çº§åº”ç”¨ (ç¬¬9-12å‘¨) 3.1 ADCé‡‡æ · // ADCé…ç½® void ADC_Init(void) { ADC_HandleTypeDef hadc1; hadc1.Instance = ADC1; hadc1.Init.ClockPrescaler = ADC_CLOCK_SYNC_PCLK_DIV4; hadc1.Init.Resolution = ADC_RESOLUTION_12B; hadc1.Init.ScanConvMode = DISABLE; hadc1.Init.ContinuousConvMode = ENABLE; hadc1.Init.DiscontinuousConvMode = DISABLE; hadc1.Init.ExternalTrigConv = ADC_SOFTWARE_START; hadc1.Init.DataAlign = ADC_DATAALIGN_RIGHT; hadc1.Init.NbrOfConversion = 1; HAL_ADC_Init(\u0026amp;hadc1); } // è¯»å–ADCå€¼ uint32_t ADC_Read(void) { HAL_ADC_Start(\u0026amp;hadc1); HAL_ADC_PollForConversion(\u0026amp;hadc1, 1000); return HAL_ADC_GetValue(\u0026amp;hadc1); } 3.2 I2Cå’ŒSPIé€šä¿¡ // I2Cè¯»å–ä¼ æ„Ÿå™¨æ•°æ® HAL_StatusTypeDef I2C_Read_Sensor(uint8_t dev_addr, uint8_t reg_addr, uint8_t *data, uint16_t len) { HAL_I2C_Mem_Read(\u0026amp;hi2c1, dev_addr, reg_addr, 1, data, len, 1000); return HAL_OK; } ğŸ“– å­¦ä¹ èµ„æºæ¨è å®˜æ–¹æ–‡æ¡£ STM32å‚è€ƒæ‰‹å†Œ HALåº“ç”¨æˆ·æ‰‹å†Œ è§†é¢‘æ•™ç¨‹ Bç«™: æ­£ç‚¹åŸå­ã€é‡ç«ã€å®‰ç¦è± YouTube: STM32å®˜æ–¹é¢‘é“ã€åµŒå…¥å¼ç³»ç»Ÿå¼€å‘è€… å¼€å‘æ¿æ¨è æ­£ç‚¹åŸå­F103: èµ„æ–™ä¸°å¯Œï¼Œé€‚åˆåˆå­¦è€… é‡ç«F407: æ•™ç¨‹ç³»ç»Ÿï¼Œé¡¹ç›®ä¸°å¯Œ å®‰ç¦è±Lç³»åˆ—: ä¸“æ³¨ä½åŠŸè€—åº”ç”¨ ğŸ› ï¸ å®è·µé¡¹ç›® é¡¹ç›®1ï¼šæ™ºèƒ½ç¯å¢ƒç›‘æµ‹å™¨ // å¤šä¼ æ„Ÿå™¨æ•°æ®é‡‡é›† typedef struct { float temperature; // æ¸©åº¦ float humidity; // æ¹¿åº¦ uint16_t light; // å…‰ç…§ uint16_t air_quality; // ç©ºæ°”è´¨é‡ } SensorData; void Read_All_Sensors(SensorData *data) { data-\u0026gt;temperature = DHT11_Read_Temperature(); data-\u0026gt;humidity = DHT11_Read_Humidity(); data-\u0026gt;light = ADC_Read_Light(); data-\u0026gt;air_quality = ADC_Read_Air(); } é¡¹ç›®2ï¼šæ™ºèƒ½å°è½¦æ§åˆ¶ç³»ç»Ÿ // ç”µæœºæ§åˆ¶ typedef enum { CAR_FORWARD, CAR_BACKWARD, CAR_LEFT, CAR_RIGHT, CAR_STOP } CarDirection; void Car_Control(CarDirection dir, uint8_t speed) { switch(dir) { case CAR_FORWARD: Motor_Control(MOTOR_LEFT, FORWARD, speed); Motor_Control(MOTOR_RIGHT, FORWARD, speed); break; case CAR_BACKWARD: Motor_Control(MOTOR_LEFT, BACKWARD, speed); Motor_Control(MOTOR_RIGHT, BACKWARD, speed); break; // ... å…¶ä»–æ–¹å‘æ§åˆ¶ } } ğŸ”§ è°ƒè¯•æŠ€å·§ 1. ä¸²å£è°ƒè¯• // è°ƒè¯•å®å®šä¹‰ #define DEBUG_PRINTF(fmt, args...) \\ do { \\ char debug_buf[128]; \\ sprintf(debug_buf, fmt, ##args); \\ HAL_UART_Transmit(\u0026amp;huart1, (uint8_t*)debug_buf, strlen(debug_buf), 1000); \\ } while(0) // ä½¿ç”¨ç¤ºä¾‹ DEBUG_PRINTF(\u0026#34;Temperature: %.2fÂ°C\\r\\n\u0026#34;, temperature); 2. LEDçŠ¶æ€æŒ‡ç¤º // é”™è¯¯ç æŒ‡ç¤º void Error_Handler(uint32_t error_code) { while(1) { for(int i = 0; i \u0026lt; error_code; i++) { HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_SET); HAL_Delay(200); HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_RESET); HAL_Delay(200); } HAL_Delay(1000); } } ğŸ“ˆ å­¦ä¹ æ—¶é—´è§„åˆ’ å‘¨æ•° å­¦ä¹ å†…å®¹ å®è·µé¡¹ç›® é¢„æœŸæˆæœ 1-2 å¼€å‘ç¯å¢ƒæ­å»ºï¼ŒGPIOæ§åˆ¶ LEDé—ªçƒå®éªŒ æŒæ¡åŸºæœ¬GPIOæ“ä½œ 3-4 å®šæ—¶å™¨ï¼ŒPWMï¼Œä¸­æ–­ å‘¼å¸ç¯ï¼ŒæŒ‰é”®æ§åˆ¶ ç†è§£å®šæ—¶å™¨å’Œä¸­æ–­ 5-6 ä¸²å£é€šä¿¡ï¼ŒADC ä¸²å£è°ƒè¯•åŠ©æ‰‹ï¼Œç”µå‹è¡¨ æŒæ¡é€šä¿¡å’Œé‡‡æ · 7-8 I2Cï¼ŒSPIé€šä¿¡ ä¼ æ„Ÿå™¨æ•°æ®è¯»å– ç†Ÿæ‚‰æ€»çº¿é€šä¿¡ 9-10 DMAï¼Œé«˜çº§å®šæ—¶å™¨ éŸ³é¢‘æ’­æ”¾ï¼Œé«˜é€Ÿé‡‡é›† äº†è§£é«˜çº§ç‰¹æ€§ 11-12 FreeRTOSåŸºç¡€ å¤šä»»åŠ¡ç³»ç»Ÿ æŒæ¡å®æ—¶ç³»ç»Ÿ ğŸš€ è¿›é˜¶æ–¹å‘ 1. FreeRTOSå®æ—¶ç³»ç»Ÿ // ä»»åŠ¡åˆ›å»º osThreadId_t defaultTaskHandle; const osThreadAttr_t defaultTask_attributes = { .name = \u0026#34;defaultTask\u0026#34;, .stack_size = 128 * 4, .priority = (osPriority_t) osPriorityNormal, }; defaultTaskHandle = osThreadNew(StartDefaultTask, NULL, \u0026amp;defaultTask_attributes); 2. Bootloaderå¼€å‘ IAP (In-Application Programming) å›ºä»¶å‡çº§æœºåˆ¶ åŒå¤‡ä»½ç³»ç»Ÿ 3. ä½åŠŸè€—ä¼˜åŒ– STOPå’ŒSTANDBYæ¨¡å¼ å¤–è®¾æ—¶é’Ÿç®¡ç† åŠ¨æ€ç”µå‹è°ƒèŠ‚ ğŸ’¡ å¸¸è§é—®é¢˜è§£å†³ Q1: ç¨‹åºä¸‹è½½å¤±è´¥ è§£å†³æ–¹æ¡ˆ:\n",
  "keywords": [
    "STM32", "åµŒå…¥å¼", "ARM Cortex-M", "HALåº“", "FreeRTOS"
  ],
  "articleBody": "ğŸ”§ STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š STM32æ˜¯STå…¬å¸æ¨å‡ºçš„åŸºäºARM Cortex-Må†…æ ¸çš„32ä½å¾®æ§åˆ¶å™¨ç³»åˆ—ï¼Œåœ¨å·¥ä¸šæ§åˆ¶ã€æ¶ˆè´¹ç”µå­ã€ç‰©è”ç½‘ç­‰é¢†åŸŸæœ‰ç€å¹¿æ³›åº”ç”¨ã€‚æœ¬æŒ‡å—å°†å¸¦ä½ ä»é›¶åŸºç¡€é€æ­¥æŒæ¡STM32å¼€å‘ã€‚\nğŸ“š å­¦ä¹ è·¯å¾„è§„åˆ’ é˜¶æ®µä¸€ï¼šåŸºç¡€å…¥é—¨ (ç¬¬1-4å‘¨) 1.1 å¼€å‘ç¯å¢ƒæ­å»º # å¿…éœ€è½¯ä»¶ - STM32CubeIDE (æ¨è) æˆ– Keil MDK - STM32CubeMX (å›¾å½¢åŒ–é…ç½®å·¥å…·) - ST-Linké©±åŠ¨å’Œè°ƒè¯•å·¥å…· - ä¸²å£è°ƒè¯•åŠ©æ‰‹ (XShellã€MobaXtermç­‰) 1.2 ç¡¬ä»¶å‡†å¤‡ å¼€å‘æ¿å‹å· ä»·æ ¼ æ¨èåº¦ ç‰¹ç‚¹ STM32F103C8T6 ï¿¥15-25 â­â­â­â­â­ ç»å…¸å‹å·ï¼Œèµ„æ–™ä¸°å¯Œ STM32F407VGT6 ï¿¥60-80 â­â­â­â­ æ€§èƒ½å¼ºå¤§ï¼Œé€‚åˆé«˜çº§åº”ç”¨ STM32L051C8 ï¿¥20-30 â­â­â­ ä½åŠŸè€—ï¼Œé€‚åˆç”µæ± åº”ç”¨ 1.3 ç¬¬ä¸€ä¸ªç¨‹åºï¼šLEDé—ªçƒ /* main.c */ #include \"main.h\" int main(void) { HAL_Init(); SystemClock_Config(); // åˆå§‹åŒ–GPIO __HAL_RCC_GPIOC_CLK_ENABLE(); GPIO_InitTypeDef GPIO_InitStruct = {0}; GPIO_InitStruct.Pin = GPIO_PIN_13; GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP; GPIO_InitStruct.Pull = GPIO_NOPULL; GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW; HAL_GPIO_Init(GPIOC, \u0026GPIO_InitStruct); while (1) { HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_SET); HAL_Delay(500); HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_RESET); HAL_Delay(500); } } é˜¶æ®µäºŒï¼šå¤–è®¾åº”ç”¨ (ç¬¬5-8å‘¨) 2.1 GPIOæ·±å…¥ç†è§£ è¾“å…¥è¾“å‡ºæ¨¡å¼é…ç½® ä¸­æ–­å’Œäº‹ä»¶å¤„ç† å¤ç”¨åŠŸèƒ½é…ç½® 2.2 å®šæ—¶å™¨åº”ç”¨ // PWMè¾“å‡ºé…ç½® void Timer_PWM_Init(void) { TIM_HandleTypeDef htim3; TIM_OC_InitTypeDef sConfigOC = {0}; htim3.Instance = TIM3; htim3.Init.Prescaler = 71; // 72MHz/72 = 1MHz htim3.Init.CounterMode = TIM_COUNTERMODE_UP; htim3.Init.Period = 999; // 1kHz htim3.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1; HAL_TIM_PWM_Init(\u0026htim3); sConfigOC.OCMode = TIM_OCMODE_PWM1; sConfigOC.Pulse = 499; // 50%å ç©ºæ¯” sConfigOC.OCPolarity = TIM_OCPOLARITY_HIGH; sConfigOC.OCFastMode = TIM_OCFAST_DISABLE; HAL_TIM_PWM_ConfigChannel(\u0026htim3, \u0026sConfigOC, TIM_CHANNEL_1); } 2.3 ä¸²å£é€šä¿¡ // UARTé…ç½® void UART_Init(void) { UART_HandleTypeDef huart1; huart1.Instance = USART1; huart1.Init.BaudRate = 115200; huart1.Init.WordLength = UART_WORDLENGTH_8B; huart1.Init.StopBits = UART_STOPBITS_1; huart1.Init.Parity = UART_PARITY_NONE; huart1.Init.Mode = UART_MODE_TX_RX; huart1.Init.HwFlowCtl = UART_HWCONTROL_NONE; HAL_UART_Init(\u0026huart1); } // å‘é€æ•°æ® uint8_t data[] = \"Hello STM32!\\r\\n\"; HAL_UART_Transmit(\u0026huart1, data, sizeof(data), 1000); é˜¶æ®µä¸‰ï¼šé«˜çº§åº”ç”¨ (ç¬¬9-12å‘¨) 3.1 ADCé‡‡æ · // ADCé…ç½® void ADC_Init(void) { ADC_HandleTypeDef hadc1; hadc1.Instance = ADC1; hadc1.Init.ClockPrescaler = ADC_CLOCK_SYNC_PCLK_DIV4; hadc1.Init.Resolution = ADC_RESOLUTION_12B; hadc1.Init.ScanConvMode = DISABLE; hadc1.Init.ContinuousConvMode = ENABLE; hadc1.Init.DiscontinuousConvMode = DISABLE; hadc1.Init.ExternalTrigConv = ADC_SOFTWARE_START; hadc1.Init.DataAlign = ADC_DATAALIGN_RIGHT; hadc1.Init.NbrOfConversion = 1; HAL_ADC_Init(\u0026hadc1); } // è¯»å–ADCå€¼ uint32_t ADC_Read(void) { HAL_ADC_Start(\u0026hadc1); HAL_ADC_PollForConversion(\u0026hadc1, 1000); return HAL_ADC_GetValue(\u0026hadc1); } 3.2 I2Cå’ŒSPIé€šä¿¡ // I2Cè¯»å–ä¼ æ„Ÿå™¨æ•°æ® HAL_StatusTypeDef I2C_Read_Sensor(uint8_t dev_addr, uint8_t reg_addr, uint8_t *data, uint16_t len) { HAL_I2C_Mem_Read(\u0026hi2c1, dev_addr, reg_addr, 1, data, len, 1000); return HAL_OK; } ğŸ“– å­¦ä¹ èµ„æºæ¨è å®˜æ–¹æ–‡æ¡£ STM32å‚è€ƒæ‰‹å†Œ HALåº“ç”¨æˆ·æ‰‹å†Œ è§†é¢‘æ•™ç¨‹ Bç«™: æ­£ç‚¹åŸå­ã€é‡ç«ã€å®‰ç¦è± YouTube: STM32å®˜æ–¹é¢‘é“ã€åµŒå…¥å¼ç³»ç»Ÿå¼€å‘è€… å¼€å‘æ¿æ¨è æ­£ç‚¹åŸå­F103: èµ„æ–™ä¸°å¯Œï¼Œé€‚åˆåˆå­¦è€… é‡ç«F407: æ•™ç¨‹ç³»ç»Ÿï¼Œé¡¹ç›®ä¸°å¯Œ å®‰ç¦è±Lç³»åˆ—: ä¸“æ³¨ä½åŠŸè€—åº”ç”¨ ğŸ› ï¸ å®è·µé¡¹ç›® é¡¹ç›®1ï¼šæ™ºèƒ½ç¯å¢ƒç›‘æµ‹å™¨ // å¤šä¼ æ„Ÿå™¨æ•°æ®é‡‡é›† typedef struct { float temperature; // æ¸©åº¦ float humidity; // æ¹¿åº¦ uint16_t light; // å…‰ç…§ uint16_t air_quality; // ç©ºæ°”è´¨é‡ } SensorData; void Read_All_Sensors(SensorData *data) { data-\u003etemperature = DHT11_Read_Temperature(); data-\u003ehumidity = DHT11_Read_Humidity(); data-\u003elight = ADC_Read_Light(); data-\u003eair_quality = ADC_Read_Air(); } é¡¹ç›®2ï¼šæ™ºèƒ½å°è½¦æ§åˆ¶ç³»ç»Ÿ // ç”µæœºæ§åˆ¶ typedef enum { CAR_FORWARD, CAR_BACKWARD, CAR_LEFT, CAR_RIGHT, CAR_STOP } CarDirection; void Car_Control(CarDirection dir, uint8_t speed) { switch(dir) { case CAR_FORWARD: Motor_Control(MOTOR_LEFT, FORWARD, speed); Motor_Control(MOTOR_RIGHT, FORWARD, speed); break; case CAR_BACKWARD: Motor_Control(MOTOR_LEFT, BACKWARD, speed); Motor_Control(MOTOR_RIGHT, BACKWARD, speed); break; // ... å…¶ä»–æ–¹å‘æ§åˆ¶ } } ğŸ”§ è°ƒè¯•æŠ€å·§ 1. ä¸²å£è°ƒè¯• // è°ƒè¯•å®å®šä¹‰ #define DEBUG_PRINTF(fmt, args...) \\ do { \\ char debug_buf[128]; \\ sprintf(debug_buf, fmt, ##args); \\ HAL_UART_Transmit(\u0026huart1, (uint8_t*)debug_buf, strlen(debug_buf), 1000); \\ } while(0) // ä½¿ç”¨ç¤ºä¾‹ DEBUG_PRINTF(\"Temperature: %.2fÂ°C\\r\\n\", temperature); 2. LEDçŠ¶æ€æŒ‡ç¤º // é”™è¯¯ç æŒ‡ç¤º void Error_Handler(uint32_t error_code) { while(1) { for(int i = 0; i \u003c error_code; i++) { HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_SET); HAL_Delay(200); HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_RESET); HAL_Delay(200); } HAL_Delay(1000); } } ğŸ“ˆ å­¦ä¹ æ—¶é—´è§„åˆ’ å‘¨æ•° å­¦ä¹ å†…å®¹ å®è·µé¡¹ç›® é¢„æœŸæˆæœ 1-2 å¼€å‘ç¯å¢ƒæ­å»ºï¼ŒGPIOæ§åˆ¶ LEDé—ªçƒå®éªŒ æŒæ¡åŸºæœ¬GPIOæ“ä½œ 3-4 å®šæ—¶å™¨ï¼ŒPWMï¼Œä¸­æ–­ å‘¼å¸ç¯ï¼ŒæŒ‰é”®æ§åˆ¶ ç†è§£å®šæ—¶å™¨å’Œä¸­æ–­ 5-6 ä¸²å£é€šä¿¡ï¼ŒADC ä¸²å£è°ƒè¯•åŠ©æ‰‹ï¼Œç”µå‹è¡¨ æŒæ¡é€šä¿¡å’Œé‡‡æ · 7-8 I2Cï¼ŒSPIé€šä¿¡ ä¼ æ„Ÿå™¨æ•°æ®è¯»å– ç†Ÿæ‚‰æ€»çº¿é€šä¿¡ 9-10 DMAï¼Œé«˜çº§å®šæ—¶å™¨ éŸ³é¢‘æ’­æ”¾ï¼Œé«˜é€Ÿé‡‡é›† äº†è§£é«˜çº§ç‰¹æ€§ 11-12 FreeRTOSåŸºç¡€ å¤šä»»åŠ¡ç³»ç»Ÿ æŒæ¡å®æ—¶ç³»ç»Ÿ ğŸš€ è¿›é˜¶æ–¹å‘ 1. FreeRTOSå®æ—¶ç³»ç»Ÿ // ä»»åŠ¡åˆ›å»º osThreadId_t defaultTaskHandle; const osThreadAttr_t defaultTask_attributes = { .name = \"defaultTask\", .stack_size = 128 * 4, .priority = (osPriority_t) osPriorityNormal, }; defaultTaskHandle = osThreadNew(StartDefaultTask, NULL, \u0026defaultTask_attributes); 2. Bootloaderå¼€å‘ IAP (In-Application Programming) å›ºä»¶å‡çº§æœºåˆ¶ åŒå¤‡ä»½ç³»ç»Ÿ 3. ä½åŠŸè€—ä¼˜åŒ– STOPå’ŒSTANDBYæ¨¡å¼ å¤–è®¾æ—¶é’Ÿç®¡ç† åŠ¨æ€ç”µå‹è°ƒèŠ‚ ğŸ’¡ å¸¸è§é—®é¢˜è§£å†³ Q1: ç¨‹åºä¸‹è½½å¤±è´¥ è§£å†³æ–¹æ¡ˆ:\næ£€æŸ¥ST-Linkè¿æ¥ ç¡®è®¤BOOTå¼•è„šé…ç½® å°è¯•ä¸åŒçš„ä¸‹è½½é€Ÿåº¦ Q2: ç¨‹åºè¿è¡Œå¼‚å¸¸ è°ƒè¯•æ­¥éª¤:\næ£€æŸ¥æ—¶é’Ÿé…ç½® ç¡®è®¤å †æ ˆå¤§å° ä½¿ç”¨ä¸²å£è¾“å‡ºè°ƒè¯•ä¿¡æ¯ Q3: å¤–è®¾ä¸å·¥ä½œ æ£€æŸ¥æ¸…å•:\næ—¶é’Ÿæ˜¯å¦ä½¿èƒ½ GPIOé…ç½®æ˜¯å¦æ­£ç¡® ä¸­æ–­æ˜¯å¦é…ç½® ğŸ“ å­¦ä¹ ç¬”è®°æ¨¡æ¿ ## STM32å­¦ä¹ ç¬”è®° - ç¬¬Xå‘¨ ### æœ¬å‘¨å­¦ä¹ å†…å®¹ - [ ] ç†è®ºçŸ¥è¯† - [ ] ä»£ç å®è·µ - [ ] é—®é¢˜è®°å½• ### ä»£ç ç¤ºä¾‹ ```c // åœ¨è¿™é‡Œè®°å½•é‡è¦ä»£ç ç‰‡æ®µ é‡åˆ°çš„é—®é¢˜ é—®é¢˜æè¿° è§£å†³æ–¹æ¡ˆ ç»éªŒæ€»ç»“ ä¸‹å‘¨è®¡åˆ’ å­¦ä¹ ç›®æ ‡ å®è·µé¡¹ç›® --- **STM32å­¦ä¹ æ˜¯ä¸€ä¸ªå¾ªåºæ¸è¿›çš„è¿‡ç¨‹ï¼Œé‡è¦çš„ä¸æ˜¯é€Ÿåº¦è€Œæ˜¯æ‰å®çš„åŸºç¡€ã€‚ç¥ä½ å­¦ä¹ æ„‰å¿«ï¼** *å¦‚æœä½ åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµè®¨è®ºã€‚* ",
  "wordCount" : "563",
  "inLanguage": "en",
  "image":"https://images.unsplash.com/photo-1537497711-4ba6054142f0?w=800\u0026h=400\u0026fit=crop","datePublished": "2025-11-08T10:30:00+08:00",
  "dateModified": "2025-11-08T10:30:00+08:00",
  "author":{
    "@type": "Person",
    "name": "dmk69"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/stm32-learning-guide/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "åˆ›å®¢æ•™è‚²åšå®¢",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/%3Clink%20/%20abs%20url%3E"
    }
  }
}
</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Home (Alt + H)">
                <img src="http://localhost:1313/apple-touch-icon.png" alt="" aria-label="logo"
                    height="35">Home</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/posts/" title="æ–‡ç« ">
                    <span>æ–‡ç« </span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="æ ‡ç­¾">
                    <span>æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="å…³äº">
                    <span>å…³äº</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;Â»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š
    </h1>
    <div class="post-meta"><span title='2025-11-08 10:30:00 +0800 CST'>2025-11-08</span>&nbsp;Â·&nbsp;<span>3 min</span>&nbsp;Â·&nbsp;<span>563 words</span>&nbsp;Â·&nbsp;<span>dmk69</span>

</div>
  </header> 
<figure class="entry-cover">
        <img loading="eager" src="https://images.unsplash.com/photo-1537497711-4ba6054142f0?w=800&amp;h=400&amp;fit=crop" alt="STM32å¼€å‘æ¿">
        <figcaption>STM32 Microcontroller Development Board</figcaption>
</figure>
  <div class="post-content"><h1 id="-stm32å®Œæ•´å­¦ä¹ æŒ‡å—ä»å…¥é—¨åˆ°ç²¾é€š">ğŸ”§ STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š<a hidden class="anchor" aria-hidden="true" href="#-stm32å®Œæ•´å­¦ä¹ æŒ‡å—ä»å…¥é—¨åˆ°ç²¾é€š">#</a></h1>
<p>STM32æ˜¯STå…¬å¸æ¨å‡ºçš„åŸºäºARM Cortex-Må†…æ ¸çš„32ä½å¾®æ§åˆ¶å™¨ç³»åˆ—ï¼Œåœ¨å·¥ä¸šæ§åˆ¶ã€æ¶ˆè´¹ç”µå­ã€ç‰©è”ç½‘ç­‰é¢†åŸŸæœ‰ç€å¹¿æ³›åº”ç”¨ã€‚æœ¬æŒ‡å—å°†å¸¦ä½ ä»é›¶åŸºç¡€é€æ­¥æŒæ¡STM32å¼€å‘ã€‚</p>
<h2 id="-å­¦ä¹ è·¯å¾„è§„åˆ’">ğŸ“š å­¦ä¹ è·¯å¾„è§„åˆ’<a hidden class="anchor" aria-hidden="true" href="#-å­¦ä¹ è·¯å¾„è§„åˆ’">#</a></h2>
<h3 id="é˜¶æ®µä¸€åŸºç¡€å…¥é—¨-ç¬¬1-4å‘¨">é˜¶æ®µä¸€ï¼šåŸºç¡€å…¥é—¨ (ç¬¬1-4å‘¨)<a hidden class="anchor" aria-hidden="true" href="#é˜¶æ®µä¸€åŸºç¡€å…¥é—¨-ç¬¬1-4å‘¨">#</a></h3>
<h4 id="11-å¼€å‘ç¯å¢ƒæ­å»º">1.1 å¼€å‘ç¯å¢ƒæ­å»º<a hidden class="anchor" aria-hidden="true" href="#11-å¼€å‘ç¯å¢ƒæ­å»º">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># å¿…éœ€è½¯ä»¶</span>
</span></span><span style="display:flex;"><span>- STM32CubeIDE <span style="color:#f92672">(</span>æ¨è<span style="color:#f92672">)</span> æˆ– Keil MDK
</span></span><span style="display:flex;"><span>- STM32CubeMX <span style="color:#f92672">(</span>å›¾å½¢åŒ–é…ç½®å·¥å…·<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>- ST-Linké©±åŠ¨å’Œè°ƒè¯•å·¥å…·
</span></span><span style="display:flex;"><span>- ä¸²å£è°ƒè¯•åŠ©æ‰‹ <span style="color:#f92672">(</span>XShellã€MobaXtermç­‰<span style="color:#f92672">)</span>
</span></span></code></pre></div><h4 id="12-ç¡¬ä»¶å‡†å¤‡">1.2 ç¡¬ä»¶å‡†å¤‡<a hidden class="anchor" aria-hidden="true" href="#12-ç¡¬ä»¶å‡†å¤‡">#</a></h4>
<table>
  <thead>
      <tr>
          <th>å¼€å‘æ¿å‹å·</th>
          <th>ä»·æ ¼</th>
          <th>æ¨èåº¦</th>
          <th>ç‰¹ç‚¹</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>STM32F103C8T6</td>
          <td>ï¿¥15-25</td>
          <td>â­â­â­â­â­</td>
          <td>ç»å…¸å‹å·ï¼Œèµ„æ–™ä¸°å¯Œ</td>
      </tr>
      <tr>
          <td>STM32F407VGT6</td>
          <td>ï¿¥60-80</td>
          <td>â­â­â­â­</td>
          <td>æ€§èƒ½å¼ºå¤§ï¼Œé€‚åˆé«˜çº§åº”ç”¨</td>
      </tr>
      <tr>
          <td>STM32L051C8</td>
          <td>ï¿¥20-30</td>
          <td>â­â­â­</td>
          <td>ä½åŠŸè€—ï¼Œé€‚åˆç”µæ± åº”ç”¨</td>
      </tr>
  </tbody>
</table>
<h4 id="13-ç¬¬ä¸€ä¸ªç¨‹åºledé—ªçƒ">1.3 ç¬¬ä¸€ä¸ªç¨‹åºï¼šLEDé—ªçƒ<a hidden class="anchor" aria-hidden="true" href="#13-ç¬¬ä¸€ä¸ªç¨‹åºledé—ªçƒ">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">/* main.c */</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;main.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">void</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">HAL_Init</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">SystemClock_Config</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// åˆå§‹åŒ–GPIO
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">__HAL_RCC_GPIOC_CLK_ENABLE</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    GPIO_InitTypeDef GPIO_InitStruct <span style="color:#f92672">=</span> {<span style="color:#ae81ff">0</span>};
</span></span><span style="display:flex;"><span>    GPIO_InitStruct.Pin <span style="color:#f92672">=</span> GPIO_PIN_13;
</span></span><span style="display:flex;"><span>    GPIO_InitStruct.Mode <span style="color:#f92672">=</span> GPIO_MODE_OUTPUT_PP;
</span></span><span style="display:flex;"><span>    GPIO_InitStruct.Pull <span style="color:#f92672">=</span> GPIO_NOPULL;
</span></span><span style="display:flex;"><span>    GPIO_InitStruct.Speed <span style="color:#f92672">=</span> GPIO_SPEED_FREQ_LOW;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">HAL_GPIO_Init</span>(GPIOC, <span style="color:#f92672">&amp;</span>GPIO_InitStruct);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (<span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">HAL_GPIO_WritePin</span>(GPIOC, GPIO_PIN_13, GPIO_PIN_SET);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">HAL_Delay</span>(<span style="color:#ae81ff">500</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">HAL_GPIO_WritePin</span>(GPIOC, GPIO_PIN_13, GPIO_PIN_RESET);
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">HAL_Delay</span>(<span style="color:#ae81ff">500</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="é˜¶æ®µäºŒå¤–è®¾åº”ç”¨-ç¬¬5-8å‘¨">é˜¶æ®µäºŒï¼šå¤–è®¾åº”ç”¨ (ç¬¬5-8å‘¨)<a hidden class="anchor" aria-hidden="true" href="#é˜¶æ®µäºŒå¤–è®¾åº”ç”¨-ç¬¬5-8å‘¨">#</a></h3>
<h4 id="21-gpioæ·±å…¥ç†è§£">2.1 GPIOæ·±å…¥ç†è§£<a hidden class="anchor" aria-hidden="true" href="#21-gpioæ·±å…¥ç†è§£">#</a></h4>
<ul>
<li>è¾“å…¥è¾“å‡ºæ¨¡å¼é…ç½®</li>
<li>ä¸­æ–­å’Œäº‹ä»¶å¤„ç†</li>
<li>å¤ç”¨åŠŸèƒ½é…ç½®</li>
</ul>
<h4 id="22-å®šæ—¶å™¨åº”ç”¨">2.2 å®šæ—¶å™¨åº”ç”¨<a hidden class="anchor" aria-hidden="true" href="#22-å®šæ—¶å™¨åº”ç”¨">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">// PWMè¾“å‡ºé…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Timer_PWM_Init</span>(<span style="color:#66d9ef">void</span>) {
</span></span><span style="display:flex;"><span>    TIM_HandleTypeDef htim3;
</span></span><span style="display:flex;"><span>    TIM_OC_InitTypeDef sConfigOC <span style="color:#f92672">=</span> {<span style="color:#ae81ff">0</span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    htim3.Instance <span style="color:#f92672">=</span> TIM3;
</span></span><span style="display:flex;"><span>    htim3.Init.Prescaler <span style="color:#f92672">=</span> <span style="color:#ae81ff">71</span>;  <span style="color:#75715e">// 72MHz/72 = 1MHz
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    htim3.Init.CounterMode <span style="color:#f92672">=</span> TIM_COUNTERMODE_UP;
</span></span><span style="display:flex;"><span>    htim3.Init.Period <span style="color:#f92672">=</span> <span style="color:#ae81ff">999</span>;    <span style="color:#75715e">// 1kHz
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    htim3.Init.ClockDivision <span style="color:#f92672">=</span> TIM_CLOCKDIVISION_DIV1;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">HAL_TIM_PWM_Init</span>(<span style="color:#f92672">&amp;</span>htim3);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    sConfigOC.OCMode <span style="color:#f92672">=</span> TIM_OCMODE_PWM1;
</span></span><span style="display:flex;"><span>    sConfigOC.Pulse <span style="color:#f92672">=</span> <span style="color:#ae81ff">499</span>;      <span style="color:#75715e">// 50%å ç©ºæ¯”
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    sConfigOC.OCPolarity <span style="color:#f92672">=</span> TIM_OCPOLARITY_HIGH;
</span></span><span style="display:flex;"><span>    sConfigOC.OCFastMode <span style="color:#f92672">=</span> TIM_OCFAST_DISABLE;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">HAL_TIM_PWM_ConfigChannel</span>(<span style="color:#f92672">&amp;</span>htim3, <span style="color:#f92672">&amp;</span>sConfigOC, TIM_CHANNEL_1);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="23-ä¸²å£é€šä¿¡">2.3 ä¸²å£é€šä¿¡<a hidden class="anchor" aria-hidden="true" href="#23-ä¸²å£é€šä¿¡">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">// UARTé…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">UART_Init</span>(<span style="color:#66d9ef">void</span>) {
</span></span><span style="display:flex;"><span>    UART_HandleTypeDef huart1;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    huart1.Instance <span style="color:#f92672">=</span> USART1;
</span></span><span style="display:flex;"><span>    huart1.Init.BaudRate <span style="color:#f92672">=</span> <span style="color:#ae81ff">115200</span>;
</span></span><span style="display:flex;"><span>    huart1.Init.WordLength <span style="color:#f92672">=</span> UART_WORDLENGTH_8B;
</span></span><span style="display:flex;"><span>    huart1.Init.StopBits <span style="color:#f92672">=</span> UART_STOPBITS_1;
</span></span><span style="display:flex;"><span>    huart1.Init.Parity <span style="color:#f92672">=</span> UART_PARITY_NONE;
</span></span><span style="display:flex;"><span>    huart1.Init.Mode <span style="color:#f92672">=</span> UART_MODE_TX_RX;
</span></span><span style="display:flex;"><span>    huart1.Init.HwFlowCtl <span style="color:#f92672">=</span> UART_HWCONTROL_NONE;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">HAL_UART_Init</span>(<span style="color:#f92672">&amp;</span>huart1);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// å‘é€æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">uint8_t</span> data[] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Hello STM32!</span><span style="color:#ae81ff">\r\n</span><span style="color:#e6db74">&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">HAL_UART_Transmit</span>(<span style="color:#f92672">&amp;</span>huart1, data, <span style="color:#66d9ef">sizeof</span>(data), <span style="color:#ae81ff">1000</span>);
</span></span></code></pre></div><h3 id="é˜¶æ®µä¸‰é«˜çº§åº”ç”¨-ç¬¬9-12å‘¨">é˜¶æ®µä¸‰ï¼šé«˜çº§åº”ç”¨ (ç¬¬9-12å‘¨)<a hidden class="anchor" aria-hidden="true" href="#é˜¶æ®µä¸‰é«˜çº§åº”ç”¨-ç¬¬9-12å‘¨">#</a></h3>
<h4 id="31-adcé‡‡æ ·">3.1 ADCé‡‡æ ·<a hidden class="anchor" aria-hidden="true" href="#31-adcé‡‡æ ·">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">// ADCé…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">ADC_Init</span>(<span style="color:#66d9ef">void</span>) {
</span></span><span style="display:flex;"><span>    ADC_HandleTypeDef hadc1;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    hadc1.Instance <span style="color:#f92672">=</span> ADC1;
</span></span><span style="display:flex;"><span>    hadc1.Init.ClockPrescaler <span style="color:#f92672">=</span> ADC_CLOCK_SYNC_PCLK_DIV4;
</span></span><span style="display:flex;"><span>    hadc1.Init.Resolution <span style="color:#f92672">=</span> ADC_RESOLUTION_12B;
</span></span><span style="display:flex;"><span>    hadc1.Init.ScanConvMode <span style="color:#f92672">=</span> DISABLE;
</span></span><span style="display:flex;"><span>    hadc1.Init.ContinuousConvMode <span style="color:#f92672">=</span> ENABLE;
</span></span><span style="display:flex;"><span>    hadc1.Init.DiscontinuousConvMode <span style="color:#f92672">=</span> DISABLE;
</span></span><span style="display:flex;"><span>    hadc1.Init.ExternalTrigConv <span style="color:#f92672">=</span> ADC_SOFTWARE_START;
</span></span><span style="display:flex;"><span>    hadc1.Init.DataAlign <span style="color:#f92672">=</span> ADC_DATAALIGN_RIGHT;
</span></span><span style="display:flex;"><span>    hadc1.Init.NbrOfConversion <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">HAL_ADC_Init</span>(<span style="color:#f92672">&amp;</span>hadc1);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// è¯»å–ADCå€¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">uint32_t</span> <span style="color:#a6e22e">ADC_Read</span>(<span style="color:#66d9ef">void</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">HAL_ADC_Start</span>(<span style="color:#f92672">&amp;</span>hadc1);
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">HAL_ADC_PollForConversion</span>(<span style="color:#f92672">&amp;</span>hadc1, <span style="color:#ae81ff">1000</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">HAL_ADC_GetValue</span>(<span style="color:#f92672">&amp;</span>hadc1);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="32-i2cå’Œspié€šä¿¡">3.2 I2Cå’ŒSPIé€šä¿¡<a hidden class="anchor" aria-hidden="true" href="#32-i2cå’Œspié€šä¿¡">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">// I2Cè¯»å–ä¼ æ„Ÿå™¨æ•°æ®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>HAL_StatusTypeDef <span style="color:#a6e22e">I2C_Read_Sensor</span>(<span style="color:#66d9ef">uint8_t</span> dev_addr, <span style="color:#66d9ef">uint8_t</span> reg_addr,
</span></span><span style="display:flex;"><span>                                 <span style="color:#66d9ef">uint8_t</span> <span style="color:#f92672">*</span>data, <span style="color:#66d9ef">uint16_t</span> len) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">HAL_I2C_Mem_Read</span>(<span style="color:#f92672">&amp;</span>hi2c1, dev_addr, reg_addr, <span style="color:#ae81ff">1</span>, data, len, <span style="color:#ae81ff">1000</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> HAL_OK;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="-å­¦ä¹ èµ„æºæ¨è">ğŸ“– å­¦ä¹ èµ„æºæ¨è<a hidden class="anchor" aria-hidden="true" href="#-å­¦ä¹ èµ„æºæ¨è">#</a></h2>
<h3 id="å®˜æ–¹æ–‡æ¡£">å®˜æ–¹æ–‡æ¡£<a hidden class="anchor" aria-hidden="true" href="#å®˜æ–¹æ–‡æ¡£">#</a></h3>
<ul>
<li><a href="https://www.st.com/resource/en/reference_manual/cd00171190-stm32f101xx-stm32f102xx-stm32f103xx-stm32f105xx-and-stm32f107xx-advanced-arm-based-32-bit-mcus-stmicroelectronics.pdf">STM32å‚è€ƒæ‰‹å†Œ</a></li>
<li><a href="https://www.st.com/resource/en/user_manual/dm00105879-description-of-stm32f4-hal-and-lowlayer-drivers-stmicroelectronics.pdf">HALåº“ç”¨æˆ·æ‰‹å†Œ</a></li>
</ul>
<h3 id="è§†é¢‘æ•™ç¨‹">è§†é¢‘æ•™ç¨‹<a hidden class="anchor" aria-hidden="true" href="#è§†é¢‘æ•™ç¨‹">#</a></h3>
<ul>
<li><strong>Bç«™</strong>: æ­£ç‚¹åŸå­ã€é‡ç«ã€å®‰ç¦è±</li>
<li><strong>YouTube</strong>: STM32å®˜æ–¹é¢‘é“ã€åµŒå…¥å¼ç³»ç»Ÿå¼€å‘è€…</li>
</ul>
<h3 id="å¼€å‘æ¿æ¨è">å¼€å‘æ¿æ¨è<a hidden class="anchor" aria-hidden="true" href="#å¼€å‘æ¿æ¨è">#</a></h3>
<ol>
<li><strong>æ­£ç‚¹åŸå­F103</strong>: èµ„æ–™ä¸°å¯Œï¼Œé€‚åˆåˆå­¦è€…</li>
<li><strong>é‡ç«F407</strong>: æ•™ç¨‹ç³»ç»Ÿï¼Œé¡¹ç›®ä¸°å¯Œ</li>
<li><strong>å®‰ç¦è±Lç³»åˆ—</strong>: ä¸“æ³¨ä½åŠŸè€—åº”ç”¨</li>
</ol>
<h2 id="-å®è·µé¡¹ç›®">ğŸ› ï¸ å®è·µé¡¹ç›®<a hidden class="anchor" aria-hidden="true" href="#-å®è·µé¡¹ç›®">#</a></h2>
<h3 id="é¡¹ç›®1æ™ºèƒ½ç¯å¢ƒç›‘æµ‹å™¨">é¡¹ç›®1ï¼šæ™ºèƒ½ç¯å¢ƒç›‘æµ‹å™¨<a hidden class="anchor" aria-hidden="true" href="#é¡¹ç›®1æ™ºèƒ½ç¯å¢ƒç›‘æµ‹å™¨">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">// å¤šä¼ æ„Ÿå™¨æ•°æ®é‡‡é›†
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">float</span> temperature;    <span style="color:#75715e">// æ¸©åº¦
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">float</span> humidity;       <span style="color:#75715e">// æ¹¿åº¦
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">uint16_t</span> light;       <span style="color:#75715e">// å…‰ç…§
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">uint16_t</span> air_quality; <span style="color:#75715e">// ç©ºæ°”è´¨é‡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>} SensorData;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Read_All_Sensors</span>(SensorData <span style="color:#f92672">*</span>data) {
</span></span><span style="display:flex;"><span>    data<span style="color:#f92672">-&gt;</span>temperature <span style="color:#f92672">=</span> <span style="color:#a6e22e">DHT11_Read_Temperature</span>();
</span></span><span style="display:flex;"><span>    data<span style="color:#f92672">-&gt;</span>humidity <span style="color:#f92672">=</span> <span style="color:#a6e22e">DHT11_Read_Humidity</span>();
</span></span><span style="display:flex;"><span>    data<span style="color:#f92672">-&gt;</span>light <span style="color:#f92672">=</span> <span style="color:#a6e22e">ADC_Read_Light</span>();
</span></span><span style="display:flex;"><span>    data<span style="color:#f92672">-&gt;</span>air_quality <span style="color:#f92672">=</span> <span style="color:#a6e22e">ADC_Read_Air</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="é¡¹ç›®2æ™ºèƒ½å°è½¦æ§åˆ¶ç³»ç»Ÿ">é¡¹ç›®2ï¼šæ™ºèƒ½å°è½¦æ§åˆ¶ç³»ç»Ÿ<a hidden class="anchor" aria-hidden="true" href="#é¡¹ç›®2æ™ºèƒ½å°è½¦æ§åˆ¶ç³»ç»Ÿ">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">// ç”µæœºæ§åˆ¶
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">enum</span> {
</span></span><span style="display:flex;"><span>    CAR_FORWARD,
</span></span><span style="display:flex;"><span>    CAR_BACKWARD,
</span></span><span style="display:flex;"><span>    CAR_LEFT,
</span></span><span style="display:flex;"><span>    CAR_RIGHT,
</span></span><span style="display:flex;"><span>    CAR_STOP
</span></span><span style="display:flex;"><span>} CarDirection;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Car_Control</span>(CarDirection dir, <span style="color:#66d9ef">uint8_t</span> speed) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">switch</span>(dir) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> CAR_FORWARD:
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Motor_Control</span>(MOTOR_LEFT, FORWARD, speed);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Motor_Control</span>(MOTOR_RIGHT, FORWARD, speed);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> CAR_BACKWARD:
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Motor_Control</span>(MOTOR_LEFT, BACKWARD, speed);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">Motor_Control</span>(MOTOR_RIGHT, BACKWARD, speed);
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// ... å…¶ä»–æ–¹å‘æ§åˆ¶
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="-è°ƒè¯•æŠ€å·§">ğŸ”§ è°ƒè¯•æŠ€å·§<a hidden class="anchor" aria-hidden="true" href="#-è°ƒè¯•æŠ€å·§">#</a></h2>
<h3 id="1-ä¸²å£è°ƒè¯•">1. ä¸²å£è°ƒè¯•<a hidden class="anchor" aria-hidden="true" href="#1-ä¸²å£è°ƒè¯•">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">// è°ƒè¯•å®å®šä¹‰
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">#define DEBUG_PRINTF(fmt, args...) \
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    do { \
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">        char debug_buf[128]; \
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">        sprintf(debug_buf, fmt, ##args); \
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">        HAL_UART_Transmit(&amp;huart1, (uint8_t*)debug_buf, strlen(debug_buf), 1000); \
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">    } while(0)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ä½¿ç”¨ç¤ºä¾‹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">DEBUG_PRINTF</span>(<span style="color:#e6db74">&#34;Temperature: %.2fÂ°C</span><span style="color:#ae81ff">\r\n</span><span style="color:#e6db74">&#34;</span>, temperature);
</span></span></code></pre></div><h3 id="2-ledçŠ¶æ€æŒ‡ç¤º">2. LEDçŠ¶æ€æŒ‡ç¤º<a hidden class="anchor" aria-hidden="true" href="#2-ledçŠ¶æ€æŒ‡ç¤º">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">// é”™è¯¯ç æŒ‡ç¤º
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">Error_Handler</span>(<span style="color:#66d9ef">uint32_t</span> error_code) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span>(<span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> error_code; i<span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">HAL_GPIO_WritePin</span>(GPIOC, GPIO_PIN_13, GPIO_PIN_SET);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">HAL_Delay</span>(<span style="color:#ae81ff">200</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">HAL_GPIO_WritePin</span>(GPIOC, GPIO_PIN_13, GPIO_PIN_RESET);
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">HAL_Delay</span>(<span style="color:#ae81ff">200</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">HAL_Delay</span>(<span style="color:#ae81ff">1000</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="-å­¦ä¹ æ—¶é—´è§„åˆ’">ğŸ“ˆ å­¦ä¹ æ—¶é—´è§„åˆ’<a hidden class="anchor" aria-hidden="true" href="#-å­¦ä¹ æ—¶é—´è§„åˆ’">#</a></h2>
<table>
  <thead>
      <tr>
          <th>å‘¨æ•°</th>
          <th>å­¦ä¹ å†…å®¹</th>
          <th>å®è·µé¡¹ç›®</th>
          <th>é¢„æœŸæˆæœ</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>1-2</td>
          <td>å¼€å‘ç¯å¢ƒæ­å»ºï¼ŒGPIOæ§åˆ¶</td>
          <td>LEDé—ªçƒå®éªŒ</td>
          <td>æŒæ¡åŸºæœ¬GPIOæ“ä½œ</td>
      </tr>
      <tr>
          <td>3-4</td>
          <td>å®šæ—¶å™¨ï¼ŒPWMï¼Œä¸­æ–­</td>
          <td>å‘¼å¸ç¯ï¼ŒæŒ‰é”®æ§åˆ¶</td>
          <td>ç†è§£å®šæ—¶å™¨å’Œä¸­æ–­</td>
      </tr>
      <tr>
          <td>5-6</td>
          <td>ä¸²å£é€šä¿¡ï¼ŒADC</td>
          <td>ä¸²å£è°ƒè¯•åŠ©æ‰‹ï¼Œç”µå‹è¡¨</td>
          <td>æŒæ¡é€šä¿¡å’Œé‡‡æ ·</td>
      </tr>
      <tr>
          <td>7-8</td>
          <td>I2Cï¼ŒSPIé€šä¿¡</td>
          <td>ä¼ æ„Ÿå™¨æ•°æ®è¯»å–</td>
          <td>ç†Ÿæ‚‰æ€»çº¿é€šä¿¡</td>
      </tr>
      <tr>
          <td>9-10</td>
          <td>DMAï¼Œé«˜çº§å®šæ—¶å™¨</td>
          <td>éŸ³é¢‘æ’­æ”¾ï¼Œé«˜é€Ÿé‡‡é›†</td>
          <td>äº†è§£é«˜çº§ç‰¹æ€§</td>
      </tr>
      <tr>
          <td>11-12</td>
          <td>FreeRTOSåŸºç¡€</td>
          <td>å¤šä»»åŠ¡ç³»ç»Ÿ</td>
          <td>æŒæ¡å®æ—¶ç³»ç»Ÿ</td>
      </tr>
  </tbody>
</table>
<h2 id="-è¿›é˜¶æ–¹å‘">ğŸš€ è¿›é˜¶æ–¹å‘<a hidden class="anchor" aria-hidden="true" href="#-è¿›é˜¶æ–¹å‘">#</a></h2>
<h3 id="1-freertoså®æ—¶ç³»ç»Ÿ">1. FreeRTOSå®æ—¶ç³»ç»Ÿ<a hidden class="anchor" aria-hidden="true" href="#1-freertoså®æ—¶ç³»ç»Ÿ">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">// ä»»åŠ¡åˆ›å»º
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">osThreadId_t</span> defaultTaskHandle;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">osThreadAttr_t</span> defaultTask_attributes <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>  .name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;defaultTask&#34;</span>,
</span></span><span style="display:flex;"><span>  .stack_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">128</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">4</span>,
</span></span><span style="display:flex;"><span>  .priority <span style="color:#f92672">=</span> (<span style="color:#66d9ef">osPriority_t</span>) osPriorityNormal,
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>defaultTaskHandle <span style="color:#f92672">=</span> <span style="color:#a6e22e">osThreadNew</span>(StartDefaultTask, NULL, <span style="color:#f92672">&amp;</span>defaultTask_attributes);
</span></span></code></pre></div><h3 id="2-bootloaderå¼€å‘">2. Bootloaderå¼€å‘<a hidden class="anchor" aria-hidden="true" href="#2-bootloaderå¼€å‘">#</a></h3>
<ul>
<li>IAP (In-Application Programming)</li>
<li>å›ºä»¶å‡çº§æœºåˆ¶</li>
<li>åŒå¤‡ä»½ç³»ç»Ÿ</li>
</ul>
<h3 id="3-ä½åŠŸè€—ä¼˜åŒ–">3. ä½åŠŸè€—ä¼˜åŒ–<a hidden class="anchor" aria-hidden="true" href="#3-ä½åŠŸè€—ä¼˜åŒ–">#</a></h3>
<ul>
<li>STOPå’ŒSTANDBYæ¨¡å¼</li>
<li>å¤–è®¾æ—¶é’Ÿç®¡ç†</li>
<li>åŠ¨æ€ç”µå‹è°ƒèŠ‚</li>
</ul>
<h2 id="-å¸¸è§é—®é¢˜è§£å†³">ğŸ’¡ å¸¸è§é—®é¢˜è§£å†³<a hidden class="anchor" aria-hidden="true" href="#-å¸¸è§é—®é¢˜è§£å†³">#</a></h2>
<h3 id="q1-ç¨‹åºä¸‹è½½å¤±è´¥">Q1: ç¨‹åºä¸‹è½½å¤±è´¥<a hidden class="anchor" aria-hidden="true" href="#q1-ç¨‹åºä¸‹è½½å¤±è´¥">#</a></h3>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p>
<ol>
<li>æ£€æŸ¥ST-Linkè¿æ¥</li>
<li>ç¡®è®¤BOOTå¼•è„šé…ç½®</li>
<li>å°è¯•ä¸åŒçš„ä¸‹è½½é€Ÿåº¦</li>
</ol>
<h3 id="q2-ç¨‹åºè¿è¡Œå¼‚å¸¸">Q2: ç¨‹åºè¿è¡Œå¼‚å¸¸<a hidden class="anchor" aria-hidden="true" href="#q2-ç¨‹åºè¿è¡Œå¼‚å¸¸">#</a></h3>
<p><strong>è°ƒè¯•æ­¥éª¤</strong>:</p>
<ol>
<li>æ£€æŸ¥æ—¶é’Ÿé…ç½®</li>
<li>ç¡®è®¤å †æ ˆå¤§å°</li>
<li>ä½¿ç”¨ä¸²å£è¾“å‡ºè°ƒè¯•ä¿¡æ¯</li>
</ol>
<h3 id="q3-å¤–è®¾ä¸å·¥ä½œ">Q3: å¤–è®¾ä¸å·¥ä½œ<a hidden class="anchor" aria-hidden="true" href="#q3-å¤–è®¾ä¸å·¥ä½œ">#</a></h3>
<p><strong>æ£€æŸ¥æ¸…å•</strong>:</p>
<ul>
<li>æ—¶é’Ÿæ˜¯å¦ä½¿èƒ½</li>
<li>GPIOé…ç½®æ˜¯å¦æ­£ç¡®</li>
<li>ä¸­æ–­æ˜¯å¦é…ç½®</li>
</ul>
<h2 id="-å­¦ä¹ ç¬”è®°æ¨¡æ¿">ğŸ“ å­¦ä¹ ç¬”è®°æ¨¡æ¿<a hidden class="anchor" aria-hidden="true" href="#-å­¦ä¹ ç¬”è®°æ¨¡æ¿">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span><span style="color:#75715e">## STM32å­¦ä¹ ç¬”è®° - ç¬¬Xå‘¨
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">### æœ¬å‘¨å­¦ä¹ å†…å®¹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">- [ ]</span> ç†è®ºçŸ¥è¯†
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">- [ ]</span> ä»£ç å®è·µ
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">- [ ]</span> é—®é¢˜è®°å½•
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">### ä»£ç ç¤ºä¾‹
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>```c
</span></span><span style="display:flex;"><span>// åœ¨è¿™é‡Œè®°å½•é‡è¦ä»£ç ç‰‡æ®µ
</span></span></code></pre></div><h3 id="é‡åˆ°çš„é—®é¢˜">é‡åˆ°çš„é—®é¢˜<a hidden class="anchor" aria-hidden="true" href="#é‡åˆ°çš„é—®é¢˜">#</a></h3>
<ol>
<li>é—®é¢˜æè¿°</li>
<li>è§£å†³æ–¹æ¡ˆ</li>
<li>ç»éªŒæ€»ç»“</li>
</ol>
<h3 id="ä¸‹å‘¨è®¡åˆ’">ä¸‹å‘¨è®¡åˆ’<a hidden class="anchor" aria-hidden="true" href="#ä¸‹å‘¨è®¡åˆ’">#</a></h3>
<ul>
<li><input disabled="" type="checkbox"> å­¦ä¹ ç›®æ ‡</li>
<li><input disabled="" type="checkbox"> å®è·µé¡¹ç›®</li>
</ul>
<pre tabindex="0"><code>
---

**STM32å­¦ä¹ æ˜¯ä¸€ä¸ªå¾ªåºæ¸è¿›çš„è¿‡ç¨‹ï¼Œé‡è¦çš„ä¸æ˜¯é€Ÿåº¦è€Œæ˜¯æ‰å®çš„åŸºç¡€ã€‚ç¥ä½ å­¦ä¹ æ„‰å¿«ï¼**

*å¦‚æœä½ åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµè®¨è®ºã€‚*
</code></pre>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/stm32/">STM32</a></li>
      <li><a href="http://localhost:1313/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/">åµŒå…¥å¼</a></li>
      <li><a href="http://localhost:1313/tags/arm-cortex-m/">ARM Cortex-M</a></li>
      <li><a href="http://localhost:1313/tags/hal%E5%BA%93/">HALåº“</a></li>
      <li><a href="http://localhost:1313/tags/freertos/">FreeRTOS</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/posts/solidworks-tutorial/">
    <span class="title">Â« Prev</span>
    <br>
    <span>SolidWorkså»ºæ¨¡å®Œå…¨æ•™ç¨‹ï¼šä»é›¶åŸºç¡€åˆ°äº§å“è®¾è®¡</span>
  </a>
  <a class="next" href="http://localhost:1313/posts/my-journey-to-maker-education/">
    <span class="title">Next Â»</span>
    <br>
    <span>ä»é‡‘èäº¤æ˜“åˆ°åˆ›å®¢æ•™è‚²ï¼šæˆ‘çš„è½¬å‹ä¹‹è·¯</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š on x"
            href="https://x.com/intent/tweet/?text=STM32%e5%ae%8c%e6%95%b4%e5%ad%a6%e4%b9%a0%e6%8c%87%e5%8d%97%ef%bc%9a%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e7%b2%be%e9%80%9a&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fstm32-learning-guide%2f&amp;hashtags=STM32%2c%e5%b5%8c%e5%85%a5%e5%bc%8f%2cARMCortex-M%2cHAL%e5%ba%93%2cFreeRTOS">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fstm32-learning-guide%2f&amp;title=STM32%e5%ae%8c%e6%95%b4%e5%ad%a6%e4%b9%a0%e6%8c%87%e5%8d%97%ef%bc%9a%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e7%b2%be%e9%80%9a&amp;summary=STM32%e5%ae%8c%e6%95%b4%e5%ad%a6%e4%b9%a0%e6%8c%87%e5%8d%97%ef%bc%9a%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e7%b2%be%e9%80%9a&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fstm32-learning-guide%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fstm32-learning-guide%2f&title=STM32%e5%ae%8c%e6%95%b4%e5%ad%a6%e4%b9%a0%e6%8c%87%e5%8d%97%ef%bc%9a%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e7%b2%be%e9%80%9a">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fstm32-learning-guide%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š on whatsapp"
            href="https://api.whatsapp.com/send?text=STM32%e5%ae%8c%e6%95%b4%e5%ad%a6%e4%b9%a0%e6%8c%87%e5%8d%97%ef%bc%9a%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e7%b2%be%e9%80%9a%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fstm32-learning-guide%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š on telegram"
            href="https://telegram.me/share/url?text=STM32%e5%ae%8c%e6%95%b4%e5%ad%a6%e4%b9%a0%e6%8c%87%e5%8d%97%ef%bc%9a%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e7%b2%be%e9%80%9a&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fstm32-learning-guide%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share STM32å®Œæ•´å­¦ä¹ æŒ‡å—ï¼šä»å…¥é—¨åˆ°ç²¾é€š on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=STM32%e5%ae%8c%e6%95%b4%e5%ad%a6%e4%b9%a0%e6%8c%87%e5%8d%97%ef%bc%9a%e4%bb%8e%e5%85%a5%e9%97%a8%e5%88%b0%e7%b2%be%e9%80%9a&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fstm32-learning-guide%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">åˆ›å®¢æ•™è‚²åšå®¢</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
