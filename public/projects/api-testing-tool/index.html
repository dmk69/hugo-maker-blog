<!DOCTYPE html>
<html lang="zh-cn" dir="auto" data-theme="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>API测试自动化工具 | 创客教育者与嵌入式开发者</title>
<meta name="keywords" content="API测试, 自动化测试, 开源工具, Python, 测试框架, RESTful, GraphQL">
<meta name="description" content="一个开源的API测试自动化工具，支持RESTful API和GraphQL API的测试">
<meta name="author" content="网站作者">
<link rel="canonical" href="https://example.org/projects/api-testing-tool/">
<meta name="google-site-verification" content="XYZabc">
<meta name="yandex-verification" content="XYZabc">
<meta name="msvalidate.01" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css" integrity="sha256-NDzEgLn/yPBMy&#43;XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://example.org/favicon.svg">
<link rel="icon" type="image/png" sizes="16x16" href="https://example.org/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://example.org/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://example.org/apple-touch-icon.png">
<link rel="mask-icon" href="https://example.org/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh-cn" href="https://example.org/projects/api-testing-tool/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><meta property="og:url" content="https://example.org/projects/api-testing-tool/">
  <meta property="og:site_name" content="创客教育者与嵌入式开发者">
  <meta property="og:title" content="API测试自动化工具">
  <meta property="og:description" content="一个开源的API测试自动化工具，支持RESTful API和GraphQL API的测试">
  <meta property="og:locale" content="zh-cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="projects">
    <meta property="article:published_time" content="2025-10-24T14:20:00+08:00">
    <meta property="article:modified_time" content="2025-10-24T14:20:00+08:00">
    <meta property="article:tag" content="开源工具">
    <meta property="article:tag" content="API测试">
    <meta property="article:tag" content="自动化">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="测试框架">
      <meta property="og:image" content="https://example.org/images/og-image.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://example.org/images/og-image.jpg">
<meta name="twitter:title" content="API测试自动化工具">
<meta name="twitter:description" content="一个开源的API测试自动化工具，支持RESTful API和GraphQL API的测试">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "项目展示",
      "item": "https://example.org/projects/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "API测试自动化工具",
      "item": "https://example.org/projects/api-testing-tool/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "API测试自动化工具",
  "name": "API测试自动化工具",
  "description": "一个开源的API测试自动化工具，支持RESTful API和GraphQL API的测试",
  "keywords": [
    "API测试", "自动化测试", "开源工具", "Python", "测试框架", "RESTful", "GraphQL"
  ],
  "articleBody": "API测试自动化工具 这是一个开源的API测试自动化工具，支持RESTful API和GraphQL API的测试，提供简单易用的测试框架。\n项目概述 API测试自动化工具是一个专为开发者设计的轻量级测试框架，旨在简化API测试流程，提高测试效率。该工具支持多种API协议，提供丰富的断言方法，并生成详细的测试报告，是开发团队进行API测试的理想选择。\n技术栈 核心技术 Python 3.8+ - 主要编程语言 Requests - HTTP客户端库 GraphQL Client - GraphQL查询支持 Pytest - 测试框架 JSON Schema - 数据验证 Jinja2 - 模板引擎 Click - 命令行界面 报告与可视化 Allure - 测试报告生成 Plotly - 数据可视化 Jinja2 - HTML报告模板 WeasyPrint - PDF报告生成 开发工具 Black - 代码格式化 Flake8 - 代码检查 MyPy - 类型检查 Pre-commit - Git钩子 Sphinx - 文档生成 项目特点 核心功能 多协议支持 - RESTful API、GraphQL、WebSocket 灵活的测试配置 - YAML/JSON配置文件 丰富的断言方法 - 状态码、响应体、响应时间等 数据驱动测试 - 支持参数化测试 环境管理 - 多环境配置支持 测试报告 - HTML、PDF、JSON格式报告 技术亮点 零配置启动 - 开箱即用的默认配置 插件系统 - 可扩展的插件架构 并发测试 - 支持并发执行测试用例 持续集成 - 与CI/CD工具无缝集成 版本控制 - 测试用例版本管理 实现细节 项目结构 api-testing-tool/\r├── src/\r│ ├── api_tester/ # 核心模块\r│ │ ├── core/ # 核心功能\r│ │ ├── assertions/ # 断言方法\r│ │ ├── reporters/ # 报告生成\r│ │ ├── plugins/ # 插件系统\r│ │ └── utils/ # 工具函数\r│ └── cli/ # 命令行界面\r├── tests/ # 测试用例\r├── examples/ # 示例配置\r├── docs/ # 文档\r└── plugins/ # 扩展插件 核心类设计 测试执行器 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 class APITestRunner: def __init__(self, config: TestConfig): self.config = config self.session = requests.Session() self.reporter = Reporter(config.report_format) def run_test(self, test_case: TestCase) -\u003e TestResult: \"\"\"执行单个测试用例\"\"\" start_time = time.time() try: response = self._send_request(test_case) execution_time = time.time() - start_time result = TestResult( name=test_case.name, status=self._evaluate_response(response, test_case), response=response, execution_time=execution_time ) except Exception as e: result = TestResult( name=test_case.name, status=TestStatus.FAILED, error=str(e), execution_time=time.time() - start_time ) return result def run_suite(self, test_suite: TestSuite) -\u003e TestSuiteResult: \"\"\"执行测试套件\"\"\" results = [] if test_suite.parallel: with ThreadPoolExecutor(max_workers=test_suite.max_workers) as executor: futures = [ executor.submit(self.run_test, test_case) for test_case in test_suite.test_cases ] results = [future.result() for future in futures] else: results = [ self.run_test(test_case) for test_case in test_suite.test_cases ] return TestSuiteResult(results=results) 断言系统 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 class AssertionEngine: @staticmethod def assert_status_code(response: requests.Response, expected: int): \"\"\"断言状态码\"\"\" assert response.status_code == expected, \\ f\"Expected status code {expected}, got {response.status_code}\" @staticmethod def assert_json_schema(response: requests.Response, schema: dict): \"\"\"断言JSON响应结构\"\"\" try: data = response.json() jsonschema.validate(data, schema) except jsonschema.ValidationError as e: raise AssertionError(f\"JSON schema validation failed: {e}\") @staticmethod def assert_response_time(response: requests.Response, max_time: float): \"\"\"断言响应时间\"\"\" assert response.elapsed.total_seconds() \u003c= max_time, \\ f\"Response time {response.elapsed.total_seconds()}s exceeds {max_time}s\" @staticmethod def assert_contains(response: requests.Response, text: str): \"\"\"断言响应包含指定文本\"\"\" assert text in response.text, \\ f\"Response does not contain expected text: {text}\" 配置文件示例 YAML配置 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 # api-test-config.yaml environments: development: base_url: \"https://dev-api.example.com\" headers: Authorization: \"Bearer dev-token\" production: base_url: \"https://api.example.com\" headers: Authorization: \"Bearer prod-token\" test_suites: - name: \"用户API测试\" parallel: true max_workers: 5 test_cases: - name: \"获取用户列表\" method: \"GET\" endpoint: \"/users\" assertions: - type: \"status_code\" value: 200 - type: \"response_time\" value: 2.0 - type: \"json_schema\" value: type: \"array\" items: type: \"object\" properties: id: type: \"integer\" name: type: \"string\" - name: \"创建新用户\" method: \"POST\" endpoint: \"/users\" data: name: \"测试用户\" email: \"test@example.com\" assertions: - type: \"status_code\" value: 201 - type: \"contains\" value: \"用户创建成功\" 命令行界面 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 @click.group() @click.version_option() def cli(): \"\"\"API测试自动化工具\"\"\" pass @cli.command() @click.option('--config', '-c', default='api-test-config.yaml', help='配置文件路径') @click.option('--environment', '-e', default='development', help='测试环境') @click.option('--report', '-r', default='html', help='报告格式') @click.option('--output', '-o', default='test-report', help='报告输出目录') def run(config, environment, report, output): \"\"\"运行API测试\"\"\" try: test_config = load_config(config, environment) runner = APITestRunner(test_config) click.echo(f\"开始运行API测试 (环境: {environment})\") results = runner.run_all_tests() reporter = Reporter(report) reporter.generate_report(results, output) click.echo(f\"测试完成，报告已生成到: {output}\") except Exception as e: click.echo(f\"测试执行失败: {e}\", err=True) sys.exit(1) 插件系统 插件接口 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 class PluginInterface: def before_test(self, test_case: TestCase): \"\"\"测试前钩子\"\"\" pass def after_test(self, test_case: TestCase, result: TestResult): \"\"\"测试后钩子\"\"\" pass def before_suite(self, test_suite: TestSuite): \"\"\"测试套件前钩子\"\"\" pass def after_suite(self, test_suite: TestSuite, result: TestSuiteResult): \"\"\"测试套件后钩子\"\"\" pass 示例插件 - 数据库清理 1 2 3 4 5 6 7 8 9 10 11 12 13 14 class DatabaseCleanupPlugin(PluginInterface): def __init__(self, db_connection_string: str): self.db_connection = create_connection(db_connection_string) def before_test(self, test_case: TestCase): \"\"\"测试前清理测试数据\"\"\" if test_case.cleanup_data: self._cleanup_test_data(test_case.cleanup_data) def _cleanup_test_data(self, cleanup_config: dict): \"\"\"执行数据清理\"\"\" for table in cleanup_config.get('tables', []): query = f\"DELETE FROM {table} WHERE test_data = true\" self.db_connection.execute(query) 测试报告 HTML报告特性 交互式图表 - 测试结果可视化 详细日志 - 请求/响应详情 性能指标 - 响应时间统计 历史对比 - 与历史测试结果对比 错误分析 - 失败用例分类统计 报告示例 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 class HTMLReporter: def generate_report(self, results: TestSuiteResult, output_path: str): \"\"\"生成HTML测试报告\"\"\" template = self._load_template('report_template.html') context = { 'summary': self._generate_summary(results), 'charts': self._generate_charts(results), 'test_results': results.results, 'generated_at': datetime.now().isoformat() } html_content = template.render(context) with open(f\"{output_path}/report.html\", 'w', encoding='utf-8') as f: f.write(html_content) 部署与分发 PyPI发布 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 # setup.py from setuptools import setup, find_packages setup( name=\"api-testing-tool\", version=\"1.0.0\", packages=find_packages(), install_requires=[ \"requests\u003e=2.25.0\", \"pytest\u003e=6.0.0\", \"click\u003e=8.0.0\", \"jsonschema\u003e=3.2.0\", \"jinja2\u003e=3.0.0\", \"allure-pytest\u003e=2.9.0\" ], entry_points={ 'console_scripts': [ 'api-test=api_tester.cli:cli', ], }, author=\"Your Name\", author_email=\"your.email@example.com\", description=\"API测试自动化工具\", long_description=open(\"README.md\").read(), long_description_content_type=\"text/markdown\", url=\"https://github.com/yourusername/api-testing-tool\", classifiers=[ \"Development Status :: 4 - Beta\", \"Intended Audience :: Developers\", \"License :: OSI Approved :: MIT License\", \"Programming Language :: Python :: 3\", \"Programming Language :: Python :: 3.8\", \"Programming Language :: Python :: 3.9\", \"Programming Language :: Python :: 3.10\", ], ) Docker支持 1 2 3 4 5 6 7 8 9 10 11 12 13 14 # Dockerfile FROM python:3.9-slim WORKDIR /app COPY requirements.txt . RUN pip install --no-cache-dir -r requirements.txt COPY src/ ./src/ COPY examples/ ./examples/ RUN pip install -e . ENTRYPOINT [\"api-test\"] 项目成果 开源社区 - GitHub星标1000+，Fork 200+ 用户反馈 - 50+企业用户，积极反馈和贡献 文档完善 - 详细的API文档和使用指南 持续更新 - 定期发布新版本，修复问题和添加功能 生态建设 - 10+社区插件，扩展工具功能 未来规划 GUI界面 - 开发图形化测试配置界面 云服务 - 提供云端测试执行服务 更多协议 - 支持gRPC、WebSocket等协议 AI辅助 - 智能测试用例生成和优化 企业版 - 提供企业级功能和支持服务 ",
  "wordCount" : "1001",
  "inLanguage": "zh-cn",
  "image": "https://example.org/images/og-image.jpg","datePublished": "2025-10-24T14:20:00+08:00",
  "dateModified": "2025-10-24T14:20:00+08:00",
  "author":{
    "@type": "Person",
    "name": "网站作者"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://example.org/projects/api-testing-tool/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "创客教育者与嵌入式开发者",
    "logo": {
      "@type": "ImageObject",
      "url": "https://example.org/favicon.svg"
    }
  }
}
</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://example.org/" accesskey="h" title="技术探索者 (Alt + H)">
                <img src="https://example.org/apple-touch-icon.png" alt="" aria-label="logo"
                    height="35">技术探索者</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://example.org/" title="首页">
                    <span>首页</span>
                </a>
            </li>
            <li>
                <a href="https://example.org/projects/" title="项目">
                    <span>项目</span>
                </a>
            </li>
            <li>
                <a href="https://example.org/skills/" title="技能">
                    <span>技能</span>
                </a>
            </li>
            <li>
                <a href="https://example.org/posts/" title="文章">
                    <span>文章</span>
                </a>
            </li>
            <li>
                <a href="https://example.org/about/" title="关于">
                    <span>关于</span>
                </a>
            </li>
            <li>
                <a href="https://example.org/tags/" title="标签">
                    <span>标签</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://example.org/">Home</a>&nbsp;»&nbsp;<a href="https://example.org/projects/">项目展示</a></div>
    <h1 class="post-title entry-hint-parent">
      API测试自动化工具
    </h1>
    <div class="post-description">
      一个开源的API测试自动化工具，支持RESTful API和GraphQL API的测试
    </div>
    <div class="post-meta"><span title='2025-10-24 14:20:00 +0800 CST'>2025-10-24</span>&nbsp;·&nbsp;<span>5 min</span>&nbsp;·&nbsp;<span>1001 words</span>&nbsp;·&nbsp;<span>网站作者</span>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><nav id="TableOfContents">
  <ul>
    <li><a href="#api测试自动化工具">API测试自动化工具</a>
      <ul>
        <li><a href="#项目概述">项目概述</a></li>
        <li><a href="#技术栈">技术栈</a>
          <ul>
            <li><a href="#核心技术">核心技术</a></li>
            <li><a href="#报告与可视化">报告与可视化</a></li>
            <li><a href="#开发工具">开发工具</a></li>
          </ul>
        </li>
        <li><a href="#项目特点">项目特点</a>
          <ul>
            <li><a href="#核心功能">核心功能</a></li>
            <li><a href="#技术亮点">技术亮点</a></li>
          </ul>
        </li>
        <li><a href="#实现细节">实现细节</a>
          <ul>
            <li><a href="#项目结构">项目结构</a></li>
            <li><a href="#核心类设计">核心类设计</a>
              <ul>
                <li><a href="#测试执行器">测试执行器</a></li>
                <li><a href="#断言系统">断言系统</a></li>
              </ul>
            </li>
            <li><a href="#配置文件示例">配置文件示例</a>
              <ul>
                <li><a href="#yaml配置">YAML配置</a></li>
              </ul>
            </li>
            <li><a href="#命令行界面">命令行界面</a></li>
          </ul>
        </li>
        <li><a href="#插件系统">插件系统</a>
          <ul>
            <li><a href="#插件接口">插件接口</a></li>
            <li><a href="#示例插件---数据库清理">示例插件 - 数据库清理</a></li>
          </ul>
        </li>
        <li><a href="#测试报告">测试报告</a>
          <ul>
            <li><a href="#html报告特性">HTML报告特性</a></li>
            <li><a href="#报告示例">报告示例</a></li>
          </ul>
        </li>
        <li><a href="#部署与分发">部署与分发</a>
          <ul>
            <li><a href="#pypi发布">PyPI发布</a></li>
            <li><a href="#docker支持">Docker支持</a></li>
          </ul>
        </li>
        <li><a href="#项目成果">项目成果</a></li>
        <li><a href="#未来规划">未来规划</a></li>
      </ul>
    </li>
  </ul>
</nav>
        </div>
    </details>
</div>

  <div class="post-content"><h1 id="api测试自动化工具">API测试自动化工具<a hidden class="anchor" aria-hidden="true" href="#api测试自动化工具">#</a></h1>
<p>这是一个开源的API测试自动化工具，支持RESTful API和GraphQL API的测试，提供简单易用的测试框架。</p>
<h2 id="项目概述">项目概述<a hidden class="anchor" aria-hidden="true" href="#项目概述">#</a></h2>
<p>API测试自动化工具是一个专为开发者设计的轻量级测试框架，旨在简化API测试流程，提高测试效率。该工具支持多种API协议，提供丰富的断言方法，并生成详细的测试报告，是开发团队进行API测试的理想选择。</p>
<h2 id="技术栈">技术栈<a hidden class="anchor" aria-hidden="true" href="#技术栈">#</a></h2>
<h3 id="核心技术">核心技术<a hidden class="anchor" aria-hidden="true" href="#核心技术">#</a></h3>
<ul>
<li><strong>Python 3.8+</strong> - 主要编程语言</li>
<li><strong>Requests</strong> - HTTP客户端库</li>
<li><strong>GraphQL Client</strong> - GraphQL查询支持</li>
<li><strong>Pytest</strong> - 测试框架</li>
<li><strong>JSON Schema</strong> - 数据验证</li>
<li><strong>Jinja2</strong> - 模板引擎</li>
<li><strong>Click</strong> - 命令行界面</li>
</ul>
<h3 id="报告与可视化">报告与可视化<a hidden class="anchor" aria-hidden="true" href="#报告与可视化">#</a></h3>
<ul>
<li><strong>Allure</strong> - 测试报告生成</li>
<li><strong>Plotly</strong> - 数据可视化</li>
<li><strong>Jinja2</strong> - HTML报告模板</li>
<li><strong>WeasyPrint</strong> - PDF报告生成</li>
</ul>
<h3 id="开发工具">开发工具<a hidden class="anchor" aria-hidden="true" href="#开发工具">#</a></h3>
<ul>
<li><strong>Black</strong> - 代码格式化</li>
<li><strong>Flake8</strong> - 代码检查</li>
<li><strong>MyPy</strong> - 类型检查</li>
<li><strong>Pre-commit</strong> - Git钩子</li>
<li><strong>Sphinx</strong> - 文档生成</li>
</ul>
<h2 id="项目特点">项目特点<a hidden class="anchor" aria-hidden="true" href="#项目特点">#</a></h2>
<h3 id="核心功能">核心功能<a hidden class="anchor" aria-hidden="true" href="#核心功能">#</a></h3>
<ul>
<li><strong>多协议支持</strong> - RESTful API、GraphQL、WebSocket</li>
<li><strong>灵活的测试配置</strong> - YAML/JSON配置文件</li>
<li><strong>丰富的断言方法</strong> - 状态码、响应体、响应时间等</li>
<li><strong>数据驱动测试</strong> - 支持参数化测试</li>
<li><strong>环境管理</strong> - 多环境配置支持</li>
<li><strong>测试报告</strong> - HTML、PDF、JSON格式报告</li>
</ul>
<h3 id="技术亮点">技术亮点<a hidden class="anchor" aria-hidden="true" href="#技术亮点">#</a></h3>
<ul>
<li><strong>零配置启动</strong> - 开箱即用的默认配置</li>
<li><strong>插件系统</strong> - 可扩展的插件架构</li>
<li><strong>并发测试</strong> - 支持并发执行测试用例</li>
<li><strong>持续集成</strong> - 与CI/CD工具无缝集成</li>
<li><strong>版本控制</strong> - 测试用例版本管理</li>
</ul>
<h2 id="实现细节">实现细节<a hidden class="anchor" aria-hidden="true" href="#实现细节">#</a></h2>
<h3 id="项目结构">项目结构<a hidden class="anchor" aria-hidden="true" href="#项目结构">#</a></h3>
<pre tabindex="0"><code>api-testing-tool/
├── src/
│   ├── api_tester/          # 核心模块
│   │   ├── core/           # 核心功能
│   │   ├── assertions/     # 断言方法
│   │   ├── reporters/      # 报告生成
│   │   ├── plugins/        # 插件系统
│   │   └── utils/          # 工具函数
│   └── cli/                # 命令行界面
├── tests/                  # 测试用例
├── examples/               # 示例配置
├── docs/                   # 文档
└── plugins/                # 扩展插件
</code></pre><h3 id="核心类设计">核心类设计<a hidden class="anchor" aria-hidden="true" href="#核心类设计">#</a></h3>
<h4 id="测试执行器">测试执行器<a hidden class="anchor" aria-hidden="true" href="#测试执行器">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">APITestRunner</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">TestConfig</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">reporter</span> <span class="o">=</span> <span class="n">Reporter</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">report_format</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">run_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_case</span><span class="p">:</span> <span class="n">TestCase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TestResult</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;执行单个测试用例&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_request</span><span class="p">(</span><span class="n">test_case</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">execution_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">            <span class="n">result</span> <span class="o">=</span> <span class="n">TestResult</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">name</span><span class="o">=</span><span class="n">test_case</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">status</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_evaluate_response</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">test_case</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                <span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">execution_time</span><span class="o">=</span><span class="n">execution_time</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="cl">            
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">result</span> <span class="o">=</span> <span class="n">TestResult</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">name</span><span class="o">=</span><span class="n">test_case</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">status</span><span class="o">=</span><span class="n">TestStatus</span><span class="o">.</span><span class="n">FAILED</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">error</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                <span class="n">execution_time</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">result</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">run_suite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_suite</span><span class="p">:</span> <span class="n">TestSuite</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TestSuiteResult</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;执行测试套件&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">test_suite</span><span class="o">.</span><span class="n">parallel</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">with</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="n">test_suite</span><span class="o">.</span><span class="n">max_workers</span><span class="p">)</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">futures</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                    <span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">,</span> <span class="n">test_case</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">                    <span class="k">for</span> <span class="n">test_case</span> <span class="ow">in</span> <span class="n">test_suite</span><span class="o">.</span><span class="n">test_cases</span>
</span></span><span class="line"><span class="cl">                <span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span> <span class="k">for</span> <span class="n">future</span> <span class="ow">in</span> <span class="n">futures</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">results</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">run_test</span><span class="p">(</span><span class="n">test_case</span><span class="p">)</span> 
</span></span><span class="line"><span class="cl">                <span class="k">for</span> <span class="n">test_case</span> <span class="ow">in</span> <span class="n">test_suite</span><span class="o">.</span><span class="n">test_cases</span>
</span></span><span class="line"><span class="cl">            <span class="p">]</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">TestSuiteResult</span><span class="p">(</span><span class="n">results</span><span class="o">=</span><span class="n">results</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="断言系统">断言系统<a hidden class="anchor" aria-hidden="true" href="#断言系统">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">AssertionEngine</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nd">@staticmethod</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">assert_status_code</span><span class="p">(</span><span class="n">response</span><span class="p">:</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">,</span> <span class="n">expected</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;断言状态码&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="n">expected</span><span class="p">,</span> \
</span></span><span class="line"><span class="cl">            <span class="sa">f</span><span class="s2">&#34;Expected status code </span><span class="si">{</span><span class="n">expected</span><span class="si">}</span><span class="s2">, got </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="nd">@staticmethod</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">assert_json_schema</span><span class="p">(</span><span class="n">response</span><span class="p">:</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;断言JSON响应结构&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">data</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="n">jsonschema</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="n">jsonschema</span><span class="o">.</span><span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;JSON schema validation failed: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="nd">@staticmethod</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">assert_response_time</span><span class="p">(</span><span class="n">response</span><span class="p">:</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">,</span> <span class="n">max_time</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;断言响应时间&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">elapsed</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="n">max_time</span><span class="p">,</span> \
</span></span><span class="line"><span class="cl">            <span class="sa">f</span><span class="s2">&#34;Response time </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">elapsed</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span><span class="si">}</span><span class="s2">s exceeds </span><span class="si">{</span><span class="n">max_time</span><span class="si">}</span><span class="s2">s&#34;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="nd">@staticmethod</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">assert_contains</span><span class="p">(</span><span class="n">response</span><span class="p">:</span> <span class="n">requests</span><span class="o">.</span><span class="n">Response</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;断言响应包含指定文本&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">assert</span> <span class="n">text</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> \
</span></span><span class="line"><span class="cl">            <span class="sa">f</span><span class="s2">&#34;Response does not contain expected text: </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="配置文件示例">配置文件示例<a hidden class="anchor" aria-hidden="true" href="#配置文件示例">#</a></h3>
<h4 id="yaml配置">YAML配置<a hidden class="anchor" aria-hidden="true" href="#yaml配置">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># api-test-config.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">environments</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">development</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">base_url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://dev-api.example.com&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">headers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">Authorization</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Bearer dev-token&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">production</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">base_url</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;https://api.example.com&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">headers</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">Authorization</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;Bearer prod-token&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">test_suites</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;用户API测试&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">parallel</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">max_workers</span><span class="p">:</span><span class="w"> </span><span class="m">5</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">test_cases</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;获取用户列表&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;GET&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">endpoint</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/users&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">assertions</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;status_code&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="m">200</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;response_time&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="m">2.0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;json_schema&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;array&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">              </span><span class="nt">items</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;object&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="nt">properties</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                  </span><span class="nt">id</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;integer&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                  </span><span class="nt">name</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;string&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;创建新用户&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;POST&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">endpoint</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;/users&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">data</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;测试用户&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="nt">email</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;test@example.com&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">assertions</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;status_code&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="m">201</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;contains&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;用户创建成功&#34;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="命令行界面">命令行界面<a hidden class="anchor" aria-hidden="true" href="#命令行界面">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="nd">@click.group</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nd">@click.version_option</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">cli</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;API测试自动化工具&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">pass</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nd">@cli.command</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--config&#39;</span><span class="p">,</span> <span class="s1">&#39;-c&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;api-test-config.yaml&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;配置文件路径&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--environment&#39;</span><span class="p">,</span> <span class="s1">&#39;-e&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;development&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;测试环境&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--report&#39;</span><span class="p">,</span> <span class="s1">&#39;-r&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;报告格式&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--output&#39;</span><span class="p">,</span> <span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;test-report&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;报告输出目录&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">environment</span><span class="p">,</span> <span class="n">report</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;运行API测试&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">test_config</span> <span class="o">=</span> <span class="n">load_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">environment</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">runner</span> <span class="o">=</span> <span class="n">APITestRunner</span><span class="p">(</span><span class="n">test_config</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;开始运行API测试 (环境: </span><span class="si">{</span><span class="n">environment</span><span class="si">}</span><span class="s2">)&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="n">results</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">run_all_tests</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="n">reporter</span> <span class="o">=</span> <span class="n">Reporter</span><span class="p">(</span><span class="n">report</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">reporter</span><span class="o">.</span><span class="n">generate_report</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;测试完成，报告已生成到: </span><span class="si">{</span><span class="n">output</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;测试执行失败: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="插件系统">插件系统<a hidden class="anchor" aria-hidden="true" href="#插件系统">#</a></h2>
<h3 id="插件接口">插件接口<a hidden class="anchor" aria-hidden="true" href="#插件接口">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">PluginInterface</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">before_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_case</span><span class="p">:</span> <span class="n">TestCase</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;测试前钩子&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">pass</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">after_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_case</span><span class="p">:</span> <span class="n">TestCase</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="n">TestResult</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;测试后钩子&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">pass</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">before_suite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_suite</span><span class="p">:</span> <span class="n">TestSuite</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;测试套件前钩子&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">pass</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">after_suite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_suite</span><span class="p">:</span> <span class="n">TestSuite</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="n">TestSuiteResult</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;测试套件后钩子&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">pass</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="示例插件---数据库清理">示例插件 - 数据库清理<a hidden class="anchor" aria-hidden="true" href="#示例插件---数据库清理">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DatabaseCleanupPlugin</span><span class="p">(</span><span class="n">PluginInterface</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_connection_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">db_connection</span> <span class="o">=</span> <span class="n">create_connection</span><span class="p">(</span><span class="n">db_connection_string</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">before_test</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">test_case</span><span class="p">:</span> <span class="n">TestCase</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;测试前清理测试数据&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">test_case</span><span class="o">.</span><span class="n">cleanup_data</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">_cleanup_test_data</span><span class="p">(</span><span class="n">test_case</span><span class="o">.</span><span class="n">cleanup_data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">_cleanup_test_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cleanup_config</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;执行数据清理&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">cleanup_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;tables&#39;</span><span class="p">,</span> <span class="p">[]):</span>
</span></span><span class="line"><span class="cl">            <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;DELETE FROM </span><span class="si">{</span><span class="n">table</span><span class="si">}</span><span class="s2"> WHERE test_data = true&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">db_connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="测试报告">测试报告<a hidden class="anchor" aria-hidden="true" href="#测试报告">#</a></h2>
<h3 id="html报告特性">HTML报告特性<a hidden class="anchor" aria-hidden="true" href="#html报告特性">#</a></h3>
<ul>
<li><strong>交互式图表</strong> - 测试结果可视化</li>
<li><strong>详细日志</strong> - 请求/响应详情</li>
<li><strong>性能指标</strong> - 响应时间统计</li>
<li><strong>历史对比</strong> - 与历史测试结果对比</li>
<li><strong>错误分析</strong> - 失败用例分类统计</li>
</ul>
<h3 id="报告示例">报告示例<a hidden class="anchor" aria-hidden="true" href="#报告示例">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">HTMLReporter</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">generate_report</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">results</span><span class="p">:</span> <span class="n">TestSuiteResult</span><span class="p">,</span> <span class="n">output_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;&#34;&#34;生成HTML测试报告&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="n">template</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_template</span><span class="p">(</span><span class="s1">&#39;report_template.html&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="n">context</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;summary&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_summary</span><span class="p">(</span><span class="n">results</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;charts&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_charts</span><span class="p">(</span><span class="n">results</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;test_results&#39;</span><span class="p">:</span> <span class="n">results</span><span class="o">.</span><span class="n">results</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;generated_at&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="n">html_content</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        
</span></span><span class="line"><span class="cl">        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">output_path</span><span class="si">}</span><span class="s2">/report.html&#34;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">html_content</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="部署与分发">部署与分发<a hidden class="anchor" aria-hidden="true" href="#部署与分发">#</a></h2>
<h3 id="pypi发布">PyPI发布<a hidden class="anchor" aria-hidden="true" href="#pypi发布">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># setup.py</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">setup</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">name</span><span class="o">=</span><span class="s2">&#34;api-testing-tool&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">version</span><span class="o">=</span><span class="s2">&#34;1.0.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;requests&gt;=2.25.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;pytest&gt;=6.0.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;click&gt;=8.0.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;jsonschema&gt;=3.2.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;jinja2&gt;=3.0.0&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;allure-pytest&gt;=2.9.0&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;console_scripts&#39;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;api-test=api_tester.cli:cli&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="n">author</span><span class="o">=</span><span class="s2">&#34;Your Name&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">author_email</span><span class="o">=</span><span class="s2">&#34;your.email@example.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">description</span><span class="o">=</span><span class="s2">&#34;API测试自动化工具&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">long_description</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s2">&#34;README.md&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">    <span class="n">long_description_content_type</span><span class="o">=</span><span class="s2">&#34;text/markdown&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">url</span><span class="o">=</span><span class="s2">&#34;https://github.com/yourusername/api-testing-tool&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">classifiers</span><span class="o">=</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Development Status :: 4 - Beta&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Intended Audience :: Developers&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;License :: OSI Approved :: MIT License&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Programming Language :: Python :: 3&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Programming Language :: Python :: 3.8&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Programming Language :: Python :: 3.9&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Programming Language :: Python :: 3.10&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">],</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="docker支持">Docker支持<a hidden class="anchor" aria-hidden="true" href="#docker支持">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># Dockerfile</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="w"> </span><span class="s">python:3.9-slim</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> requirements.txt .<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> pip install --no-cache-dir -r requirements.txt<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> src/ ./src/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> examples/ ./examples/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> pip install -e .<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ENTRYPOINT</span> <span class="p">[</span><span class="s2">&#34;api-test&#34;</span><span class="p">]</span><span class="err">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="项目成果">项目成果<a hidden class="anchor" aria-hidden="true" href="#项目成果">#</a></h2>
<ul>
<li><strong>开源社区</strong> - GitHub星标1000+，Fork 200+</li>
<li><strong>用户反馈</strong> - 50+企业用户，积极反馈和贡献</li>
<li><strong>文档完善</strong> - 详细的API文档和使用指南</li>
<li><strong>持续更新</strong> - 定期发布新版本，修复问题和添加功能</li>
<li><strong>生态建设</strong> - 10+社区插件，扩展工具功能</li>
</ul>
<h2 id="未来规划">未来规划<a hidden class="anchor" aria-hidden="true" href="#未来规划">#</a></h2>
<ul>
<li><strong>GUI界面</strong> - 开发图形化测试配置界面</li>
<li><strong>云服务</strong> - 提供云端测试执行服务</li>
<li><strong>更多协议</strong> - 支持gRPC、WebSocket等协议</li>
<li><strong>AI辅助</strong> - 智能测试用例生成和优化</li>
<li><strong>企业版</strong> - 提供企业级功能和支持服务</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://example.org/tags/%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7/">开源工具</a></li>
      <li><a href="https://example.org/tags/api%E6%B5%8B%E8%AF%95/">API测试</a></li>
      <li><a href="https://example.org/tags/%E8%87%AA%E5%8A%A8%E5%8C%96/">自动化</a></li>
      <li><a href="https://example.org/tags/python/">Python</a></li>
      <li><a href="https://example.org/tags/%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6/">测试框架</a></li>
    </ul>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share API测试自动化工具 on x"
            href="https://x.com/intent/tweet/?text=API%e6%b5%8b%e8%af%95%e8%87%aa%e5%8a%a8%e5%8c%96%e5%b7%a5%e5%85%b7&amp;url=https%3a%2f%2fexample.org%2fprojects%2fapi-testing-tool%2f&amp;hashtags=%e5%bc%80%e6%ba%90%e5%b7%a5%e5%85%b7%2cAPI%e6%b5%8b%e8%af%95%2c%e8%87%aa%e5%8a%a8%e5%8c%96%2cPython%2c%e6%b5%8b%e8%af%95%e6%a1%86%e6%9e%b6">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share API测试自动化工具 on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fexample.org%2fprojects%2fapi-testing-tool%2f&amp;title=API%e6%b5%8b%e8%af%95%e8%87%aa%e5%8a%a8%e5%8c%96%e5%b7%a5%e5%85%b7&amp;summary=API%e6%b5%8b%e8%af%95%e8%87%aa%e5%8a%a8%e5%8c%96%e5%b7%a5%e5%85%b7&amp;source=https%3a%2f%2fexample.org%2fprojects%2fapi-testing-tool%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share API测试自动化工具 on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fexample.org%2fprojects%2fapi-testing-tool%2f&title=API%e6%b5%8b%e8%af%95%e8%87%aa%e5%8a%a8%e5%8c%96%e5%b7%a5%e5%85%b7">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share API测试自动化工具 on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fexample.org%2fprojects%2fapi-testing-tool%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share API测试自动化工具 on whatsapp"
            href="https://api.whatsapp.com/send?text=API%e6%b5%8b%e8%af%95%e8%87%aa%e5%8a%a8%e5%8c%96%e5%b7%a5%e5%85%b7%20-%20https%3a%2f%2fexample.org%2fprojects%2fapi-testing-tool%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share API测试自动化工具 on telegram"
            href="https://telegram.me/share/url?text=API%e6%b5%8b%e8%af%95%e8%87%aa%e5%8a%a8%e5%8c%96%e5%b7%a5%e5%85%b7&amp;url=https%3a%2f%2fexample.org%2fprojects%2fapi-testing-tool%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share API测试自动化工具 on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=API%e6%b5%8b%e8%af%95%e8%87%aa%e5%8a%a8%e5%8c%96%e5%b7%a5%e5%85%b7&u=https%3a%2f%2fexample.org%2fprojects%2fapi-testing-tool%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://example.org/">创客教育者与嵌入式开发者</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
