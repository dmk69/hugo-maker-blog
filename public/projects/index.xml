<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Projects on åˆ›å®¢æ•™è‚²åšå®¢</title>
    <link>http://localhost:1313/projects/</link>
    <description>Recent content in Projects on åˆ›å®¢æ•™è‚²åšå®¢</description>
    <image>
      <title>åˆ›å®¢æ•™è‚²åšå®¢</title>
      <url>http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</url>
      <link>http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</link>
    </image>
    <generator>Hugo -- 0.152.2</generator>
    <language>zh-cn</language>
    <lastBuildDate>Wed, 12 Nov 2025 12:00:00 +0800</lastBuildDate>
    <atom:link href="http://localhost:1313/projects/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>æ™ºèƒ½ç”Ÿäº§çº¿æ§åˆ¶ç³»ç»Ÿ</title>
      <link>http://localhost:1313/projects/plc-production-line/</link>
      <pubDate>Wed, 12 Nov 2025 10:00:00 +0800</pubDate>
      <guid>http://localhost:1313/projects/plc-production-line/</guid>
      <description>&lt;h2 id=&#34;-é¡¹ç›®æ¦‚è¿°&#34;&gt;ğŸ­ é¡¹ç›®æ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªåŸºäºSiemens S7-1500 PLCçš„æ™ºèƒ½ç”Ÿäº§çº¿æ§åˆ¶ç³»ç»Ÿï¼Œå®ç°äº†ä»ç‰©æ–™è¾“å…¥åˆ°æˆå“è¾“å‡ºçš„å…¨è‡ªåŠ¨åŒ–æ§åˆ¶æµç¨‹ã€‚è¯¥é¡¹ç›®å±•ç¤ºäº†åœ¨å·¥ä¸š4.0èƒŒæ™¯ä¸‹ï¼Œå¦‚ä½•é€šè¿‡å…ˆè¿›çš„PLCç¼–ç¨‹æŠ€æœ¯å®ç°ç”Ÿäº§çº¿çš„æ™ºèƒ½åŒ–æ”¹é€ ã€‚&lt;/p&gt;
&lt;h2 id=&#34;-é¡¹ç›®ç›®æ ‡&#34;&gt;ğŸ¯ é¡¹ç›®ç›®æ ‡&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å®ç°ç”Ÿäº§çº¿å…¨æµç¨‹è‡ªåŠ¨åŒ–æ§åˆ¶&lt;/li&gt;
&lt;li&gt;æé«˜ç”Ÿäº§æ•ˆç‡å’Œäº§å“è´¨é‡&lt;/li&gt;
&lt;li&gt;é™ä½äººå·¥æ“ä½œé”™è¯¯ç‡&lt;/li&gt;
&lt;li&gt;å»ºç«‹å®Œå–„çš„æ•°æ®é‡‡é›†å’Œç›‘æ§ç³»ç»Ÿ&lt;/li&gt;
&lt;li&gt;å®ç°è®¾å¤‡é—´çš„æ™ºèƒ½è”åŠ¨&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;-ç³»ç»Ÿæ¶æ„&#34;&gt;ğŸ”§ ç³»ç»Ÿæ¶æ„&lt;/h2&gt;
&lt;h3 id=&#34;ç¡¬ä»¶é…ç½®&#34;&gt;ç¡¬ä»¶é…ç½®&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æ ¸å¿ƒæ§åˆ¶å™¨:
â”œâ”€â”€ Siemens S7-1515F-2 PN (CPU)
â”œâ”€â”€ SM 521 16Ã—24VDC DI (æ•°å­—é‡è¾“å…¥)
â”œâ”€â”€ SM 522 16Ã—24VDC DO (æ•°å­—é‡è¾“å‡º)
â”œâ”€â”€ SM 431 8Ã—AI (æ¨¡æ‹Ÿé‡è¾“å…¥)
â”œâ”€â”€ SM 432 8Ã—AO (æ¨¡æ‹Ÿé‡è¾“å‡º)
â””â”€â”€ CM 1542-5 (PROFIBUS-DP)

äººæœºç•Œé¢:
â”œâ”€â”€ Siemens TP1200 Comfort (12è‹±å¯¸è§¦æ‘¸å±)
â”œâ”€â”€ WinCC Comfort Runtime V15.1
â””â”€â”€ ä»¥å¤ªç½‘é€šä¿¡è¿æ¥

I/Oè®¾å¤‡:
â”œâ”€â”€ æ¥è¿‘å¼€å…³ (æ£€æµ‹å·¥ä»¶ä½ç½®)
â”œâ”€â”€ å…‰ç”µä¼ æ„Ÿå™¨ (å®‰å…¨åŒºåŸŸæ£€æµ‹)
â”œâ”€â”€ å‹åŠ›ä¼ æ„Ÿå™¨ (æ¶²å‹ç³»ç»Ÿç›‘æ§)
â”œâ”€â”€ æ¸©åº¦ä¼ æ„Ÿå™¨ (ç”µæœºæ¸©åº¦ä¿æŠ¤)
â”œâ”€â”€ å˜é¢‘å™¨ (ç”µæœºé€Ÿåº¦æ§åˆ¶)
â””â”€â”€ ä¼ºæœé©±åŠ¨å™¨ (ç²¾ç¡®å®šä½)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;ç½‘ç»œæ‹“æ‰‘&#34;&gt;ç½‘ç»œæ‹“æ‰‘&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;PROFINETç½‘ç»œæ¶æ„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SCADAç³»ç»Ÿ     â”‚
â”‚   (ä¸Šä½æœºç›‘æ§)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ PROFINET
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚   S7-1500 PLC   â”‚
â”‚   (ä¸»æ§åˆ¶å™¨)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
    â”Œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”
    â”‚     â”‚     â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”â”Œâ”€â–¼â”€â”€â”€â”â”Œâ”€â–¼â”€â”€â”€â”€â”
â”‚TP1200 â”‚â”‚å˜é¢‘å™¨â”‚â”‚ä¼ºæœ  â”‚
â”‚HMI    â”‚â”‚     â”‚â”‚é©±åŠ¨å™¨ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”˜
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;-plcç¨‹åºè®¾è®¡&#34;&gt;ğŸ’» PLCç¨‹åºè®¾è®¡&lt;/h2&gt;
&lt;h3 id=&#34;ä¸»ç¨‹åºç»“æ„-ob1&#34;&gt;ä¸»ç¨‹åºç»“æ„ (OB1)&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-scl&#34; data-lang=&#34;scl&#34;&gt;// ä¸»ç¨‹åºå¾ªç¯
DATA_BLOCK &amp;#34;ProductionData&amp;#34;
BEGIN
    // ç”Ÿäº§æ•°æ®ç»“æ„
    CurrentStep : INT := 0;
    PartCount : DINT := 0;
    CycleTime : TIME := T#5S;
    SystemStatus : WORD := 16#0000;
END_DATA_BLOCK

ORGANIZATION_BLOCK OB1
BEGIN
    // ç³»ç»ŸçŠ¶æ€ç›‘æ§
    CALL &amp;#34;SystemStatusCheck&amp;#34;;

    // è‡ªåŠ¨è¿è¡Œæ¨¡å¼
    IF &amp;#34;AutoMode&amp;#34; THEN
        CALL &amp;#34;AutoProductionSequence&amp;#34;;
    END_IF;

    // æ‰‹åŠ¨æ“ä½œæ¨¡å¼
    IF &amp;#34;ManualMode&amp;#34; THEN
        CALL &amp;#34;ManualControl&amp;#34;;
    END_IF;

    // æ•…éšœè¯Šæ–­
    CALL &amp;#34;Diagnostics&amp;#34;;

    // HMIé€šä¿¡
    CALL &amp;#34;HMI_Communication&amp;#34;;
END_ORGANIZATION_BLOCK
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;è‡ªåŠ¨ç”Ÿäº§åºåˆ—-fc101&#34;&gt;è‡ªåŠ¨ç”Ÿäº§åºåˆ— (FC101)&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-scl&#34; data-lang=&#34;scl&#34;&gt;FUNCTION &amp;#34;AutoProductionSequence&amp;#34; : VOID
VAR_INPUT
    StartSignal : BOOL;
    EmergencyStop : BOOL;
END_VAR
VAR_OUTPUT
    SequenceComplete : BOOL;
END_VAR
VAR
    StepCounter : INT := 0;
    TimerValue : TIME;
END_VAR

BEGIN
    // ç”Ÿäº§æ­¥éª¤æ§åˆ¶
    CASE &amp;#34;ProductionData&amp;#34;.CurrentStep OF
        0: // åˆå§‹çŠ¶æ€ - ç­‰å¾…å¯åŠ¨
            IF StartSignal AND NOT EmergencyStop THEN
                &amp;#34;Conveyor_Motor&amp;#34; := TRUE;
                TimerValue := T#2S;
                &amp;#34;ProductionData&amp;#34;.CurrentStep := 1;
            END_IF;

        1: // å·¥ä»¶è¾“é€
            IF &amp;#34;Workpiece_Detected&amp;#34; AND TimerValue = T#0S THEN
                &amp;#34;Lifting_Cylinder&amp;#34; := TRUE;
                TimerValue := T#1S;
                &amp;#34;ProductionData&amp;#34;.CurrentStep := 2;
            END_IF;

        2: // å·¥ä»¶æå‡
            IF &amp;#34;Lift_Up_Position&amp;#34; AND TimerValue = T#0S THEN
                &amp;#34;Servo_Positioning&amp;#34; := TRUE;
                &amp;#34;Servo_Target_Position&amp;#34; := 1500; // 15mm
                TimerValue := T#3S;
                &amp;#34;ProductionData&amp;#34;.CurrentStep := 3;
            END_IF;

        3: // ç²¾ç¡®å®šä½
            IF &amp;#34;Servo_In_Position&amp;#34; AND TimerValue = T#0S THEN
                &amp;#34;Processing_Station&amp;#34; := TRUE;
                TimerValue := T#8S; // åŠ å·¥æ—¶é—´
                &amp;#34;ProductionData&amp;#34;.CurrentStep := 4;
            END_IF;

        4: // åŠ å·¥å®Œæˆ
            IF &amp;#34;Process_Complete&amp;#34; AND TimerValue = T#0S THEN
                &amp;#34;Lifting_Cylinder&amp;#34; := FALSE;
                &amp;#34;Servo_Home&amp;#34; := TRUE;
                TimerValue := T#2S;
                &amp;#34;ProductionData&amp;#34;.CurrentStep := 5;
            END_IF;

        5: // å¤ä½åˆ°åˆå§‹çŠ¶æ€
            IF &amp;#34;Lift_Down_Position&amp;#34; AND &amp;#34;Servo_Home_Position&amp;#34; THEN
                &amp;#34;ProductionData&amp;#34;.CurrentStep := 0;
                &amp;#34;ProductionData&amp;#34;.PartCount := &amp;#34;ProductionData&amp;#34;.PartCount + 1;
                SequenceComplete := TRUE;
            END_IF;
    END_CASE;

    // å®šæ—¶å™¨å¤„ç†
    IF TimerValue &amp;gt; T#0S THEN
        TimerValue := TimerValue - T#1CYCLE;
    END_IF;

    // æ€¥åœå¤„ç†
    IF EmergencyStop THEN
        &amp;#34;Conveyor_Motor&amp;#34; := FALSE;
        &amp;#34;Lifting_Cylinder&amp;#34; := FALSE;
        &amp;#34;Servo_Positioning&amp;#34; := FALSE;
        &amp;#34;Processing_Station&amp;#34; := FALSE;
        &amp;#34;ProductionData&amp;#34;.CurrentStep := 0;
    END_IF;
END_FUNCTION
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•…éšœè¯Šæ–­åŠŸèƒ½-fc102&#34;&gt;æ•…éšœè¯Šæ–­åŠŸèƒ½ (FC102)&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-scl&#34; data-lang=&#34;scl&#34;&gt;FUNCTION &amp;#34;Diagnostics&amp;#34; : VOID
VAR_INPUT
END_VAR
VAR_OUTPUT
    AlarmText : STRING[80];
    AlarmLevel : INT;
END_VAR
VAR
    ErrorCode : WORD;
END_VAR

BEGIN
    // ç”µæœºè¿‡çƒ­æ£€æµ‹
    IF &amp;#34;Motor_Temperature&amp;#34; &amp;gt; 80.0 THEN
        ErrorCode := 16#0001;
        AlarmLevel := 2; // è­¦å‘Š
        AlarmText := &amp;#39;Motor temperature warning: Over 80Â°C&amp;#39;;
    ELSIF &amp;#34;Motor_Temperature&amp;#34; &amp;gt; 90.0 THEN
        ErrorCode := 16#0002;
        AlarmLevel := 3; // ä¸¥é‡æ•…éšœ
        AlarmText := &amp;#39;Motor overheat fault: System shutdown required&amp;#39;;
        &amp;#34;Emergency_Stop&amp;#34; := TRUE;
    END_IF;

    // æ°”å‹æ£€æµ‹
    IF &amp;#34;Air_Pressure&amp;#34; &amp;lt; 5.0 THEN
        ErrorCode := 16#0010;
        AlarmLevel := 2;
        AlarmText := &amp;#39;Low air pressure: Check pneumatic system&amp;#39;;
    END_IF;

    // ä¼ æ„Ÿå™¨æ•…éšœæ£€æµ‹
    IF NOT &amp;#34;Sensor_Signal_OK&amp;#34; THEN
        ErrorCode := 16#0020;
        AlarmLevel := 2;
        AlarmText := &amp;#39;Sensor communication fault: Check connections&amp;#39;;
    END_IF;

    // æ€¥åœæŒ‰é’®çŠ¶æ€
    IF &amp;#34;Emergency_Stop_Pressed&amp;#34; THEN
        ErrorCode := 16#00FF;
        AlarmLevel := 3;
        AlarmText := &amp;#39;EMERGENCY STOP ACTIVATED&amp;#39;;
    END_IF;

    // å†™å…¥æŠ¥è­¦å†å²
    IF ErrorCode &amp;lt;&amp;gt; 16#0000 THEN
        &amp;#34;AlarmHistory&amp;#34;.Write(
            Timestamp := CURRENT_TIME,
            Code := ErrorCode,
            Level := AlarmLevel,
            Message := AlarmText
        );
    END_IF;
END_FUNCTION
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;-hmiç•Œé¢è®¾è®¡&#34;&gt;ğŸ–¥ï¸ HMIç•Œé¢è®¾è®¡&lt;/h2&gt;
&lt;h3 id=&#34;ä¸»ç›‘æ§ç”»é¢&#34;&gt;ä¸»ç›‘æ§ç”»é¢&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ç”»é¢å¸ƒå±€ (TP1200 12è‹±å¯¸):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”Ÿäº§çŠ¶æ€ç›‘æ§        â”‚  æŠ¥è­¦ä¿¡æ¯  â”‚
â”‚                     â”‚            â”‚
â”‚  â— è‡ªåŠ¨æ¨¡å¼          â”‚  ğŸŸ¢ æ­£å¸¸   â”‚
â”‚  â— è¿è¡Œä¸­            â”‚  ğŸŸ¡ è­¦å‘Š   â”‚
â”‚  â— äº§é‡: 1,247ä»¶     â”‚  ğŸ”´ æ•…éšœ   â”‚
â”‚  â— æ•ˆç‡: 98.5%       â”‚            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è®¾å¤‡çŠ¶æ€æ˜¾ç¤ºåŒºåŸŸ                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ä¼ é€å¸¦â”‚ â”‚æå‡æœºâ”‚ â”‚ä¼ºæœ â”‚ â”‚åŠ å·¥ç«™â”‚ â”‚
â”‚  â”‚è¿è¡Œä¸­â”‚ â”‚ä¸Šå‡  â”‚ â”‚å®šä½  â”‚ â”‚åŠ å·¥ä¸­â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ§åˆ¶æŒ‰é’®åŒºåŸŸ                      â”‚
â”‚  [å¯åŠ¨] [åœæ­¢] [å¤ä½] [æ€¥åœ]        â”‚
â”‚  [è‡ªåŠ¨æ¨¡å¼] [æ‰‹åŠ¨æ¨¡å¼] [å‚æ•°è®¾ç½®]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å®æ—¶æ•°æ®æ˜¾ç¤º                      â”‚
â”‚  æ¸©åº¦: 45.2Â°C  å‹åŠ›: 6.8 Bar       â”‚
â”‚  å¾ªç¯æ—¶é—´: 5.2s  OEE: 94.3%        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;å‚æ•°è®¾ç½®ç•Œé¢&#34;&gt;å‚æ•°è®¾ç½®ç•Œé¢&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-scl&#34; data-lang=&#34;scl&#34;&gt;// HMIè„šæœ¬ç¤ºä¾‹ - å‚æ•°éªŒè¯
FUNCTION &amp;#34;ValidateParameters&amp;#34; : BOOL
VAR_INPUT
    NewSpeed : REAL;
    NewPosition : DINT;
    NewTemperature : REAL;
END_VAR
VAR
    ValidParameters : BOOL := TRUE;
END_VAR

BEGIN
    // é€Ÿåº¦å‚æ•°éªŒè¯ (0-100%)
    IF NewSpeed &amp;lt; 0.0 OR NewSpeed &amp;gt; 100.0 THEN
        &amp;#34;HMI_Alarm&amp;#34; := 16#0101;
        ValidParameters := FALSE;
    END_IF;

    // ä½ç½®å‚æ•°éªŒè¯ (0-5000mm)
    IF NewPosition &amp;lt; 0 OR NewPosition &amp;gt; 5000 THEN
        &amp;#34;HMI_Alarm&amp;#34; := 16#0102;
        ValidParameters := FALSE;
    END_IF;

    // æ¸©åº¦å‚æ•°éªŒè¯ (0-150Â°C)
    IF NewTemperature &amp;lt; 0.0 OR NewTemperature &amp;gt; 150.0 THEN
        &amp;#34;HMI_Alarm&amp;#34; := 16#0103;
        ValidParameters := FALSE;
    END_IF;

    ValidateParameters := ValidParameters;
END_FUNCTION
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;-æ•°æ®è®°å½•ä¸åˆ†æ&#34;&gt;ğŸ“Š æ•°æ®è®°å½•ä¸åˆ†æ&lt;/h2&gt;
&lt;h3 id=&#34;ç”Ÿäº§æ•°æ®è®°å½•&#34;&gt;ç”Ÿäº§æ•°æ®è®°å½•&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-scl&#34; data-lang=&#34;scl&#34;&gt;// ç”Ÿäº§æ•°æ®è®°å½•åŠŸèƒ½
FUNCTION &amp;#34;LogProductionData&amp;#34; : VOID
VAR_INPUT
END_VAR
VAR
    DataRecord : STRUCT
        Timestamp : DATE_AND_TIME;
        PartCount : DINT;
        CycleTime : TIME;
        QualityCount : DINT;
        RejectCount : DINT;
    END_STRUCT;
END_VAR

BEGIN
    // æ¯å°æ—¶è®°å½•ä¸€æ¬¡ç”Ÿäº§æ•°æ®
    IF &amp;#34;Timer_Hourly&amp;#34;.Q THEN
        DataRecord.Timestamp := CURRENT_TIME;
        DataRecord.PartCount := &amp;#34;ProductionData&amp;#34;.PartCount;
        DataRecord.CycleTime := &amp;#34;Current_CycleTime&amp;#34;;
        DataRecord.QualityCount := &amp;#34;QualityParts&amp;#34;;
        DataRecord.RejectCount := &amp;#34;RejectParts&amp;#34;;

        // å†™å…¥æ•°æ®æ—¥å¿—
        &amp;#34;ProductionLog&amp;#34;.Write(DataRecord);

        // é‡ç½®å°æ—¶è®¡æ•°å™¨
        &amp;#34;Timer_Hourly&amp;#34;.RESET := TRUE;
    END_IF;
END_FUNCTION
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;oeeè®¡ç®—&#34;&gt;OEEè®¡ç®—&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-scl&#34; data-lang=&#34;scl&#34;&gt;// è®¾å¤‡ç»¼åˆæ•ˆç‡è®¡ç®—
FUNCTION &amp;#34;CalculateOEE&amp;#34; : REAL
VAR_INPUT
    PlannedProductionTime : TIME;
    ActualProductionTime : TIME;
    IdealCycleTime : TIME;
    TotalParts : DINT;
    GoodParts : DINT;
END_VAR
VAR
    Availability : REAL;
    Performance : REAL;
    Quality : REAL;
END_VAR

BEGIN
    // å¯ç”¨ç‡ = å®é™…è¿è¡Œæ—¶é—´ / è®¡åˆ’ç”Ÿäº§æ—¶é—´
    Availability := TIME_TO_REAL(ActualProductionTime) /
                   TIME_TO_REAL(PlannedProductionTime);

    // æ€§èƒ½ç‡ = (ç†æƒ³å¾ªç¯æ—¶é—´ Ã— æ€»äº§é‡) / å®é™…è¿è¡Œæ—¶é—´
    Performance := (TIME_TO_REAL(IdealCycleTime) * DINT_TO_REAL(TotalParts)) /
                  TIME_TO_REAL(ActualProductionTime);

    // è´¨é‡ç‡ = åˆæ ¼å“æ•°é‡ / æ€»äº§é‡
    Quality := DINT_TO_REAL(GoodParts) / DINT_TO_REAL(TotalParts);

    // OEE = å¯ç”¨ç‡ Ã— æ€§èƒ½ç‡ Ã— è´¨é‡ç‡
    CalculateOEE := Availability * Performance * Quality;
END_FUNCTION
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;-å®‰è£…è°ƒè¯•è¿‡ç¨‹&#34;&gt;ğŸ”§ å®‰è£…è°ƒè¯•è¿‡ç¨‹&lt;/h2&gt;
&lt;h3 id=&#34;ç³»ç»Ÿè°ƒè¯•æ­¥éª¤&#34;&gt;ç³»ç»Ÿè°ƒè¯•æ­¥éª¤&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;ç¡¬ä»¶æ£€æŸ¥&lt;/strong&gt; (2å¤©)&lt;/p&gt;</description>
    </item>
    <item>
      <title>å·¥å‚è‡ªåŠ¨åŒ–ç›‘æ§ç³»ç»Ÿ</title>
      <link>http://localhost:1313/projects/factory-automation/</link>
      <pubDate>Wed, 12 Nov 2025 11:00:00 +0800</pubDate>
      <guid>http://localhost:1313/projects/factory-automation/</guid>
      <description>&lt;h2 id=&#34;-é¡¹ç›®æ¦‚è¿°&#34;&gt;ğŸ­ é¡¹ç›®æ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªåŸºäºAllen-Bradley ControlLogix PLCå’ŒFactoryTalk View SEçš„å·¥å‚è‡ªåŠ¨åŒ–ç›‘æ§ç³»ç»Ÿï¼Œå®ç°äº†å¯¹æ•´ä¸ªå·¥å‚ç”Ÿäº§åŒºåŸŸçš„é›†ä¸­ç›‘æ§å’Œæ•°æ®é‡‡é›†ã€‚ç³»ç»Ÿè¦†ç›–äº†åŸæ–™å¤„ç†ã€ç”Ÿäº§åˆ¶é€ ã€è´¨é‡æ£€æµ‹ã€ä»“å‚¨ç‰©æµç­‰å…¨æµç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;-é¡¹ç›®ç›®æ ‡&#34;&gt;ğŸ¯ é¡¹ç›®ç›®æ ‡&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å»ºç«‹ç»Ÿä¸€çš„å·¥å‚ç›‘æ§å¹³å°&lt;/li&gt;
&lt;li&gt;å®ç°ç”Ÿäº§æ•°æ®å®æ—¶é‡‡é›†å’Œåˆ†æ&lt;/li&gt;
&lt;li&gt;æé«˜è®¾å¤‡åˆ©ç”¨ç‡å’Œç”Ÿäº§æ•ˆç‡&lt;/li&gt;
&lt;li&gt;å»ºç«‹é¢„è­¦å’ŒæŠ¥è­¦æœºåˆ¶&lt;/li&gt;
&lt;li&gt;æ”¯æŒç§»åŠ¨ç«¯è¿œç¨‹ç›‘æ§&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;-ç³»ç»Ÿæ¶æ„&#34;&gt;ğŸ”§ ç³»ç»Ÿæ¶æ„&lt;/h2&gt;
&lt;h3 id=&#34;ç¡¬ä»¶ç½‘ç»œæ¶æ„&#34;&gt;ç¡¬ä»¶ç½‘ç»œæ¶æ„&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;å·¥å‚ç½‘ç»œæ‹“æ‰‘:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ControlLogix L73æ§åˆ¶å™¨                   â”‚
â”‚              (ä¸»PLC - 1756-L73)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ EtherNet/IP (å†—ä½™ç¯ç½‘)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     â”‚                â”‚                â”‚              â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚ åŸæ–™å¤„ç†åŒº  â”‚   â”‚ ç”Ÿäº§åˆ¶é€ åŒº  â”‚   â”‚ è´¨é‡æ£€æµ‹åŒº  â”‚   â”‚ ä»“å‚¨ç‰©æµåŒº  â”‚
â”‚ CompactLogixâ”‚   â”‚ ControlLogixâ”‚   â”‚ CompactLogixâ”‚   â”‚ MicroLogix â”‚
â”‚ 1769-L30ER â”‚   â”‚ 1756-L72  â”‚   â”‚ 1769-L30ER â”‚   â”‚ 1769-L33ER â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â”‚               â”‚               â”‚               â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚               â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ SCADAæœåŠ¡å™¨   â”‚ â”‚ HMIå·¥ä½œç«™     â”‚
            â”‚ FactoryTalk   â”‚ â”‚ PanelView Plusâ”‚
            â”‚ View SE       â”‚ â”‚ 1500          â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;plcé…ç½®æ¸…å•&#34;&gt;PLCé…ç½®æ¸…å•&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-excel&#34; data-lang=&#34;excel&#34;&gt;æ§åˆ¶å™¨é…ç½®:
ä¸»æ§åˆ¶å™¨ (1å°):
- Allen-Bradley 1756-L73 (ControlLogix)
- 1756-EN2T (EtherNet/IPæ¨¡å—)
- 1756-IR6I (6é€šé“RTDè¾“å…¥)
- 1756-OF4 (4é€šé“æ¨¡æ‹Ÿé‡è¾“å‡º)

åŒºåŸŸæ§åˆ¶å™¨ (4å°):
- åŸæ–™å¤„ç†åŒº: 1769-L30ER + 1769-IQ16 + 1769-OB8
- ç”Ÿäº§åˆ¶é€ åŒº: 1756-L72 + 1756-IB16 + 1756-OW16I
- è´¨é‡æ£€æµ‹åŒº: 1769-L30ER + 1769-IF4 + 1769-OF2
- ä»“å‚¨ç‰©æµåŒº: 1769-L33ER + 1769-IQ32

HMIè®¾å¤‡ (3å°):
- PanelView Plus 1500 (15å¯¸å½©è‰²è§¦æ‘¸å±)
- PanelView Plus 1000 (10å¯¸æ“ä½œé¢æ¿)
- ç§»åŠ¨å¹³æ¿ç”µè„‘ (æ— çº¿HMI)
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;-plcç¨‹åºå¼€å‘&#34;&gt;ğŸ’» PLCç¨‹åºå¼€å‘&lt;/h2&gt;
&lt;h3 id=&#34;ä¸»æ§åˆ¶ç¨‹åºç»“æ„&#34;&gt;ä¸»æ§åˆ¶ç¨‹åºç»“æ„&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-structured_text&#34; data-lang=&#34;structured_text&#34;&gt;// ä¸»ç¨‹åº - MainProgram
PROGRAM MainProgram
VAR
    // ç³»ç»ŸçŠ¶æ€å˜é‡
    SystemMode : DINT := 0; // 0=åœæ­¢, 1=æ‰‹åŠ¨, 2=è‡ªåŠ¨, 3=ç»´æŠ¤
    EmergencyActive : BOOL := FALSE;
    ProductionRunning : BOOL := FALSE;

    // ç”Ÿäº§ç»Ÿè®¡
    TotalProduction : DINT := 0;
    ShiftProduction : DINT := 0;
    HourlyProduction : ARRAY[0..23] OF DINT;

    // æŠ¥è­¦ç³»ç»Ÿ
    AlarmArray : ARRAY[1..100] OF AlarmStruct;
    AlarmCount : DINT := 0;

    // é€šä¿¡æ•°æ®
    SCADA_Data : SCADA_DataStruct;
    HMI_Commands : HMI_CommandStruct;
END_VAR

// ä¸»å¾ªç¯é€»è¾‘
IF SystemMode = 2 THEN // è‡ªåŠ¨æ¨¡å¼
    // æ‰§è¡Œç”Ÿäº§åºåˆ—
    ExecuteProductionSequence();

    // æ›´æ–°ç”Ÿäº§æ•°æ®
    UpdateProductionData();

    // æ£€æŸ¥æŠ¥è­¦æ¡ä»¶
    CheckAlarmConditions();

ELSIF SystemMode = 1 THEN // æ‰‹åŠ¨æ¨¡å¼
    ExecuteManualCommands();

ELSIF SystemMode = 3 THEN // ç»´æŠ¤æ¨¡å¼
    MaintenanceProcedures();
END_IF;

// æ•°æ®é€šä¿¡å¤„ç†
HandleSCADACommunication();
UpdateHMI_Display();

// æ€¥åœå¤„ç†
IF EmergencyActive THEN
    EmergencyShutdown();
END_IF
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;ç”Ÿäº§åºåˆ—æ§åˆ¶&#34;&gt;ç”Ÿäº§åºåˆ—æ§åˆ¶&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-structured_text&#34; data-lang=&#34;structured_text&#34;&gt;// ç”Ÿäº§åºåˆ—æ§åˆ¶å‡½æ•°
FUNCTION ExecuteProductionSequence : VOID
VAR_INPUT
END_VAR
VAR
    CurrentStep : DINT := 0;
    StepTimer : TIMER;
END_VAR

BEGIN
CASE CurrentStep OF
    0: // åˆå§‹çŠ¶æ€
        IF HMI_Commands.StartButton THEN
            CurrentStep := 10;
            StepTimer.PRE := 3000; // 3ç§’
            StepTimer.IN := TRUE;
        END_IF;

    10: // åŸæ–™å‡†å¤‡
        IF RawMaterialReady AND StepTimer.DN THEN
            CurrentStep := 20;
            StartConveyor(CONVEYOR_FEEDER);
            StepTimer.PRE := 5000; // 5ç§’
            StepTimer.IN := TRUE;
        END_IF;

    20: // ç‰©æ–™è¾“é€
        IF MaterialAtPosition(STATION_1) AND StepTimer.DN THEN
            CurrentStep := 30;
            StopConveyor(CONVEYOR_FEEDER);
            StartProcessing(STATION_1);
            StepTimer.PRE := 15000; // 15ç§’
            StepTimer.IN := TRUE;
        END_IF;

    30: // åŠ å·¥å¤„ç†
        IF ProcessComplete(STATION_1) AND StepTimer.DN THEN
            CurrentStep := 40;
            StartConveyor(CONVEYOR_MAIN);
            MoveToNextStation();
            StepTimer.PRE := 8000; // 8ç§’
            StepTimer.IN := TRUE;
        END_IF;

    40: // è´¨é‡æ£€æµ‹
        IF AtQualityStation() AND StepTimer.DN THEN
            CurrentStep := 50;
            StopConveyor(CONVEYOR_MAIN);
            StartQualityCheck();
            StepTimer.PRE := 10000; // 10ç§’
            StepTimer.IN := TRUE;
        END_IF;

    50: // ç»“æœå¤„ç†
        IF QualityCheckComplete() AND StepTimer.DN THEN
            IF QualityPass THEN
                // åˆæ ¼å“ - è¿›å…¥åŒ…è£…æµç¨‹
                CurrentStep := 60;
                StartPackaging();
            ELSE
                // ä¸åˆæ ¼å“ - è¿›å…¥è¿”å·¥æµç¨‹
                CurrentStep := 70;
                StartReworkProcess();
            END_IF;
            StepTimer.PRE := 5000;
            StepTimer.IN := TRUE;
        END_IF;

    60: // åŒ…è£…å®Œæˆ
        IF PackagingComplete() AND StepTimer.DN THEN
            CurrentStep := 0;
            TotalProduction := TotalProduction + 1;
            ShiftProduction := ShiftProduction + 1;
            HourlyProduction[GetCurrentHour()] :=
                HourlyProduction[GetCurrentHour()] + 1;
        END_IF;

    70: // è¿”å·¥å¤„ç†
        IF ReworkComplete() AND StepTimer.DN THEN
            CurrentStep := 20; // è¿”å›åˆ°åŠ å·¥æ­¥éª¤
        END_IF;
END_CASE;

// æ€¥åœå¤„ç†
IF EmergencyActive THEN
    StopAllEquipment();
    CurrentStep := 0;
END_IF;
END_FUNCTION
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;æ•°æ®è®°å½•åŠŸèƒ½&#34;&gt;æ•°æ®è®°å½•åŠŸèƒ½&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-structured_text&#34; data-lang=&#34;structured_text&#34;&gt;// ç”Ÿäº§æ•°æ®è®°å½•
FUNCTION LogProductionData : VOID
VAR_INPUT
END_VAR
VAR
    DataRecord : ProductionRecord;
    CurrentTime : DT;
END_VAR

BEGIN
    // è·å–å½“å‰æ—¶é—´
    CurrentTime := GetSystemTime();

    // æ„å»ºæ•°æ®è®°å½•
    DataRecord.Timestamp := CurrentTime;
    DataRecord.ShiftID := GetCurrentShift();
    DataRecord.ProductID := CurrentProductID;
    DataRecord.Quantity := ShiftProduction;
    DataRecord.QualityPassRate := CalculateQualityRate();
    DataRecord.EquipmentUtilization := CalculateOEE();
    DataRecord.EnergyConsumption := GetTotalEnergyUsage();

    // å†™å…¥æ•°æ®ç¼“å†²åŒº
    ProductionLogBuffer.Write(DataRecord);

    // æ¯å°æ—¶å‘SCADAå‘é€ä¸€æ¬¡æ±‡æ€»æ•°æ®
    IF IsHourBoundary() THEN
        SendHourlyDataToSCADA();
    END_IF;
END_FUNCTION
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;-scadaç³»ç»Ÿå¼€å‘&#34;&gt;ğŸ–¥ï¸ SCADAç³»ç»Ÿå¼€å‘&lt;/h2&gt;
&lt;h3 id=&#34;factorytalk-view-seé…ç½®&#34;&gt;FactoryTalk View SEé…ç½®&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;åº”ç”¨ç»“æ„:
FactoryTalk SE Application
â”œâ”€â”€ Area Models
â”‚   â”œâ”€â”€ Raw_Material_Area (åŸæ–™å¤„ç†åŒº)
â”‚   â”œâ”€â”€ Production_Area (ç”Ÿäº§åˆ¶é€ åŒº)
â”‚   â”œâ”€â”€ Quality_Area (è´¨é‡æ£€æµ‹åŒº)
â”‚   â””â”€â”€ Logistics_Area (ä»“å‚¨ç‰©æµåŒº)
â”œâ”€â”€ HMI Displays
â”‚   â”œâ”€â”€ Main_Overview (ä¸»ç›‘æ§ç”»é¢)
â”‚   â”œâ”€â”€ Production_Detail (ç”Ÿäº§è¯¦æƒ…)
â”‚   â”œâ”€â”€ Alarm_Display (æŠ¥è­¦æ˜¾ç¤º)
â”‚   â”œâ”€â”€ Trend_Display (è¶‹åŠ¿å›¾)
â”‚   â””â”€â”€ Report_Display (æŠ¥è¡¨ç”»é¢)
â”œâ”€â”€ Data Logs
â”‚   â”œâ”€â”€ Production_Log (ç”Ÿäº§æ•°æ®)
â”‚   â”œâ”€â”€ Alarm_Log (æŠ¥è­¦è®°å½•)
â”‚   â””â”€â”€ Energy_Log (èƒ½è€—æ•°æ®)
â””â”€â”€ Security
    â”œâ”€â”€ Operator (æ“ä½œå‘˜æƒé™)
    â”œâ”€â”€ Supervisor (ä¸»ç®¡æƒé™)
    â””â”€â”€ Engineer (å·¥ç¨‹å¸ˆæƒé™)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;ä¸»ç›‘æ§ç”»é¢è®¾è®¡&#34;&gt;ä¸»ç›‘æ§ç”»é¢è®¾è®¡&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ä¸»ç”»é¢å¸ƒå±€ (1920Ã—1080åˆ†è¾¨ç‡):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ ‡é¢˜æ : å·¥å‚è‡ªåŠ¨åŒ–ç›‘æ§ç³»ç»Ÿ                    â”‚ ç”¨æˆ·: æ“ä½œå‘˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åŒºåŸŸé€‰æ‹©æ ‡ç­¾: [åŸæ–™åŒº] [ç”Ÿäº§åŒº] [è´¨é‡åŒº] [ä»“å‚¨åŒº] [æ€»è§ˆ]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚   åŸæ–™å¤„ç†åŒº    â”‚ â”‚   ç”Ÿäº§åˆ¶é€ åŒº    â”‚ â”‚   è´¨é‡æ£€æµ‹åŒº    â”‚ â”‚
â”‚ â”‚                â”‚ â”‚                â”‚ â”‚                â”‚ â”‚
â”‚ â”‚ ğŸŸ¢ æ­£å¸¸è¿è¡Œ     â”‚ â”‚ ğŸŸ¡ æ€§èƒ½ä¸‹é™     â”‚ â”‚ ğŸŸ¢ æ­£å¸¸è¿è¡Œ     â”‚ â”‚
â”‚ â”‚ äº§é‡: 245å¨     â”‚ â”‚ äº§é‡: 1,847ä»¶   â”‚ â”‚ åˆæ ¼ç‡: 99.2%   â”‚ â”‚
â”‚ â”‚ æ•ˆç‡: 94.5%     â”‚ â”‚ OEE: 87.3%     â”‚ â”‚ æ£€æµ‹: 1,823ä»¶   â”‚ â”‚
â”‚ â”‚                â”‚ â”‚                â”‚ â”‚                â”‚ â”‚
â”‚ â”‚ [è¯¦ç»†ä¿¡æ¯]      â”‚ â”‚ [è¯¦ç»†ä¿¡æ¯]      â”‚ â”‚ [è¯¦ç»†ä¿¡æ¯]      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å®æ—¶è¶‹åŠ¿å›¾ (æœ€è¿‘1å°æ—¶):                                  â”‚
â”‚ äº§é‡æ›²çº¿: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚
â”‚ è´¨é‡æ›²çº¿: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚
â”‚ æ•ˆç‡æ›²çº¿: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åº•éƒ¨çŠ¶æ€æ : æŠ¥è­¦æ•°: 2 | ç³»ç»ŸçŠ¶æ€: æ­£å¸¸ | å½“å‰æ—¶é—´: 14:35: â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;vbaè„šæœ¬---æ•°æ®å¯¼å‡ºåŠŸèƒ½&#34;&gt;VBAè„šæœ¬ - æ•°æ®å¯¼å‡ºåŠŸèƒ½&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-vba&#34; data-lang=&#34;vba&#34;&gt;&amp;#39; å¯¼å‡ºç”Ÿäº§æŠ¥è¡¨åˆ°Excel
Sub ExportProductionReport()
    Dim excelApp As Object
    Dim workbook As Object
    Dim worksheet As Object
    Dim reportData As Variant
    Dim i As Integer

    &amp;#39; åˆ›å»ºExcelåº”ç”¨ç¨‹åº
    Set excelApp = CreateObject(&amp;#34;Excel.Application&amp;#34;)
    Set workbook = excelApp.Workbooks.Add
    Set worksheet = workbook.Worksheets(1)

    &amp;#39; è®¾ç½®è¡¨å¤´
    worksheet.Cells(1, 1).Value = &amp;#34;æ—¶é—´&amp;#34;
    worksheet.Cells(1, 2).Value = &amp;#34;äº§é‡&amp;#34;
    worksheet.Cells(1, 3).Value = &amp;#34;åˆæ ¼ç‡&amp;#34;
    worksheet.Cells(1, 4).Value = &amp;#34;OEE&amp;#34;
    worksheet.Cells(1, 5).Value = &amp;#34;èƒ½è€—&amp;#34;

    &amp;#39; ä»FactoryTalkæ•°æ®æ¨¡å‹è·å–æ•°æ®
    For i = 0 To 23
        worksheet.Cells(i + 2, 1).Value = FormatHour(i)
        worksheet.Cells(i + 2, 2).Value = HourlyProduction(i)
        worksheet.Cells(i + 2, 3).Value = HourlyQualityRate(i)
        worksheet.Cells(i + 2, 4).Value = HourlyOEE(i)
        worksheet.Cells(i + 2, 5).Value = HourlyEnergy(i)
    Next i

    &amp;#39; æ ¼å¼åŒ–è¡¨æ ¼
    worksheet.Columns(&amp;#34;A:E&amp;#34;).AutoFit
    worksheet.Range(&amp;#34;A1:E1&amp;#34;).Font.Bold = True

    &amp;#39; ä¿å­˜æ–‡ä»¶
    Dim fileName As String
    fileName = &amp;#34;Production_Report_&amp;#34; &amp;amp; Format(Now, &amp;#34;yyyymmdd&amp;#34;) &amp;amp; &amp;#34;.xlsx&amp;#34;
    workbook.SaveAs fileName
    workbook.Close

    excelApp.Quit
    Set excelApp = Nothing

    &amp;#39; æ˜¾ç¤ºå¯¼å‡ºæˆåŠŸæ¶ˆæ¯
    MsgBox &amp;#34;ç”Ÿäº§æŠ¥è¡¨å·²å¯¼å‡ºè‡³: &amp;#34; &amp;amp; fileName, vbInformation, &amp;#34;å¯¼å‡ºå®Œæˆ&amp;#34;
End Sub
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;-æ•°æ®åˆ†æä¸æŠ¥è¡¨&#34;&gt;ğŸ“Š æ•°æ®åˆ†æä¸æŠ¥è¡¨&lt;/h2&gt;
&lt;h3 id=&#34;ç”Ÿäº§kpiè®¡ç®—&#34;&gt;ç”Ÿäº§KPIè®¡ç®—&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-structured_text&#34; data-lang=&#34;structured_text&#34;&gt;// å…³é”®æ€§èƒ½æŒ‡æ ‡è®¡ç®—
FUNCTION CalculateKPIs : KPI_Struct
VAR_INPUT
    ShiftData : Shift_Data_Struct;
END_VAR
VAR_OUTPUT
    Result : KPI_Struct;
END_VAR
VAR
    PlannedProductionTime : REAL;
    ActualProductionTime : REAL;
    IdealCycleTime : REAL;
END_VAR

BEGIN
    // è®¡åˆ’ç”Ÿäº§æ—¶é—´ (å°æ—¶)
    PlannedProductionTime := 8.0; // 8å°æ—¶ç­æ¬¡

    // å®é™…ç”Ÿäº§æ—¶é—´ (è€ƒè™‘åœæœºæ—¶é—´)
    ActualProductionTime := PlannedProductionTime -
                          (ShiftData.Downtime.Total / 3600.0);

    // ç†æƒ³å¾ªç¯æ—¶é—´ (ç§’/ä»¶)
    IdealCycleTime := 45.0; // 45ç§’ç”Ÿäº§ä¸€ä»¶

    // å¯ç”¨ç‡ (Availability)
    Result.Availability := ActualProductionTime / PlannedProductionTime;

    // æ€§èƒ½ç‡ (Performance)
    Result.Performance := (IdealCycleTime * ShiftData.TotalParts) /
                         (ActualProductionTime * 3600.0);

    // è´¨é‡ç‡ (Quality)
    IF ShiftData.TotalParts &amp;gt; 0 THEN
        Result.Quality := ShiftData.GoodParts / ShiftData.TotalParts;
    ELSE
        Result.Quality := 0.0;
    END_IF;

    // OEE (Overall Equipment Effectiveness)
    Result.OEE := Result.Availability * Result.Performance * Result.Quality;

    // äº§é‡è¾¾æˆç‡
    Result.ProductionRate := ShiftData.TotalParts / ShiftData.TargetProduction;

    // èƒ½è€—æŒ‡æ ‡
    Result.EnergyPerUnit := ShiftData.TotalEnergy / ShiftData.TotalParts;
END_FUNCTION
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;å®æ—¶æ•°æ®è¶‹åŠ¿å›¾&#34;&gt;å®æ—¶æ•°æ®è¶‹åŠ¿å›¾&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code class=&#34;language-structured_text&#34; data-lang=&#34;structured_text&#34;&gt;// è¶‹åŠ¿æ•°æ®ç¼“å­˜
FUNCTION_BUFFER TrendDataBuffer
VAR_INPUT
    NewValue : REAL;
    Timestamp : DT;
END_VAR
VAR
    DataArray : ARRAY[1..1000] OF REAL;
    TimeArray : ARRAY[1..1000] OF DT;
    Index : DINT := 0;
    BufferSize : DINT := 1000;
END_VAR

BEGIN
    // æ›´æ–°ç´¢å¼•
    Index := (Index MOD BufferSize) + 1;

    // å­˜å‚¨æ–°æ•°æ®
    DataArray[Index] := NewValue;
    TimeArray[Index] := Timestamp;

    // è¾“å‡ºæœ€è¿‘Nä¸ªæ•°æ®ç‚¹ç»™SCADA
    SCADA_TrendData := GetRecentDataPoints(100);
END_FUNCTION_BUFFER
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;-ç§»åŠ¨ç«¯ç›‘æ§&#34;&gt;ğŸ”§ ç§»åŠ¨ç«¯ç›‘æ§&lt;/h2&gt;
&lt;h3 id=&#34;web-hmiç•Œé¢&#34;&gt;Web HMIç•Œé¢&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ç§»åŠ¨ç«¯ç›‘æ§ç•Œé¢ (å“åº”å¼è®¾è®¡):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ­ å·¥å‚ç›‘æ§            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š ä»Šæ—¥ç”Ÿäº§æ¦‚å†µ        â”‚
â”‚ ç›®æ ‡: 2,000ä»¶          â”‚
â”‚ å®é™…: 1,847ä»¶ (92.4%)  â”‚
â”‚ åˆæ ¼: 1,832ä»¶ (99.2%)  â”‚
â”‚                        â”‚
â”‚ ğŸ“ˆ å„åŒºåŸŸçŠ¶æ€          â”‚
â”‚ åŸæ–™åŒº: ğŸŸ¢ æ­£å¸¸         â”‚
â”‚ ç”Ÿäº§åŒº: ğŸŸ¡ æ•ˆç‡85%      â”‚
â”‚ è´¨æ£€åŒº: ğŸŸ¢ æ­£å¸¸         â”‚
â”‚ ä»“å‚¨åŒº: ğŸŸ¢ æ­£å¸¸         â”‚
â”‚                        â”‚
â”‚ âš ï¸ å½“å‰æŠ¥è­¦            â”‚
â”‚ â€¢ ç”Ÿäº§åŒºæ•ˆç‡ä¸‹é™        â”‚
â”‚ â€¢ 3å·è®¾å¤‡éœ€ç»´æŠ¤         â”‚
â”‚                        â”‚
â”‚ ğŸ“± å¿«é€Ÿæ“ä½œ            â”‚
â”‚ [æŸ¥çœ‹è¯¦æƒ…] [å¯¼å‡ºæŠ¥è¡¨]   â”‚
â”‚ [æŠ¥è­¦ç¡®è®¤] [è”ç³»æ”¯æŒ]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;-é¡¹ç›®æˆæœ&#34;&gt;ğŸ“ˆ é¡¹ç›®æˆæœ&lt;/h2&gt;
&lt;h3 id=&#34;æŠ€æœ¯æˆæœ&#34;&gt;æŠ€æœ¯æˆæœ&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§è¦†ç›–èŒƒå›´&lt;/strong&gt;: 4ä¸ªç”Ÿäº§åŒºåŸŸï¼Œ32å°è®¾å¤‡&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®é‡‡é›†ç‚¹&lt;/strong&gt;: 500+ä¸ªå®æ—¶ç›‘æ§ç‚¹&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŠ¥è­¦å“åº”æ—¶é—´&lt;/strong&gt;: &amp;lt; 2ç§’&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†å²æ•°æ®å­˜å‚¨&lt;/strong&gt;: 3å¹´å®Œæ•´æ•°æ®&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç§»åŠ¨ç«¯è®¿é—®&lt;/strong&gt;: æ”¯æŒiOS/Androidè®¾å¤‡&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç®¡ç†æ•ˆç›Š&#34;&gt;ç®¡ç†æ•ˆç›Š&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿäº§é€æ˜åº¦&lt;/strong&gt;: å®æ—¶æŒæ¡å…¨å‚ç”Ÿäº§çŠ¶å†µ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†³ç­–æ”¯æŒ&lt;/strong&gt;: åŸºäºæ•°æ®çš„ç®¡ç†å†³ç­–&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼‚å¸¸å“åº”&lt;/strong&gt;: å¿«é€Ÿå‘ç°å’Œå¤„ç†ç”Ÿäº§å¼‚å¸¸&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æˆæœ¬æ§åˆ¶&lt;/strong&gt;: ç²¾ç»†åŒ–çš„èƒ½è€—å’Œææ–™ç®¡ç†&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è´¨é‡æå‡&lt;/strong&gt;: å®æ—¶è´¨é‡ç›‘æ§å’Œè¿½æº¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æŠ•èµ„å›æŠ¥&#34;&gt;æŠ•èµ„å›æŠ¥&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å®æ–½å‘¨æœŸ&lt;/strong&gt;: 6ä¸ªæœˆ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŠ•èµ„é‡‘é¢&lt;/strong&gt;: 280ä¸‡å…ƒ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹´æ”¶ç›Š&lt;/strong&gt;: 450ä¸‡å…ƒ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŠ•èµ„å›æ”¶æœŸ&lt;/strong&gt;: 7.5ä¸ªæœˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;-æŠ€æœ¯ç‰¹è‰²&#34;&gt;ğŸ“ æŠ€æœ¯ç‰¹è‰²&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;åˆ†å¸ƒå¼æ§åˆ¶æ¶æ„&lt;/strong&gt;: å¤šPLCååŒå·¥ä½œï¼Œæé«˜ç³»ç»Ÿå¯é æ€§&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†—ä½™ç½‘ç»œè®¾è®¡&lt;/strong&gt;: ç¯ç½‘æ‹“æ‰‘ï¼Œå•ç‚¹æ•…éšœä¸å½±å“ç³»ç»Ÿè¿è¡Œ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®æ—¶æ•°æ®é‡‡é›†&lt;/strong&gt;: æ¯«ç§’çº§æ•°æ®æ›´æ–°ï¼Œå‡†ç¡®åæ˜ ç”Ÿäº§çŠ¶æ€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ™ºèƒ½æŠ¥è­¦ç³»ç»Ÿ&lt;/strong&gt;: åˆ†çº§æŠ¥è­¦ç®¡ç†ï¼Œé‡è¦ä¿¡æ¯åŠæ—¶æ¨é€&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç§»åŠ¨åŒ–æ”¯æŒ&lt;/strong&gt;: éšæ—¶éšåœ°çš„ç”Ÿäº§ç›‘æ§èƒ½åŠ›&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;è¯¥é¡¹ç›®å±•ç¤ºäº†ç°ä»£å·¥å‚è‡ªåŠ¨åŒ–ç›‘æ§ç³»ç»Ÿçš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œä»ç¡¬ä»¶é€‰å‹åˆ°è½¯ä»¶å¼€å‘ï¼Œä»æ•°æ®å¤„ç†åˆ°ç”¨æˆ·ç•Œé¢çš„å…¨æ–¹ä½æŠ€æœ¯èƒ½åŠ›ã€‚&lt;/strong&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>æ™ºèƒ½è®¾å¤‡æ§åˆ¶å•å…ƒ</title>
      <link>http://localhost:1313/projects/embedded-control-unit/</link>
      <pubDate>Wed, 12 Nov 2025 12:00:00 +0800</pubDate>
      <guid>http://localhost:1313/projects/embedded-control-unit/</guid>
      <description>&lt;h2 id=&#34;-é¡¹ç›®æ¦‚è¿°&#34;&gt;ğŸ”§ é¡¹ç›®æ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªåŸºäºSTM32F4ç³»åˆ—å¾®æ§åˆ¶å™¨çš„æ™ºèƒ½è®¾å¤‡æ§åˆ¶å•å…ƒï¼Œä¸“é—¨ç”¨äºå·¥ä¸šç°åœºçš„æ•°æ®é‡‡é›†ã€è®¾å¤‡æ§åˆ¶å’Œæ•°æ®é€šä¿¡ã€‚è¯¥æ§åˆ¶å•å…ƒé›†æˆäº†å¤šç§å·¥ä¸šä¼ æ„Ÿå™¨ï¼Œæ”¯æŒModbus RTU/TCPé€šä¿¡åè®®ï¼Œå¯ä½œä¸ºPLCç³»ç»Ÿçš„è¡¥å……æ§åˆ¶å™¨æˆ–ç‹¬ç«‹çš„ç›‘æ§èŠ‚ç‚¹ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;-é¡¹ç›®ç›®æ ‡&#34;&gt;ğŸ¯ é¡¹ç›®ç›®æ ‡&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å®ç°å¤šä¼ æ„Ÿå™¨æ•°æ®é‡‡é›†å’Œé¢„å¤„ç†&lt;/li&gt;
&lt;li&gt;æä¾›æœ¬åœ°æ§åˆ¶å’Œä¿æŠ¤åŠŸèƒ½&lt;/li&gt;
&lt;li&gt;æ”¯æŒModbuså·¥ä¸šé€šä¿¡åè®®&lt;/li&gt;
&lt;li&gt;å…·å¤‡æ•°æ®è®°å½•å’Œæ•…éšœè¯Šæ–­èƒ½åŠ›&lt;/li&gt;
&lt;li&gt;æ»¡è¶³å·¥ä¸šç¯å¢ƒçš„å¯é æ€§è¦æ±‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;-ç¡¬ä»¶æ¶æ„&#34;&gt;ğŸ”§ ç¡¬ä»¶æ¶æ„&lt;/h2&gt;
&lt;h3 id=&#34;stm32æ§åˆ¶æ¿è®¾è®¡&#34;&gt;STM32æ§åˆ¶æ¿è®¾è®¡&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ç¡¬ä»¶é…ç½®:
ä¸»æ§åˆ¶å™¨:
â”œâ”€â”€ STM32F407VGT6 (ARM Cortex-M4, 168MHz)
â”œâ”€â”€ 1MB Flash, 192KB RAM
â”œâ”€â”€ 3Ã—UART (é€šä¿¡æ¥å£)
â”œâ”€â”€ 2Ã—I2C (ä¼ æ„Ÿå™¨æ‰©å±•)
â”œâ”€â”€ 3Ã—SPI (é«˜é€Ÿæ•°æ®æ¥å£)
â”œâ”€â”€ 16Ã—12ä½ADC (æ¨¡æ‹Ÿé‡é‡‡é›†)
â””â”€â”€ 2Ã—12ä½DAC (æ¨¡æ‹Ÿé‡è¾“å‡º)

ç”µæºç®¡ç†:
â”œâ”€â”€ 24V DCå·¥ä¸šç”µæºè¾“å…¥
â”œâ”€â”€ 5V/3.3V DC-DCè½¬æ¢å™¨
â”œâ”€â”€ ç”µæºæ»¤æ³¢å’Œä¿æŠ¤ç”µè·¯
â”œâ”€â”€ å¤‡ç”¨ç”µæ±  (RTCå’Œæ•°æ®ä¿æŒ)
â””â”€â”€ çœ‹é—¨ç‹—å®šæ—¶å™¨

é€šä¿¡æ¥å£:
â”œâ”€â”€ RS485æ¥å£ (Modbus RTU)
â”œâ”€â”€ Ethernetæ¥å£ (Modbus TCP)
â”œâ”€â”€ USBæ¥å£ (è°ƒè¯•å’Œé…ç½®)
â”œâ”€â”€ CANæ€»çº¿æ¥å£ (è®¾å¤‡äº’è”)
â””â”€â”€ WiFiæ¨¡å— (å¯é€‰æ— çº¿é€šä¿¡)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;ä¼ æ„Ÿå™¨æ¥å£ç”µè·¯&#34;&gt;ä¼ æ„Ÿå™¨æ¥å£ç”µè·¯&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ä¼ æ„Ÿå™¨è¿æ¥:
â”œâ”€â”€ æ¸©åº¦ä¼ æ„Ÿå™¨ (PT100)
â”‚   â”œâ”€â”€ æ’æµæºæ¿€åŠ±ç”µè·¯
â”‚   â”œâ”€â”€ ä¿¡å·æ”¾å¤§å’Œæ»¤æ³¢
â”‚   â””â”€â”€ å†·ç«¯è¡¥å¿
â”œâ”€â”€ å‹åŠ›ä¼ æ„Ÿå™¨ (4-20mA)
â”‚   â”œâ”€â”€ ç²¾å¯†ç”µé˜»é‡‡æ ·
â”‚   â”œâ”€â”€ è¿‡å‹ä¿æŠ¤
â”‚   â””â”€â”€ ä¿¡å·éš”ç¦»
â”œâ”€â”€ æµé‡è®¡ (è„‰å†²è¾“å‡º)
â”‚   â”œâ”€â”€ å…‰ç”µéš”ç¦»è¾“å…¥
â”‚   â”œâ”€â”€ é¢‘ç‡æµ‹é‡ç”µè·¯
â”‚   â””â”€â”€ æŠ—å¹²æ‰°æ»¤æ³¢
â””â”€â”€ æŒ¯åŠ¨ä¼ æ„Ÿå™¨ (IEPE)
    â”œâ”€â”€ æ’æµæºä¾›ç”µ
    â”œâ”€â”€ ACä¿¡å·æ”¾å¤§
    â””â”€â”€ RMSè½¬æ¢ç”µè·¯
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;-è½¯ä»¶æ¶æ„&#34;&gt;ğŸ’» è½¯ä»¶æ¶æ„&lt;/h2&gt;
&lt;h3 id=&#34;ä¸»ç¨‹åºæ¡†æ¶&#34;&gt;ä¸»ç¨‹åºæ¡†æ¶&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @file main.c
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief æ™ºèƒ½æ§åˆ¶å•å…ƒä¸»ç¨‹åº
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @author Automation Technician
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @date 2025-11-12
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;main.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;sensor_manager.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;modbus_server.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;data_logger.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;watchdog.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;system_config.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/* å…¨å±€å˜é‡å®šä¹‰ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;SystemStatus_t g_systemStatus;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;SensorData_t g_sensorData;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;ModbusRegisters_t g_modbusRegisters;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;uint32_t&lt;/span&gt; g_systemTick &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/* å‡½æ•°å£°æ˜ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SystemClock_Config&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;GPIO_Init&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Peripherals_Init&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Task_SensorAcquisition&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Task_DataProcessing&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Task_Communication&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Task_SystemMonitoring&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief ä¸»å‡½æ•°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;main&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* ç³»ç»Ÿåˆå§‹åŒ– */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;HAL_Init&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;SystemClock_Config&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;GPIO_Init&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;Peripherals_Init&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* å¤–è®¾åˆå§‹åŒ– */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;SensorManager_Init&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;ModbusServer_Init&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;DataLogger_Init&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#a6e22e&#34;&gt;Watchdog_Init&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* ç³»ç»ŸçŠ¶æ€åˆå§‹åŒ– */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    g_systemStatus.mode &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; MODE_AUTO;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    g_systemStatus.error_code &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; ERROR_NONE;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    g_systemStatus.uptime &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* ä¸»å¾ªç¯ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;while&lt;/span&gt; (&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        g_systemTick &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;HAL_GetTick&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* ä»»åŠ¡è°ƒåº¦ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;Task_SensorAcquisition&lt;/span&gt;();    &lt;span style=&#34;color:#75715e&#34;&gt;// 100mså‘¨æœŸ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;Task_DataProcessing&lt;/span&gt;();       &lt;span style=&#34;color:#75715e&#34;&gt;// 500mså‘¨æœŸ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;Task_Communication&lt;/span&gt;();        &lt;span style=&#34;color:#75715e&#34;&gt;// å®æ—¶å¤„ç†
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;Task_SystemMonitoring&lt;/span&gt;();     &lt;span style=&#34;color:#75715e&#34;&gt;// 1000mså‘¨æœŸ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* å–‚ç‹— */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;Watchdog_Refresh&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* ä½åŠŸè€—å¤„ç† */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (g_systemStatus.mode &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; MODE_SLEEP) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;__WFI&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief ä¼ æ„Ÿå™¨æ•°æ®é‡‡é›†ä»»åŠ¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Task_SensorAcquisition&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32_t&lt;/span&gt; lastAcquisitionTime &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* 100msé‡‡é›†å‘¨æœŸ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (g_systemTick &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; lastAcquisitionTime &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* é‡‡é›†æ¸©åº¦æ•°æ® */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        g_sensorData.temperature &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SensorManager_ReadTemperature&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* é‡‡é›†å‹åŠ›æ•°æ® */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        g_sensorData.pressure &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SensorManager_ReadPressure&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* é‡‡é›†æµé‡æ•°æ® */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        g_sensorData.flow_rate &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SensorManager_ReadFlowRate&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* é‡‡é›†æŒ¯åŠ¨æ•°æ® */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        g_sensorData.vibration &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SensorManager_ReadVibration&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* æ›´æ–°æ•°æ®æ—¶é—´æˆ³ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        g_sensorData.timestamp &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; g_systemTick;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        lastAcquisitionTime &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; g_systemTick;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief æ•°æ®å¤„ç†ä»»åŠ¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Task_DataProcessing&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32_t&lt;/span&gt; lastProcessingTime &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* 500mså¤„ç†å‘¨æœŸ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (g_systemTick &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; lastProcessingTime &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;500&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* æ•°æ®æ»¤æ³¢å¤„ç† */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;DataLogger_FilterSensorData&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;g_sensorData);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* æ•°æ®èŒƒå›´æ£€æŸ¥ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;DataLogger_ValidateSensorData&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;g_sensorData);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* è®¡ç®—è¡ç”Ÿå‚æ•° */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        g_sensorData.pressure_rate &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DataLogger_CalculatePressureRate&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        g_sensorData.flow_total &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DataLogger_CalculateFlowTotal&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* æ›´æ–°Modbuså¯„å­˜å™¨ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;ModbusServer_UpdateRegisters&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;g_sensorData);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        lastProcessingTime &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; g_systemTick;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief é€šä¿¡å¤„ç†ä»»åŠ¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Task_Communication&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* Modbus RTUé€šä¿¡å¤„ç† */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;HAL_UART_GetState&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;huart1) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; HAL_UART_STATE_BUSY_RX) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;ModbusServer_ProcessRTU&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* Modbus TCPé€šä¿¡å¤„ç† */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;HAL_ETH_GetState&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;heth) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; HAL_ETH_STATE_BUSY_RX) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;ModbusServer_ProcessTCP&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* USBé€šä¿¡å¤„ç† (è°ƒè¯•ç”¨) */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;HAL_UART_GetState&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;huart3) &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; HAL_UART_STATE_BUSY_RX) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;ProcessUSBCommand&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief ç³»ç»Ÿç›‘æ§ä»»åŠ¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Task_SystemMonitoring&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32_t&lt;/span&gt; lastMonitorTime &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* 1000msç›‘æ§å‘¨æœŸ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (g_systemTick &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; lastMonitorTime &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* æ›´æ–°ç³»ç»Ÿè¿è¡Œæ—¶é—´ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        g_systemStatus.uptime&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* æ£€æŸ¥ç³»ç»Ÿé”™è¯¯ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;SystemError_Check&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* ç›‘æ§ç”µæºç”µå‹ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;SystemMonitor_GetPowerVoltage&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;20.0&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            g_systemStatus.error_code &lt;span style=&#34;color:#f92672&#34;&gt;|=&lt;/span&gt; ERROR_LOW_VOLTAGE;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* æ£€æŸ¥å­˜å‚¨ç©ºé—´ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;DataLogger_GetFreeSpace&lt;/span&gt;() &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1024&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            g_systemStatus.error_code &lt;span style=&#34;color:#f92672&#34;&gt;|=&lt;/span&gt; ERROR_STORAGE_FULL;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* ç³»ç»ŸçŠ¶æ€LEDæŒ‡ç¤º */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;SystemStatus_UpdateLED&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        lastMonitorTime &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; g_systemTick;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ä¼ æ„Ÿå™¨ç®¡ç†æ¨¡å—&#34;&gt;ä¼ æ„Ÿå™¨ç®¡ç†æ¨¡å—&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @file sensor_manager.c
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief ä¼ æ„Ÿå™¨ç®¡ç†æ¨¡å—
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;sensor_manager.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;adc.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;tim.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;i2c.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/* ä¼ æ„Ÿå™¨æ ¡å‡†å‚æ•° */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;typedef&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; offset;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; scale;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; filter_coefficient;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;} SensorCalibration_t;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; SensorCalibration_t tempCalib &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {&lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0.1&lt;/span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; SensorCalibration_t pressureCalib &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; {&lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1.0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0.1&lt;/span&gt;};
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief æ¸©åº¦ä¼ æ„Ÿå™¨è¯»å– (PT100)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SensorManager_ReadTemperature&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; filteredTemp &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;25.0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt; adcValue;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; voltage, resistance, temperature;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* è¯»å–ADCå€¼ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    adcValue &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ADC_ReadChannel&lt;/span&gt;(ADC_CHANNEL_TEMP);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* è½¬æ¢ä¸ºç”µå‹ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    voltage &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt;)adcValue &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3.3f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4096.0f&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* è®¡ç®—PT100ç”µé˜» */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    resistance &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; voltage &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1000.0f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1.0f&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;/* 1mAæ’æµæº */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* PT100ç”µé˜»-æ¸©åº¦è½¬æ¢ (Callendar-Van Dusenæ–¹ç¨‹) */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (resistance &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;100.0&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        temperature &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;242.02&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2.2228&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; resistance
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                   &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.00258&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; resistance &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; resistance;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        temperature &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;242.02&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2.2228&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; resistance;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* åº”ç”¨æ ¡å‡†å‚æ•° */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    temperature &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; temperature &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; tempCalib.scale &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; tempCalib.offset;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* è½¯ä»¶æ»¤æ³¢ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    filteredTemp &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; filteredTemp &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; (&lt;span style=&#34;color:#ae81ff&#34;&gt;1.0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; tempCalib.filter_coefficient)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; temperature &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; tempCalib.filter_coefficient;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; filteredTemp;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief å‹åŠ›ä¼ æ„Ÿå™¨è¯»å– (4-20mA)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SensorManager_ReadPressure&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; filteredPressure &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt; adcValue;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; current, pressure;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* è¯»å–ADCå€¼ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    adcValue &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ADC_ReadChannel&lt;/span&gt;(ADC_CHANNEL_PRESSURE);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* è½¬æ¢ä¸ºç”µæµ (4-20mAå¯¹åº”0.8-4Vç”µå‹) */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; voltage &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt;)adcValue &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3.3f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4096.0f&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    current &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (voltage &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.8f&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5.0f&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;/* 4-20mA */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* è½¬æ¢ä¸ºå‹åŠ›å€¼ (0-10Bar) */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    pressure &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (current &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4.0f&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10.0f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;16.0f&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;/* 4-20mA -&amp;gt; 0-10Bar */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* è´Ÿå€¼å¤„ç† */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (pressure &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt;) pressure &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* åº”ç”¨æ ¡å‡†å‚æ•° */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    pressure &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pressure &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; pressureCalib.scale &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; pressureCalib.offset;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* è½¯ä»¶æ»¤æ³¢ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    filteredPressure &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; filteredPressure &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; (&lt;span style=&#34;color:#ae81ff&#34;&gt;1.0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; pressureCalib.filter_coefficient)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                     &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; pressure &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; pressureCalib.filter_coefficient;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; filteredPressure;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief æµé‡ä¼ æ„Ÿå™¨è¯»å– (è„‰å†²è¾“å‡º)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SensorManager_ReadFlowRate&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32_t&lt;/span&gt; lastPulseCount &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32_t&lt;/span&gt; lastReadTime &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; flowRate &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32_t&lt;/span&gt; currentPulseCount, pulseDelta;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32_t&lt;/span&gt; timeDelta;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; frequency;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* è·å–å½“å‰è„‰å†²è®¡æ•° */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    currentPulseCount &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;TIM_GetPulseCount&lt;/span&gt;(TIM_FLOW);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* è®¡ç®—æ—¶é—´å·® */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    timeDelta &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; g_systemTick &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; lastReadTime;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (timeDelta &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* è®¡ç®—è„‰å†²å¢é‡ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        pulseDelta &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; currentPulseCount &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; lastPulseCount;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* è®¡ç®—é¢‘ç‡ (Hz) */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        frequency &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt;)pulseDelta &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1000.0f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt;)timeDelta;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* è½¬æ¢ä¸ºæµé‡ (L/min) */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        flowRate &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; frequency &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;60.0f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;100.0f&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;/* 100è„‰å†²/L */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* æ›´æ–°å†å²è®°å½• */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        lastPulseCount &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; currentPulseCount;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        lastReadTime &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; g_systemTick;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; flowRate;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief æŒ¯åŠ¨ä¼ æ„Ÿå™¨è¯»å– (IEPE)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;SensorManager_ReadVibration&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt; adcValue;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; voltage, rmsValue;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* è¯»å–ADCå€¼ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    adcValue &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ADC_ReadChannel&lt;/span&gt;(ADC_CHANNEL_VIBRATION);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* è½¬æ¢ä¸ºç”µå‹ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    voltage &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt;)adcValue &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;3.3f&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;4096.0f&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* è®¡ç®—RMSå€¼ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    rmsValue &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Vibration_CalculateRMS&lt;/span&gt;(voltage);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* è½¬æ¢ä¸ºåŠ é€Ÿåº¦å€¼ (g) */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; acceleration &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; rmsValue &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10.0f&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;/* 10g/Vçµæ•åº¦ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; acceleration;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;modbusé€šä¿¡æ¨¡å—&#34;&gt;Modbusé€šä¿¡æ¨¡å—&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @file modbus_server.c
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief ModbusæœåŠ¡å™¨å®ç°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;modbus_server.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;usart.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;ethernet.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/* Modbuså¯„å­˜å™¨æ˜ å°„ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;typedef&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;union&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt; holding_registers[&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt; input_registers[&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt; coils[&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt; discrete_inputs[&lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt;];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } registers;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt; raw[&lt;span style=&#34;color:#ae81ff&#34;&gt;400&lt;/span&gt;];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;} ModbusMemoryMap_t;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; ModbusMemoryMap_t g_modbusMemory;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief Modbuså¯„å­˜å™¨æ˜ å°„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ModbusServer_UpdateRegisters&lt;/span&gt;(SensorData_t&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; sensorData)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* è¾“å…¥å¯„å­˜å™¨ (åªè¯») */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    g_modbusMemory.registers.input_registers[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        (&lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt;)(sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;temperature &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10.0&lt;/span&gt;);  &lt;span style=&#34;color:#75715e&#34;&gt;// æ¸©åº¦ (0.1Â°C)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    g_modbusMemory.registers.input_registers[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        (&lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt;)(sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;pressure &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;100.0&lt;/span&gt;);    &lt;span style=&#34;color:#75715e&#34;&gt;// å‹åŠ› (0.01Bar)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    g_modbusMemory.registers.input_registers[&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        (&lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt;)(sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;flow_rate &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;10.0&lt;/span&gt;);    &lt;span style=&#34;color:#75715e&#34;&gt;// æµé‡ (0.1L/min)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    g_modbusMemory.registers.input_registers[&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        (&lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt;)(sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;vibration &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;100.0&lt;/span&gt;);   &lt;span style=&#34;color:#75715e&#34;&gt;// æŒ¯åŠ¨ (0.01g)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* ä¿æŒå¯„å­˜å™¨ (è¯»å†™) */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    g_modbusMemory.registers.holding_registers[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        (&lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt;)(g_systemStatus.mode);            &lt;span style=&#34;color:#75715e&#34;&gt;// è¿è¡Œæ¨¡å¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    g_modbusMemory.registers.holding_registers[&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        (&lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt;)(g_systemStatus.error_code);      &lt;span style=&#34;color:#75715e&#34;&gt;// é”™è¯¯ä»£ç 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;    g_modbusMemory.registers.holding_registers[&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        (&lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt;)(g_systemStatus.uptime);          &lt;span style=&#34;color:#75715e&#34;&gt;// è¿è¡Œæ—¶é—´
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief å¤„ç†Modbus RTUè¯·æ±‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ModbusServer_ProcessRTU&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8_t&lt;/span&gt; rxBuffer[&lt;span style=&#34;color:#ae81ff&#34;&gt;256&lt;/span&gt;];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8_t&lt;/span&gt; txBuffer[&lt;span style=&#34;color:#ae81ff&#34;&gt;256&lt;/span&gt;];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt; rxLength, txLength;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* æ¥æ”¶æ•°æ® */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;UART_ReceiveBuffer&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;huart1, rxBuffer, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;rxLength)) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* è§£æModbusè¯·æ±‚ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ModbusRequest_t request;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;Modbus_ParseRequest&lt;/span&gt;(rxBuffer, rxLength, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;request)) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;/* å¤„ç†è¯·æ±‚ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ModbusResponse_t response;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;Modbus_ProcessRequest&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;request, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;response);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;/* ç”Ÿæˆå“åº”å¸§ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            txLength &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Modbus_GenerateResponse&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;response, txBuffer);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;/* å‘é€å“åº” */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;UART_Transmit&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;huart1, txBuffer, txLength);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief å¤„ç†Modbus TCPè¯·æ±‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ModbusServer_ProcessTCP&lt;/span&gt;(&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* TCPé€šä¿¡å¤„ç† (ç®€åŒ–å®ç°) */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8_t&lt;/span&gt; tcpBuffer[&lt;span style=&#34;color:#ae81ff&#34;&gt;512&lt;/span&gt;];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt; tcpLength;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;Ethernet_ReceiveData&lt;/span&gt;(tcpBuffer, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;tcpLength)) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#75715e&#34;&gt;/* è§£æMBAPå¤´éƒ¨å’ŒModbus PDU */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        ModbusTCP_Request_t tcpRequest;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (&lt;span style=&#34;color:#a6e22e&#34;&gt;ModbusTCP_ParseRequest&lt;/span&gt;(tcpBuffer, tcpLength, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;tcpRequest)) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;/* å¤„ç†Modbusè¯·æ±‚ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            ModbusResponse_t response;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;Modbus_ProcessRequest&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;tcpRequest.modbus_request, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;response);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;/* ç”ŸæˆTCPå“åº” */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt; responseLength;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            responseLength &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;ModbusTCP_GenerateResponse&lt;/span&gt;(
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;                &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;tcpRequest, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;response, tcpBuffer);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#75715e&#34;&gt;/* å‘é€TCPå“åº” */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;Ethernet_TransmitData&lt;/span&gt;(tcpBuffer, responseLength);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief å¤„ç†ModbusåŠŸèƒ½ç 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;Modbus_ProcessRequest&lt;/span&gt;(ModbusRequest_t&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; request, ModbusResponse_t&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; response)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    response&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;slave_address &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; request&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;slave_address;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    response&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;function_code &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; request&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;function_code;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;switch&lt;/span&gt; (request&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;function_code) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; MODBUS_FC_READ_HOLDING_REGISTERS:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;Modbus_ReadHoldingRegisters&lt;/span&gt;(request, response);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; MODBUS_FC_READ_INPUT_REGISTERS:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;Modbus_ReadInputRegisters&lt;/span&gt;(request, response);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; MODBUS_FC_WRITE_SINGLE_REGISTER:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;Modbus_WriteSingleRegister&lt;/span&gt;(request, response);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;case&lt;/span&gt; MODBUS_FC_WRITE_MULTIPLE_REGISTERS:
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#a6e22e&#34;&gt;Modbus_WriteMultipleRegisters&lt;/span&gt;(request, response);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#66d9ef&#34;&gt;default&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            response&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;function_code &lt;span style=&#34;color:#f92672&#34;&gt;|=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0x80&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;// å¼‚å¸¸å“åº”
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;            response&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;data[&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; MODBUS_EXCEPTION_ILLEGAL_FUNCTION;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            response&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;data_length &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;            &lt;span style=&#34;color:#66d9ef&#34;&gt;break&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;-æ•°æ®è®°å½•ä¸åˆ†æ&#34;&gt;ğŸ“Š æ•°æ®è®°å½•ä¸åˆ†æ&lt;/h2&gt;
&lt;h3 id=&#34;æ•°æ®è®°å½•åŠŸèƒ½&#34;&gt;æ•°æ®è®°å½•åŠŸèƒ½&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @file data_logger.c
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief æ•°æ®è®°å½•æ¨¡å—
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;data_logger.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;flash.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;#34;rtc.h&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/* æ•°æ®è®°å½•ç»“æ„ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;typedef&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;struct&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32_t&lt;/span&gt; timestamp;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; temperature;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; pressure;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; flow_rate;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; vibration;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt; system_status;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;} DataRecord_t;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/* å†å²æ•°æ®ç¼“å†²åŒº */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#define DATA_BUFFER_SIZE  1000
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; DataRecord_t g_dataBuffer[DATA_BUFFER_SIZE];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint16_t&lt;/span&gt; g_dataBufferIndex &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint32_t&lt;/span&gt; g_totalRecords &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief è®°å½•ä¼ æ„Ÿå™¨æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DataLogger_RecordData&lt;/span&gt;(SensorData_t&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; sensorData)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    DataRecord_t&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; record &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;g_dataBuffer[g_dataBufferIndex];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* å¡«å……æ•°æ®è®°å½• */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    record&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;timestamp &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;RTC_GetTimestamp&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    record&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;temperature &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;temperature;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    record&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;pressure &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;pressure;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    record&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;flow_rate &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;flow_rate;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    record&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;vibration &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;vibration;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    record&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;system_status &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; g_systemStatus.error_code;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* æ›´æ–°ç¼“å†²åŒºç´¢å¼• */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    g_dataBufferIndex &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (g_dataBufferIndex &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt; DATA_BUFFER_SIZE;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    g_totalRecords&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* æ£€æŸ¥æ˜¯å¦éœ€è¦ä¿å­˜åˆ°Flash */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (g_dataBufferIndex &lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        &lt;span style=&#34;color:#a6e22e&#34;&gt;DataLogger_SaveToFlash&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief æ•°æ®æ»¤æ³¢å¤„ç†
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DataLogger_FilterSensorData&lt;/span&gt;(SensorData_t&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; sensorData)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; SensorData_t filterBuffer[&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;];
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;static&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;uint8_t&lt;/span&gt; filterIndex &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* æ›´æ–°æ»¤æ³¢ç¼“å†²åŒº */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    filterBuffer[filterIndex] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt;sensorData;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    filterIndex &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; (filterIndex &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* è®¡ç®—ç§»åŠ¨å¹³å‡å€¼ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; tempSum &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt;, pressureSum &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; flowSum &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt;, vibrationSum &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;for&lt;/span&gt; (&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; i &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;; i &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;; i&lt;span style=&#34;color:#f92672&#34;&gt;++&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        tempSum &lt;span style=&#34;color:#f92672&#34;&gt;+=&lt;/span&gt; filterBuffer[i].temperature;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        pressureSum &lt;span style=&#34;color:#f92672&#34;&gt;+=&lt;/span&gt; filterBuffer[i].pressure;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        flowSum &lt;span style=&#34;color:#f92672&#34;&gt;+=&lt;/span&gt; filterBuffer[i].flow_rate;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        vibrationSum &lt;span style=&#34;color:#f92672&#34;&gt;+=&lt;/span&gt; filterBuffer[i].vibration;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;temperature &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; tempSum &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5.0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;pressure &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pressureSum &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5.0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;flow_rate &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; flowSum &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5.0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;vibration &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; vibrationSum &lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5.0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;/**
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; * @brief æ•°æ®æœ‰æ•ˆæ€§æ£€æŸ¥
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt; */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;DataLogger_ValidateSensorData&lt;/span&gt;(SensorData_t&lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; sensorData)
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; isValid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; true;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* æ¸©åº¦èŒƒå›´æ£€æŸ¥ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;temperature &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;40.0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;temperature &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;125.0&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;temperature &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;25.0&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;// é»˜è®¤å€¼
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;        isValid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; false;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* å‹åŠ›èŒƒå›´æ£€æŸ¥ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;pressure &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;pressure &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;20.0&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;pressure &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        isValid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; false;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* æµé‡èŒƒå›´æ£€æŸ¥ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;flow_rate &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;flow_rate &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1000.0&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;flow_rate &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        isValid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; false;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#75715e&#34;&gt;/* æŒ¯åŠ¨èŒƒå›´æ£€æŸ¥ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;vibration &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;||&lt;/span&gt; sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;vibration &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;50.0&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        sensorData&lt;span style=&#34;color:#f92672&#34;&gt;-&amp;gt;&lt;/span&gt;vibration &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0.0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;        isValid &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; false;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;return&lt;/span&gt; isValid;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;-ç³»ç»Ÿæµ‹è¯•ä¸éªŒè¯&#34;&gt;ğŸ”§ ç³»ç»Ÿæµ‹è¯•ä¸éªŒè¯&lt;/h2&gt;
&lt;h3 id=&#34;åŠŸèƒ½æµ‹è¯•æ¸…å•&#34;&gt;åŠŸèƒ½æµ‹è¯•æ¸…å•&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ç¡¬ä»¶æµ‹è¯•:
âœ“ ç”µæºè¾“å…¥æµ‹è¯• (24V DC Â±10%)
âœ“ å·¥ä½œæ¸©åº¦æµ‹è¯• (-20Â°C ~ +70Â°C)
âœ“ EMIæŠ—å¹²æ‰°æµ‹è¯• (IEC 61000-4-3)
âœ“ é˜²æŠ¤ç­‰çº§æµ‹è¯• (IP65)
âœ“ æŒ¯åŠ¨æµ‹è¯• (IEC 60068-2-6)

è½¯ä»¶æµ‹è¯•:
âœ“ ä¼ æ„Ÿå™¨ç²¾åº¦æµ‹è¯• (Â±0.1%)
âœ“ Modbusé€šä¿¡æµ‹è¯• (RTU/TCP)
âœ“ æ•°æ®è®°å½•æµ‹è¯• (1000æ¡/ç§’)
âœ“ çœ‹é—¨ç‹—åŠŸèƒ½æµ‹è¯•
âœ“ æ•…éšœæ¢å¤æµ‹è¯•

æ€§èƒ½æŒ‡æ ‡:
âœ“ å¯åŠ¨æ—¶é—´: &amp;lt; 2ç§’
âœ“ æ•°æ®æ›´æ–°é¢‘ç‡: 10Hz
âœ“ é€šä¿¡å“åº”æ—¶é—´: &amp;lt; 100ms
âœ“ å­˜å‚¨å®¹é‡: 10,000æ¡è®°å½•
âœ“ åŠŸè€—: &amp;lt; 5W
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;ç°åœºæµ‹è¯•ç»“æœ&#34;&gt;ç°åœºæµ‹è¯•ç»“æœ&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;æµ‹è¯•ç¯å¢ƒ: å·¥ä¸šæ³µç«™ç°åœº
æµ‹è¯•æ—¶é—´: 72å°æ—¶è¿ç»­è¿è¡Œ

ä¼ æ„Ÿå™¨æµ‹è¯•ç»“æœ:
- æ¸©åº¦æµ‹é‡ç²¾åº¦: Â±0.05Â°C (PT100, 0-100Â°CèŒƒå›´)
- å‹åŠ›æµ‹é‡ç²¾åº¦: Â±0.2%FS (4-20mA, 0-10Bar)
- æµé‡æµ‹é‡ç²¾åº¦: Â±1.0% (è„‰å†²è¾“å‡º, 0-500L/min)
- æŒ¯åŠ¨æµ‹é‡ç²¾åº¦: Â±5% (IEPE, 0-10g)

é€šä¿¡æµ‹è¯•ç»“æœ:
- Modbus RTU: 9600bps, 0é”™è¯¯
- Modbus TCP: 100Mbps, &amp;lt;10mså»¶è¿Ÿ
- æ•°æ®å®Œæ•´æ€§: 99.99%
- è¿æ¥ç¨³å®šæ€§: 72å°æ—¶æ— æ–­çº¿

ç³»ç»Ÿç¨³å®šæ€§:
- è¿ç»­è¿è¡Œæ—¶é—´: 72å°æ—¶
- å†…å­˜ä½¿ç”¨ç‡: 45%
- CPUä½¿ç”¨ç‡: 30%
- å­˜å‚¨ç©ºé—´ä½¿ç”¨: 23%
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;-é¡¹ç›®åº”ç”¨åœºæ™¯&#34;&gt;ğŸ“ˆ é¡¹ç›®åº”ç”¨åœºæ™¯&lt;/h2&gt;
&lt;h3 id=&#34;å·¥ä¸šåº”ç”¨æ¡ˆä¾‹&#34;&gt;å·¥ä¸šåº”ç”¨æ¡ˆä¾‹&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ³µç«™ç›‘æ§ç³»ç»Ÿ&lt;/strong&gt;&lt;/p&gt;</description>
    </item>
    <item>
      <title>æ™ºèƒ½æ¤ç‰©ç›‘æ§ç³»ç»Ÿ</title>
      <link>http://localhost:1313/projects/smart-plant-monitor/</link>
      <pubDate>Wed, 05 Nov 2025 15:30:00 +0800</pubDate>
      <guid>http://localhost:1313/projects/smart-plant-monitor/</guid>
      <description>&lt;p&gt;&lt;img alt=&#34;æ™ºèƒ½æ¤ç‰©ç›‘æ§ç³»ç»Ÿ&#34; loading=&#34;lazy&#34; src=&#34;https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=800&amp;h=400&amp;fit=crop&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;-é¡¹ç›®æ¦‚è¿°&#34;&gt;ğŸŒ± é¡¹ç›®æ¦‚è¿°&lt;/h2&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªåŸºäºArduinoçš„æ™ºèƒ½æ¤ç‰©ç›‘æ§ç³»ç»Ÿï¼Œèƒ½å¤Ÿè‡ªåŠ¨ç›‘æµ‹æ¤ç‰©çš„ç”Ÿé•¿ç¯å¢ƒï¼Œå¹¶é€šè¿‡æ‰‹æœºAPPå®æ—¶æŸ¥çœ‹æ•°æ®ã€‚&lt;/p&gt;
&lt;h2 id=&#34;-é¡¹ç›®ç›®æ ‡&#34;&gt;ğŸ¯ é¡¹ç›®ç›®æ ‡&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ç›‘æµ‹åœŸå£¤æ¹¿åº¦ã€æ¸©åº¦ã€å…‰ç…§å¼ºåº¦&lt;/li&gt;
&lt;li&gt;è‡ªåŠ¨æµ‡æ°´åŠŸèƒ½&lt;/li&gt;
&lt;li&gt;æ•°æ®è®°å½•å’Œåˆ†æ&lt;/li&gt;
&lt;li&gt;æ‰‹æœºè¿œç¨‹æ§åˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;-æ‰€éœ€ææ–™&#34;&gt;ğŸ”§ æ‰€éœ€ææ–™&lt;/h2&gt;
&lt;h3 id=&#34;ç¡¬ä»¶ç»„ä»¶&#34;&gt;ç¡¬ä»¶ç»„ä»¶&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Arduino Uno R3 Ã— 1&lt;/li&gt;
&lt;li&gt;ESP8266 WiFiæ¨¡å— Ã— 1&lt;/li&gt;
&lt;li&gt;åœŸå£¤æ¹¿åº¦ä¼ æ„Ÿå™¨ Ã— 1&lt;/li&gt;
&lt;li&gt;DHT22æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ Ã— 1&lt;/li&gt;
&lt;li&gt;å…‰æ•ç”µé˜» Ã— 1&lt;/li&gt;
&lt;li&gt;æ°´æ³µ Ã— 1&lt;/li&gt;
&lt;li&gt;ç»§ç”µå™¨æ¨¡å— Ã— 1&lt;/li&gt;
&lt;li&gt;OLEDæ˜¾ç¤ºå± Ã— 1&lt;/li&gt;
&lt;li&gt;é¢åŒ…æ¿å’Œè·³çº¿è‹¥å¹²&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æˆæœ¬é¢„ç®—&#34;&gt;æˆæœ¬é¢„ç®—&lt;/h3&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;ç»„ä»¶&lt;/th&gt;
          &lt;th&gt;ä»·æ ¼&lt;/th&gt;
          &lt;th&gt;æ•°é‡&lt;/th&gt;
          &lt;th&gt;å°è®¡&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;Arduino Uno&lt;/td&gt;
          &lt;td&gt;ï¿¥45&lt;/td&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;ï¿¥45&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ESP8266&lt;/td&gt;
          &lt;td&gt;ï¿¥20&lt;/td&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;ï¿¥20&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;ä¼ æ„Ÿå™¨å¥—è£…&lt;/td&gt;
          &lt;td&gt;ï¿¥35&lt;/td&gt;
          &lt;td&gt;1å¥—&lt;/td&gt;
          &lt;td&gt;ï¿¥35&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;æ°´æ³µ+ç»§ç”µå™¨&lt;/td&gt;
          &lt;td&gt;ï¿¥25&lt;/td&gt;
          &lt;td&gt;1å¥—&lt;/td&gt;
          &lt;td&gt;ï¿¥25&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;OLEDæ˜¾ç¤ºå±&lt;/td&gt;
          &lt;td&gt;ï¿¥18&lt;/td&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;ï¿¥18&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;strong&gt;æ€»è®¡&lt;/strong&gt;&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
          &lt;td&gt;&lt;/td&gt;
          &lt;td&gt;&lt;strong&gt;ï¿¥143&lt;/strong&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;-ç¡¬ä»¶è¿æ¥&#34;&gt;ğŸ”Œ ç¡¬ä»¶è¿æ¥&lt;/h2&gt;
&lt;h3 id=&#34;ä¼ æ„Ÿå™¨è¿æ¥&#34;&gt;ä¼ æ„Ÿå™¨è¿æ¥&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å¼•è„šå®šä¹‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#define SOIL_MOISTURE_PIN A0    &lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// åœŸå£¤æ¹¿åº¦ä¼ æ„Ÿå™¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#define DHT_PIN 2              &lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#define LIGHT_SENSOR_PIN A1    &lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å…‰æ•ç”µé˜»
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#define PUMP_PIN 3             &lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// æ°´æ³µæ§åˆ¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#define OLED_SDA_PIN A4        &lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// OLED SDA
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#define OLED_SCL_PIN A5        &lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// OLED SCL
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;è¿æ¥å›¾&#34;&gt;è¿æ¥å›¾&lt;/h3&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Arduino Uno:
A0 â”€â”€ åœŸå£¤æ¹¿åº¦ä¼ æ„Ÿå™¨
A1 â”€â”€ å…‰æ•ç”µé˜» + 10kÎ©ç”µé˜»
A4 â”€â”€ OLED SDA
A5 â”€â”€ OLED SCL
D2 â”€â”€ DHT22 æ•°æ®çº¿
D3 â”€â”€ ç»§ç”µå™¨æ§åˆ¶ç«¯
5V â”€â”€ ä¼ æ„Ÿå™¨ç”µæº
GND â”€â”€ å…¬å…±åœ°
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;-è½¯ä»¶ä»£ç &#34;&gt;ğŸ’» è½¯ä»¶ä»£ç &lt;/h2&gt;
&lt;h3 id=&#34;ä¸»ç¨‹åº&#34;&gt;ä¸»ç¨‹åº&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;DHT.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;Adafruit_GFX.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;Adafruit_SSD1306.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;SoftwareSerial.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;#include&lt;/span&gt; &lt;span style=&#34;color:#75715e&#34;&gt;&amp;lt;ArduinoJson.h&amp;gt;&lt;/span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// ä¼ æ„Ÿå™¨åˆå§‹åŒ–
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;DHT &lt;span style=&#34;color:#a6e22e&#34;&gt;dht&lt;/span&gt;(DHT_PIN, DHT22);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;Adafruit_SSD1306 &lt;span style=&#34;color:#a6e22e&#34;&gt;display&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;128&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;64&lt;/span&gt;, &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&lt;/span&gt;Wire, &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;SoftwareSerial &lt;span style=&#34;color:#a6e22e&#34;&gt;esp&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;10&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;11&lt;/span&gt;); &lt;span style=&#34;color:#75715e&#34;&gt;// RX, TX
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;// å…¨å±€å˜é‡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;float&lt;/span&gt; temperature, humidity;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; soilMoisture, lightLevel;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;bool&lt;/span&gt; pumpStatus &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; false;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;long&lt;/span&gt; lastCheckTime &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;const&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;unsigned&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;long&lt;/span&gt; CHECK_INTERVAL &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;30000&lt;/span&gt;; &lt;span style=&#34;color:#75715e&#34;&gt;// 30ç§’æ£€æŸ¥ä¸€æ¬¡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;setup&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  Serial.begin(&lt;span style=&#34;color:#ae81ff&#34;&gt;9600&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  esp.begin(&lt;span style=&#34;color:#ae81ff&#34;&gt;9600&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  dht.begin();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// OLEDåˆå§‹åŒ–
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt;(&lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;display.begin(SSD1306_SWITCHCAPVCC, &lt;span style=&#34;color:#ae81ff&#34;&gt;0x3C&lt;/span&gt;)) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    Serial.println(F(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;SSD1306 allocation failed&amp;#34;&lt;/span&gt;));
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  pinMode(PUMP_PIN, OUTPUT);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  pinMode(SOIL_MOISTURE_PIN, INPUT);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  pinMode(LIGHT_SENSOR_PIN, INPUT);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  digitalWrite(PUMP_PIN, LOW);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// æ˜¾ç¤ºå¯åŠ¨ç”»é¢
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  displayBootScreen();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;loop&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// å®šæ—¶æ£€æŸ¥ä¼ æ„Ÿå™¨æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (millis() &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; lastCheckTime &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; CHECK_INTERVAL) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    readSensors();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    updateDisplay();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    checkAutoWater();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    sendDataToServer();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    lastCheckTime &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; millis();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// æ£€æŸ¥æ‰‹æœºAPPæŒ‡ä»¤
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  checkMobileCommand();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  delay(&lt;span style=&#34;color:#ae81ff&#34;&gt;1000&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;readSensors&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// è¯»å–æ¸©æ¹¿åº¦
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  temperature &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; dht.readTemperature();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  humidity &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; dht.readHumidity();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// è¯»å–åœŸå£¤æ¹¿åº¦ (0-1023, æ•°å€¼è¶Šå°è¶Šæ¹¿æ¶¦)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  soilMoisture &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; analogRead(SOIL_MOISTURE_PIN);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// è¯»å–å…‰ç…§å¼ºåº¦
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  lightLevel &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; analogRead(LIGHT_SENSOR_PIN);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  Serial.print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ¸©åº¦: &amp;#34;&lt;/span&gt;); Serial.print(temperature);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  Serial.print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;Â°C, æ¹¿åº¦: &amp;#34;&lt;/span&gt;); Serial.print(humidity);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  Serial.print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;%, åœŸå£¤æ¹¿åº¦: &amp;#34;&lt;/span&gt;); Serial.print(soilMoisture);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  Serial.print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;, å…‰ç…§: &amp;#34;&lt;/span&gt;); Serial.println(lightLevel);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;updateDisplay&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.clearDisplay();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.setTextSize(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.setTextColor(SSD1306_WHITE);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.setCursor(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ™ºèƒ½æ¤ç‰©ç›‘æ§&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.setCursor(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;16&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.printf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ¸©åº¦:%.1fÂ°C æ¹¿åº¦:%.0f%%&amp;#34;&lt;/span&gt;, temperature, humidity);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.setCursor(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;32&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.printf(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;åœŸå£¤:%d å…‰ç…§:%d&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1024&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;soilMoisture, lightLevel);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.setCursor(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;48&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ°´æ³µ:&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.print(pumpStatus &lt;span style=&#34;color:#f92672&#34;&gt;?&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å¼€å¯&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å…³é—­&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.display();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;checkAutoWater&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#75715e&#34;&gt;// åœŸå£¤æ¹¿åº¦é˜ˆå€¼ (å¯æ ¹æ®æ¤ç‰©ç±»å‹è°ƒæ•´)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;int&lt;/span&gt; moistureThreshold &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;700&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (soilMoisture &lt;span style=&#34;color:#f92672&#34;&gt;&amp;gt;&lt;/span&gt; moistureThreshold &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;!&lt;/span&gt;pumpStatus) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    startPump();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (soilMoisture &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;&lt;/span&gt; moistureThreshold &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;100&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; pumpStatus) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    stopPump();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;startPump&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  digitalWrite(PUMP_PIN, HIGH);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  pumpStatus &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; true;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  Serial.println(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;å¯åŠ¨æ°´æ³µæµ‡æ°´&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;stopPump&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  digitalWrite(PUMP_PIN, LOW);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  pumpStatus &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; false;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  Serial.println(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;åœæ­¢æ°´æ³µ&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;sendDataToServer&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  DynamicJsonDocument doc(&lt;span style=&#34;color:#ae81ff&#34;&gt;1024&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  doc[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;temperature&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; temperature;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  doc[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;humidity&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; humidity;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  doc[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;soilMoisture&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;1024&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; soilMoisture; &lt;span style=&#34;color:#75715e&#34;&gt;// è½¬æ¢ä¸ºæ¹¿åº¦ç™¾åˆ†æ¯”
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#75715e&#34;&gt;&lt;/span&gt;  doc[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;lightLevel&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; lightLevel;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  doc[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;pumpStatus&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; pumpStatus;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  doc[&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;timestamp&amp;#34;&lt;/span&gt;] &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; millis();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  serializeJson(doc, esp);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  esp.println();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;checkMobileCommand&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (esp.available()) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    String command &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; esp.readStringUntil(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;\n&amp;#39;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    command.trim();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (command &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;PUMP_ON&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      startPump();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (command &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;PUMP_OFF&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      stopPump();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    } &lt;span style=&#34;color:#66d9ef&#34;&gt;else&lt;/span&gt; &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; (command &lt;span style=&#34;color:#f92672&#34;&gt;==&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;GET_DATA&amp;#34;&lt;/span&gt;) {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;      sendDataToServer();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;void&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;displayBootScreen&lt;/span&gt;() {
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.clearDisplay();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.setTextSize(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.setTextColor(SSD1306_WHITE);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.setCursor(&lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;æ¤ç‰©å«å£«&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.setTextSize(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.setCursor(&lt;span style=&#34;color:#ae81ff&#34;&gt;30&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;50&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.print(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;System Starting...&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  display.display();
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;  delay(&lt;span style=&#34;color:#ae81ff&#34;&gt;2000&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;-æ‰‹æœºappç•Œé¢&#34;&gt;ğŸ“± æ‰‹æœºAPPç•Œé¢&lt;/h2&gt;
&lt;h3 id=&#34;blynké…ç½®&#34;&gt;Blynké…ç½®&lt;/h3&gt;
&lt;p&gt;ä½¿ç”¨Blynkå¹³å°å¿«é€Ÿåˆ›å»ºæ‰‹æœºæ§åˆ¶ç•Œé¢ï¼š&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
